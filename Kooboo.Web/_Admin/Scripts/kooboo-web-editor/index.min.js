!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=44)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(52),r=n(27),i=n(35),a=n(53),l=n(54),s=n(34),c=n(55),d=n(19);t.default=new class{constructor(){this._editing=!1,this.operationManager=new o.operationManager,this.container=d.createContainer(),this.floatMenuClosing=!1,this.domChangeEvent=new r.SelectedDomEvent,this.editableEvent=new a.EditableEvent,this.tinymceInputEvent=new l.TinymceInputEvent,this.operationEvent=new s.OperationEvent,this.hoverDomEvent=new i.HoverDomEvent,this.closeEditingEvent=new c.CloseEditingEvent}set editing(e){this._editing=e,this.editableEvent.emit(e)}get editing(){return this._editing}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let o=localStorage.getItem("lang");o||(o="en"),t.lang=o;var r={en:{MENU:"Menu",EDIT:"Edit",COPY:"Copy",DELETE:"Delete",EDIT_IMAGE:"Edit image",EDIT_LINK:"Edit link",EDIT_IMAGES:"Edit images",EDIT_LINKS:"Edit links",ENTER_LINK:"Enter link",EDIT_HTML_BLOCK:"Edit html block",CONVERT:"Convert to",CONVERTTOHTMLBLOCK:"Html block",CONVERTTOVIEW:"View",OK:"Ok",CANCEL:"Cancel",PAGE_LINK:"Page link",OUT_LINK:" Out link",EDIT_REPEAT:"Edit repeat item",EDIT_MENU:"Edit menu",EDIT_STYLE:"Edit style",ALT:"Alt",TITLE:"Title",WIDTH:"Width",HEIGHT:"Height",PLEASE_EDIT_AFTER_SAVE:"Please edit after save",COPY_REPEAT:"Copy repeat item",DELETE_REPEAR:"Delete repeat item",REPLACE_TO_IMG:"Replace to image",REPLACE_TO_TEXT:"Replace to text",MOVE:"Move",PREVIOUS:"Undo",NEXT:"Redo",SAVE:"Save",CONTENT_IMAGES:"Content images",STYLE_IMAGES:"Style images",DOM_IMAGES:"DOM images",CONTENT_LINKS:"Content links",DOM_LINKS:"DOM links",BACKGROUND_IMAGE:"Background image",COLOR:"Color",BACKGROUND_COLOR:"Background color",FONT:"Font",FONT_SIZE:"Font size",FONT_WEIGHT:"Font weight",FONT_FAMILY:"Font family",SIZE:"Size",CLICK:"Click",EDIT_FORM:"Edit form",EXPAND_SELECTION:"Expand selection",GLOBAL_UPDATE:"Global update",EDIT_COLOR:"Edit color",EDIT_DATA:"Edit data",HTML_MODE_TIP:"Failed to initialize the editor as the document is not in standards mode",CLICK_REPLACE:"Click to replace"},zh:{MENU:"菜单",EDIT:"编辑",COPY:"复制这块",DELETE:"删除",EDIT_IMAGE:"编辑图片",EDIT_LINK:"编辑链接",EDIT_IMAGES:"编辑图片",EDIT_LINKS:"编辑链接",ENTER_LINK:"跳转链接",EDIT_HTML_BLOCK:"编辑HTML代码块",CONVERT:"转换为",CONVERTTOHTMLBLOCK:"Html 代码块",CONVERTTOVIEW:"视图",CANCEL:"取消",OK:"确定",PAGE_LINK:"页面链接",OUT_LINK:"外部链接",EDIT_REPEAT:"编辑项目",EDIT_MENU:"编辑菜单",EDIT_STYLE:"编辑样式",ALT:"替代文本",HEIGHT:"高度",TITLE:"标题",WIDTH:"宽度",PLEASE_EDIT_AFTER_SAVE:"请保存后再编辑",COPY_REPEAT:"复制项目",DELETE_REPEAR:"删除项目",REPLACE_TO_IMG:"替换为图片",REPLACE_TO_TEXT:"替换为文字",MOVE:"移动",NEXT:"下一步",PREVIOUS:"上一步",SAVE:"保存",CONTENT_IMAGES:"内容图片",STYLE_IMAGES:"样式图片",DOM_IMAGES:"DOM 图片",CONTENT_LINKS:"内容链接",DOM_LINKS:"DOM 链接",BACKGROUND_COLOR:"背景颜色",BACKGROUND_IMAGE:"背景图片",COLOR:"颜色",FONT:"字体",FONT_FAMILY:"字体风格",FONT_SIZE:"字体大小",FONT_WEIGHT:"字体重量",SIZE:"大小",CLICK:"点击",EDIT_FORM:"编辑表单",EXPAND_SELECTION:"扩大选区",GLOBAL_UPDATE:"全局更新",EDIT_COLOR:"编辑颜色",EDIT_DATA:"编辑数据",HTML_MODE_TIP:"无法在这个网页初始化内联编辑器，因为此页面工作在非标准模式下",CLICK_REPLACE:"点击替换"}};t.TEXT=r[t.lang]},function(e,t,n){"use strict";function o(e){let{tagName:t,className:n,innerText:o}=e,r=document.createElement(t);return n&&r.classList.add(n),o&&(r.innerText=o),r}Object.defineProperty(t,"__esModule",{value:!0}),t.createButton=e=>o({tagName:"div",className:"kb_web_editor_btn",innerText:e}),t.createDiv=()=>o({tagName:"div",className:"kb_web_editor_div"}),t.createInput=()=>o({tagName:"input",className:"kb_web_editor_input"}),t.createIframe=()=>o({tagName:"iframe",className:"kb_web_editor_iframe"}),t.createImg=()=>o({tagName:"img"}),t.createP=()=>o({tagName:"p"}),t.createPrimaryButton=function(e){let n=t.createButton(e);return n.classList.add("kb_web_editor_btn_primary"),n},t.createLabelInput=function(e,n){let o=t.createDiv();o.classList.add("kb_web_editor_label_input");let r=t.createDiv();r.innerText=e;let i=t.createDiv(),a=t.createInput();return i.appendChild(a),null!=n&&(r.style.width=n+"px"),null!=n&&(i.style.left=n+5+"px"),o.appendChild(r),o.appendChild(i),{input:o,getContent:()=>a.value,setContent:e=>a.value=e,setInputHandler:e=>a.oninput=e}},t.createRadioInput=function(e){let n=t.createDiv();n.classList.add("kb_web_editor_radio_input");let o=t.createInput();o.type="radio",n.appendChild(o);let r=t.createDiv();return r.innerText=e,n.appendChild(r),{radio:n,setChecked:e=>o.checked=e,getContent:()=>e}},t.createCheckboxInput=function(e,n,o){let r=t.createDiv();r.classList.add("kb_web_editor_checkobx_input");let i=t.createInput();i.type="checkbox",i.oninput=()=>o(i.checked),r.appendChild(i);let a=t.createDiv();return a.innerText=e,i.checked=n,r.appendChild(a),{checkbox:r,setChecked:e=>i.checked=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EDITOR_SHADE_COLOR="rgba(0,0,0,0.5)",t.STANDARD_Z_INDEX=1e7,t.HOVER_BORDER_WIDTH=2,t.HOVER_BORDER_COLOR="#1fb5f6a3",t.SELECTED_BORDER_WIDTH=1,t.SELECTED_BORDER_COLOR="red",t.HOVER_BORDER_SKIP="__HOVER_BORDER_SKIP",t.KOOBOO_ID="kooboo-id",t.KOOBOO_DIRTY="kooboo-dirty",t.KOOBOO_GUID="kooboo-guid",t.EMPTY_COMMENT="\x3c!--empty--\x3e",t.OBJECT_TYPE={content:"content",contentrepeater:"contentrepeater",htmlblock:"htmlblock",Label:"Label",view:"view",menu:"menu",page:"page",style:"style",dom:"dom",attribute:"attribute",layout:"layout",form:"form",Url:"Url"},t.EDITOR_TYPE={dom:"dom",htmlblock:"htmlblock",label:"label",content:"content",attribute:"attribute",style:"style",converter:"converter"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(3);t.getScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop},t.getScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft},t.getMaxHeight=function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)},t.getMaxWidth=function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollWidth,e.offsetWidth,t.clientWidth,t.scrollWidth,t.offsetWidth)},t.getAllElement=function*(e,t=!1){t&&(yield e),yield*function*e(t){if(!(t instanceof HTMLElement&&t.id==o.HOVER_BORDER_SKIP))for(let n=0;n<t.children.length;n++){const o=t.children[n];yield o,yield*e(o)}}(e)},t.getAllNode=function*(e,t=!1){t&&(yield e),yield*function*e(t){if(!(t instanceof HTMLElement&&t.id==o.HOVER_BORDER_SKIP))for(let n=0;n<t.childNodes.length;n++){const o=t.childNodes[n];yield o,yield*e(o)}}(e)},t.isBody=function(e){return"body"==e.tagName.toLowerCase()},t.isImg=function(e){return"img"==e.tagName.toLowerCase()},t.isLink=function(e){return"a"==e.tagName.toLowerCase()},t.isTextArea=function(e){return e instanceof HTMLTextAreaElement},t.isForm=function(e){return e instanceof HTMLFormElement},t.canJump=function(e){const t=["mailto:","tel:","sms:","market","geopoint:"];let n=e.getAttribute("href");if(!n)return!1;n=n.trim().toLowerCase();for(const e of t)if(n.trim().startsWith(e))return!1;return!(n.startsWith("#")||n.startsWith("http")&&!n.startsWith(window.location.origin.toLowerCase()))},t.reload=function(){window.top.location.reload()},t.previousNodes=function*(e,t=!1,n=!1){for(t&&(yield e);;){if(e.previousSibling)e=e.previousSibling;else{if(!n||!e.parentNode)break;e=e.parentNode}yield e}},t.nextNodes=function*(e,t=!1,n=!1){for(t&&(yield e);;){if(e.nextSibling)e=e.nextSibling;else{if(!n||!e.parentNode)break;e=e.parentNode}yield e}},t.getParentElements=function(e,t=!0){let n=[];for(t&&n.push(e);e;)(e=e.parentElement)&&n.push(e);return n},t.isInTable=function(e){return/^(thead|tbody|tfoot|th|tr|td)$/i.test(e.tagName)},t.getImportant=function(e,t,n){return n.some(n=>e.matches(n.cssRule.selectorText)&&n.cssRule.style.getPropertyPriority(t))?"important":e.style.getPropertyPriority(t)},t.shareStyle=function(e){let t=["/*! Pickr","/* kb_web_editor */"];for(let n=0;n<document.styleSheets.length;n++){let o=document.styleSheets.item(n);if(!(o.ownerNode instanceof HTMLElement))return;t.some(e=>o.ownerNode.innerHTML.startsWith(e))&&e.appendChild(o.ownerNode.cloneNode(!0))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(4),r=n(6),i=n(3),a=n(10);function l(e){let t=[i.OBJECT_TYPE.attribute,i.OBJECT_TYPE.content,i.OBJECT_TYPE.Label,i.OBJECT_TYPE.style,i.OBJECT_TYPE.Url],n=new r.KoobooComment(e);return t.some(e=>e==n.objecttype)}function s(e){for(const t of o.previousNodes(e)){if(t instanceof Comment&&r.KoobooComment.isComment(t)){if(r.KoobooComment.isEndComment(t))break;return t}if(t instanceof HTMLElement)break}}t.clearKoobooInfo=function(e){const t=RegExp(`(data-mce-selected=".*?")|(data-mce-href=".*?")|(data-mce-style=".*?")|(${i.KOOBOO_ID}=".*?")|(${i.KOOBOO_DIRTY}(="")?)|(${i.KOOBOO_GUID}=".*?")|(\x3c!--#?kooboo.*?--\x3e)|(\x3c!--empty--\x3e)`,"g");return e.replace(t,"")},t.getCloseElement=function(e){let t=e,n=null,o=null;for(;t&&!(t instanceof HTMLElement&&o!=t.parentElement&&(n=t,t.hasAttribute(i.KOOBOO_ID)))&&!r.KoobooComment.isComment(t);)o=t.parentElement,t=t.previousSibling?t.previousSibling:t.parentElement;return n},t.markDirty=function(e,t=!1){for(const n of o.getAllElement(e,t))n.setAttribute(i.KOOBOO_DIRTY,"")},t.isDirty=function(e){return e.hasAttribute(i.KOOBOO_DIRTY)},t.setGuid=function(e,t=""){let n=e.getAttribute(i.KOOBOO_GUID);return t?n=t:n||(n=a.newGuid()),e.setAttribute(i.KOOBOO_GUID,n),n},t.getGuidComment=function(e){return`\x3c!--${i.KOOBOO_GUID} ${e}--\x3e`},t.isDynamicContent=function(e){for(const t in i.OBJECT_TYPE)if(t!=i.OBJECT_TYPE.Url&&i.OBJECT_TYPE.hasOwnProperty(t)){const n=i.OBJECT_TYPE[t];if(e.innerHTML.indexOf(`objecttype='${n}'`)>-1)return!0}return!1},t.getPageId=function(){let e;for(const t of o.getAllNode(document))if(r.KoobooComment.isComment(t)){let n=new r.KoobooComment(t.nodeValue);if(n.objecttype==i.OBJECT_TYPE.page){e=n.nameorid;break}}return e},t.getWrapDom=function(e,t){let n,i,a,s=[];for(const a of o.previousNodes(e,!0,!0))if(r.KoobooComment.isComment(a)){let e=new r.KoobooComment(a);if(e.objecttype==t&&!e.end){n=a,i=e.boundary;break}}if(n){let e=l(n);for(const l of o.nextNodes(n,!0,!1)){if(s.push(l),e&&l instanceof HTMLElement){a=l;break}if(r.KoobooComment.isComment(l)){let e=new r.KoobooComment(l);if(e.objecttype==t&&e.end&&e.boundary==i){a=l;break}}}}return{nodes:s,startNode:n,endNode:a}},t.isSingleCommentWrap=l,t.getCleanParent=function(e){let t=!1;for(;;){let n=s(e),o=e.hasAttribute(i.KOOBOO_DIRTY),r=e.getAttribute(i.KOOBOO_ID);if(!o&&t&&r)return{parent:e,koobooId:r};if(!e.parentElement||e.parentElement instanceof HTMLHtmlElement||n&&!l(n))return{parent:null,koobooId:null};e=e.parentElement,t=!0}},t.previousComment=s,t.getRelatedRepeatComment=function(e){let t=s(e);if(!t||!r.KoobooComment.isComment(t)||!l(t))return;let n=new r.KoobooComment(t);if(!n.end)for(const e of o.getAllNode(document.body))if(e instanceof Comment&&r.KoobooComment.isComment(e)&&!r.KoobooComment.isEndComment(e)){let t=new r.KoobooComment(e);if(t.objecttype==i.OBJECT_TYPE.contentrepeater&&t.nameorid==n.nameorid)return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(5),r=n(4),i=n(3);class a{constructor(e){let t="";e instanceof Node?t=e.nodeValue:e&&(t=e),e&&(this._infos=t.split("--").map(e=>e.replace(/'/g,"")))}get objecttype(){return this.getValue("objecttype")}get nameorid(){return this.getValue("nameorid")}get folderid(){return this.getValue("folderid")}get bindingvalue(){return this.getValue("bindingvalue")}get boundary(){return this.getValue("boundary")}get fieldname(){let e=this.getValue("fieldname");return!e&&this.bindingvalue&&this.bindingvalue.indexOf(".")>-1&&(e=(e=this.bindingvalue.split(".").pop()).replace("}","")),e}get koobooid(){return this.getValue("koobooid")}get attributename(){return this.getValue("attributename")}get end(){return Boolean(this.getValue("end"))}getValue(e){var t=this._infos.find(t=>t.startsWith(e));if(t&&-1!=t.indexOf("="))return t.split("=")[1]}static isComment(e){return e.nodeType==Node.COMMENT_NODE&&e.nodeValue&&e.nodeValue.startsWith("#kooboo")}static isEndComment(e){return this.isComment(e)&&e.nodeValue.indexOf("--end")>-1}static isGuidComment(e){return this.isComment(e)&&e.nodeValue.indexOf(i.KOOBOO_GUID)>-1}static getComments(e){let t,n=e,r=this.getSingleWrapComment(e);for(;e;){for(t=o.previousComment(e);t&&!this.isEndComment(t)&&!this.isGuidComment(t);)!o.isSingleCommentWrap(t)&&this.isInWrap(t,n)&&r.push(t),t=o.previousComment(t);e=e.previousElementSibling?e.previousElementSibling:e.parentElement}return r.map(e=>new a(e))}static getSingleWrapComment(e){let t,n=[];for(t=o.previousComment(e);t&&o.isSingleCommentWrap(t);)n.push(t),t=o.previousComment(t);return n}static isInWrap(e,t){let n=new a(e),{nodes:i}=o.getWrapDom(e,n.objecttype);return i.some(e=>{for(const n of r.getAllNode(e,!0))if(n==t)return!0})}}t.KoobooComment=a},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,l)}s((o=o.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),a=n(6),l=n(4),s=n(5),c=n(38),d=n(12),u=n(13),p=n(9),f=r(n(0)),h=n(15),m=n(82),g=n(17),b=n(30),y=n(16),M=n(2);function _(e,t){for(const n of e)if(n.objecttype&&n.objecttype.toLowerCase()==t.toLowerCase())return n}function v(e){return[i.OBJECT_TYPE.view,i.OBJECT_TYPE.page,i.OBJECT_TYPE.layout].some(t=>t==e.objecttype)}t.getEditComment=function(e){const t=[i.OBJECT_TYPE.view,i.OBJECT_TYPE.page,i.OBJECT_TYPE.layout,i.OBJECT_TYPE.content,i.OBJECT_TYPE.Label];for(const n of e)if(n.objecttype&&t.some(e=>e==n.objecttype))return n},t.getViewComment=function(e){const t=[i.OBJECT_TYPE.view,i.OBJECT_TYPE.page,i.OBJECT_TYPE.layout];for(const n of e)if(n.objecttype&&t.some(e=>e==n.objecttype))return n},t.getAttributeComment=function(e,t=""){for(const n of e)if(n.objecttype&&n.objecttype==i.OBJECT_TYPE.attribute&&(!t||n.attributename==t))return n},t.hasOperation=function(e){return e.previousRecords.length>0},t.getMenuComment=e=>_(e,i.OBJECT_TYPE.menu),t.getFormComment=e=>_(e,i.OBJECT_TYPE.form),t.getHtmlBlockComment=e=>_(e,i.OBJECT_TYPE.htmlblock),t.getRepeatComment=e=>_(e,i.OBJECT_TYPE.contentrepeater),t.getUrlComment=e=>_(e,i.OBJECT_TYPE.Url),t.changeNameOrId=function e(t,n,o){if(a.KoobooComment.isComment(t)&&t.nodeValue.indexOf(o)>-1&&(t.nodeValue=t.nodeValue.replace(/--nameorid='.{36,50}?'/,`--nameorid='${n}'`)),t instanceof HTMLElement)for(const r of l.getAllNode(t))e(r,n,o)},t.updateDomImage=function(e,t,n,r){return o(this,void 0,void 0,function*(){s.setGuid(t);let o=e.cloneNode(!0);try{if(yield c.createImagePicker(e),o.outerHTML==e.outerHTML)return;s.markDirty(t);let i=s.setGuid(t),a=s.clearKoobooInfo(t.innerHTML),l=o.getAttribute("src"),u=new h.AttributeUnit(l,"src"),m=d.DomLog.createUpdate(r.nameorid,a,n,r.objecttype),g=new p.operationRecord([u],[m],i);return f.default.operationManager.add(g),e.getAttribute("src")}catch(t){e.setAttribute("src",o.getAttribute("src")),e.setAttribute("style",o.getAttribute("style")),e.title=o.title,e.alt=o.alt}})},t.updateAttributeImage=function(e,t,n){return o(this,void 0,void 0,function*(){let o=e.cloneNode(!0);M.createDiv().appendChild(o);try{if(yield c.createImagePicker(e),o.outerHTML==e.outerHTML)return;let r=s.setGuid(e),i=o.getAttribute("src"),a=e.style.getPropertyPriority("width"),l=e.style.getPropertyPriority("height"),u=[new h.AttributeUnit(o.title,"title"),new h.AttributeUnit(o.alt,"alt"),new h.AttributeUnit(i,"src"),new m.StyleUnit(o.style.width,"width",a),new m.StyleUnit(o.style.height,"height",l)],b=e.getAttribute("src"),y=[d.DomLog.createUpdate(n.nameorid,e.title,t,n.objecttype,"title"),d.DomLog.createUpdate(n.nameorid,e.alt,t,n.objecttype,"alt"),d.DomLog.createUpdate(n.nameorid,b,t,n.objecttype,"src"),g.StyleLog.createUpdate(n.nameorid,n.objecttype,e.style.width,"width",t,!!a),g.StyleLog.createUpdate(n.nameorid,n.objecttype,e.style.height,"height",t,!!l)],M=new p.operationRecord(u,y,r);return f.default.operationManager.add(M),b}catch(t){e.setAttribute("src",o.getAttribute("src")),e.setAttribute("style",o.getAttribute("style")),e.title=o.title,e.alt=o.alt}})},t.updateDomLink=function(e,t,n,r){return o(this,void 0,void 0,function*(){s.setGuid(e);let o=e.innerHTML,i=n.getAttribute("href");try{let a=yield b.createLinkPicker(i);n.setAttribute("href",a);let l=s.setGuid(e),c=s.clearKoobooInfo(e.innerHTML),h=new u.InnerHtmlUnit(o),m=d.DomLog.createUpdate(r.nameorid,c,t,r.objecttype),g=new p.operationRecord([h],[m],l);return f.default.operationManager.add(g),a}catch(t){e.innerHTML=o}})},t.updateAttributeLink=function(e,t,n){return o(this,void 0,void 0,function*(){s.setGuid(e);let o=e.getAttribute("href");try{let r=yield b.createLinkPicker(o);e.setAttribute("href",r);let i,a=s.setGuid(e),l=new h.AttributeUnit(o,"href");i=v(n)?d.DomLog.createUpdate(n.nameorid,r,t,n.objecttype,"href"):y.ContentLog.createUpdate(n.nameorid,n.fieldname,r);let c=new p.operationRecord([l],[i],a);return f.default.operationManager.add(c),r}catch(t){e.setAttribute("href",o)}})},t.updateUrlLink=function(e,t,n,r){return o(this,void 0,void 0,function*(){s.setGuid(e);let o=e.getAttribute("href");try{let i=yield b.createLinkPicker(o);e.setAttribute("href",i);let a=s.setGuid(e),l=new h.AttributeUnit(o,"href"),c=d.DomLog.createUpdate(r.nameorid,i,t,r.objecttype,n.attributename),u=new p.operationRecord([l],[c],a);return f.default.operationManager.add(u),i}catch(t){e.setAttribute("href",o)}})},t.getFirstComment=function(e){for(const t of e)if(t.objecttype!=i.OBJECT_TYPE.Url)return t},t.isViewComment=v,t.isEditComment=function(e){return[i.OBJECT_TYPE.view,i.OBJECT_TYPE.page,i.OBJECT_TYPE.layout,i.OBJECT_TYPE.content,i.OBJECT_TYPE.Label,i.OBJECT_TYPE.attribute].some(t=>t==e.objecttype)},t.isRepeatComment=function(e){return e.objecttype==i.OBJECT_TYPE.contentrepeater},t.clearContent=e=>s.clearKoobooInfo(e).replace(/\s/g,""),t.isEditable=function(e){return!/^(img|button|input|textarea|hr|area|canvas|meter|progress|select|tr|td|tbody|thead|tfoot|th|table)$/i.test(e.tagName)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2),r=n(1);t.default=class{constructor(e){this.parentMenu=e}createItem(e){let t,n=o.createDiv();return n.classList.add("kb_web_editor_menu_item"),n.append(e),{el:n,setVisiable:e=>{n.style.display=e?"block":"none"},setReadonly:e=>{t||(t=this.createWarn()),e?(n.style.color="#ccc",n.style.pointerEvents="none",n.appendChild(t)):(n.style.removeProperty("color"),n.style.removeProperty("pointer-events"),n.contains(t)&&n.removeChild(t))}}}createWarn(){let e=o.createDiv();return e.innerText="!",e.style.display="inline-block",e.style.width="18px",e.style.height="18px",e.style.color="#fff",e.style.backgroundColor="rgba(252, 56, 56, 0.74)",e.style.textAlign="center",e.style.fontSize="15px",e.style.fontWeight="600",e.style.lineHeight="18px",e.style.borderRadius="9px",e.style.cssFloat="right",e.style.pointerEvents="painted",e.title=r.TEXT.PLEASE_EDIT_AFTER_SAVE,e.onclick=e=>{e.stopPropagation()},e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(4),r=n(3);t.operationRecord=class{constructor(e,t,n){this.units=e,this.logs=t,this.guid=n}undo(){let e=this.getOperationNode(this.guid);if(e)for(const t of this.units)t.undo(e)}redo(){let e=this.getOperationNode(this.guid);if(e)for(const t of this.units)t.redo(e)}getOperationNode(e){for(const t of o.getAllNode(document.body,!0)){if(t instanceof HTMLElement){let n=t.getAttribute(r.KOOBOO_GUID);if(n&&n==e)return t}if(t.nodeType==Node.COMMENT_NODE&&t.nodeValue&&t.nodeValue.indexOf(e)>-1)return t}}}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,l)}s((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const r=n(11),i=n(1),a=n(2),l=document.__gl,s=document.Kooboo,c=document.mediaDialogData;t.parentBody=document.parentBody,t.pickImg=function(e){s.Media.getList().then(function(t){t.success&&(t.model.show=!0,t.model.onAdd=t=>{e(t.url)}),c(t.model)})},t.editHtmlBlock=function(e){return o(this,void 0,void 0,function*(){let n=s.Route.Get(s.Route.HtmlBlock.DialogPage,{nameOrId:e}),c=a.createIframe();c.src=n,c.style.height="600px";const{modal:d,setOkHandler:u,close:p}=r.createModal(i.TEXT.EDIT_HTML_BLOCK,c.outerHTML);return t.parentBody.appendChild(d),new Promise(e=>{u(()=>o(this,void 0,void 0,function*(){l.saveHtmlblockFinish=t=>{e(t),p()},l.saveHtmlblock()}))})})},t.editRepeat=function(e,n){let o=s.Route.Get(s.Route.TextContent.DialogPage,{id:e,folder:n}),c=a.createIframe();c.src=o,c.style.height="600px";const{modal:d,setOkHandler:u,close:p}=r.createModal(i.TEXT.EDIT_REPEAT,c.outerHTML);return t.parentBody.appendChild(d),new Promise(e=>{u(()=>{l.saveContentFinish=t=>{e(t),p()},l.saveContent()})})},t.editMenu=function(e,n){var o=s.Route.Get(s.Route.Menu.DialogPage,{nameOrId:e});let c=a.createIframe();c.src=o,c.style.height="600px";const{modal:d,hideCancel:u}=r.createModal(i.TEXT.EDIT_MENU,c.outerHTML);u(),l.saveMenuFinish=n,t.parentBody.appendChild(d)},t.getPageUrls=function(){return o(this,void 0,void 0,function*(){return new Promise((e,t)=>{s.Link.SyncAll().then(t=>{e(t.model.pages.map(e=>e.url))})})})},t.newGuid=function(){return s.Guid.NewGuid()},t.Update=function(e){return new Promise((t,n)=>{s.Editor.Update(e).then(t)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(56),r=n(57),i=n(59),a=n(60);t.createModal=function(e,t,n,l){let{shade:s,win:c}=o.createContainer(n);const[d,u]=a.createBody(l),{footer:p,ok:f,cancel:h}=i.createFooter(),{header:m,close:g}=r.createHeader(e,c);u(t);const b=()=>{s.parentElement.removeChild(s)};return f.onclick=b,h.onclick=b,g.onclick=b,c.appendChild(m),c.appendChild(d),c.appendChild(p),{modal:s,setOkHandler:e=>f.onclick=e,setCancelHandler:e=>{h.onclick=e,g.onclick=e},close:b,hideCancel:()=>h.style.display="none"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(3),r=n(22),i=n(23);class a extends i.Log{constructor(){super(...arguments),this.editorType=o.EDITOR_TYPE.dom}static createUpdate(e,t,n,o,i=""){let l=new a;return l.action=r.ActionType.update,l.nameOrId=e,l.value=t,l.koobooId=n,l.objectType=o,i&&(l.attributeName=i),l}static createDelete(e,t,n){let o=new a;return o.action=r.ActionType.delete,o.nameOrId=e,o.koobooId=t,o.objectType=n,o}}t.DomLog=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(21);t.InnerHtmlUnit=class extends o.Unit{undo(e){let t=e;this.newValue=t.innerHTML,t.innerHTML=this.oldValue}redo(e){let t=e;this.oldValue=t.innerHTML,t.innerHTML=this.newValue}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(0)),i=n(5),a=n(35),l=n(27);t.hover=function(e){e.stopPropagation();let t=r.default.lastHoverDomEventArgs;if(r.default.editing)return;let n=e.target;if(t&&t.element==n)return;let o=i.getCloseElement(n);null!=o&&(t=new a.HoverDomEventArgs(n,o),r.default.lastMouseEventArg=e,r.default.hoverDomEvent.emit(t))},t.emitHoverEvent=function(e){let t=i.getCloseElement(e);null!=t&&r.default.hoverDomEvent.emit(new a.HoverDomEventArgs(e,t))},t.emitSelectedEvent=function(){let e=r.default.lastHoverDomEventArgs.closeElement;var t=new l.SelectedDomEventArgs(e);r.default.domChangeEvent.emit(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(21);t.AttributeUnit=class extends o.Unit{constructor(e,t){super(e),this.oldValue=e,this.attribute=t}undo(e){let t=e;this.newValue=t.getAttribute(this.attribute),t.setAttribute(this.attribute,this.oldValue)}redo(e){let t=e;this.oldValue=t.getAttribute(this.attribute),t.setAttribute(this.attribute,this.newValue)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(3),r=n(22),i=n(23);class a extends i.Log{constructor(){super(...arguments),this.editorType=o.EDITOR_TYPE.content}static createCopy(e,t){let n=new a;return n.action=r.ActionType.copy,n.nameOrId=e,n.orgNameOrId=t,n}static createDelete(e){let t=new a;return t.action=r.ActionType.delete,t.nameOrId=e,t}static createUpdate(e,t,n){let o=new a;return o.action=r.ActionType.update,o.nameOrId=e,o.fieldName=t,o.value=n,o}}t.ContentLog=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(3),r=n(22),i=n(23);class a extends i.Log{constructor(){super(...arguments),this.editorType=o.EDITOR_TYPE.style}static createUpdate(e,t,n,o,i,l){let s=new a;return s.action=r.ActionType.update,s.nameOrId=e,s.value=n,s.objectType=t,s.property=o,s.KoobooId=i,s.important=l||!1,s}static createCssUpdate(e,t,n,o,i,l,s,c,d){let u=new a;return u.action=r.ActionType.update,u.value=e,u.property=t,u.styleTagKoobooId=o,u.styleSheetUrl=i,u.selector=n,u.important=l,u.nameOrId=s,u.objectType=c,u.mediaRuleList=d,u}}t.StyleLog=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BaseEvent=class{constructor(){this.handlers=[]}addEventListener(e){this.handlers.push(e)}emit(e){this.handlers.forEach(t=>t(e))}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),i=o(n(0)),a=n(27),l=n(3),s=n(14),c=n(1);function d(e){e.onclick=e=>{if(e.isTrusted&&(e.stopPropagation(),e.preventDefault()),i.default.editing)return;let t=i.default.lastHoverDomEventArgs.closeElement;var n=new a.SelectedDomEventArgs(t);i.default.lastMouseEventArg=e,i.default.domChangeEvent.emit(n)}}t.delay=function(e){return new Promise(t=>{setTimeout(t,e)})},t.initElements=function(){for(const e of r.getAllElement(document.body,!0))if(e.id!=l.HOVER_BORDER_SKIP&&e instanceof HTMLElement){if(r.isLink(e)){let t=e.cloneNode(!0);t._a=e,e.parentElement.replaceChild(t,e)}e.addEventListener("mouseover",s.hover),d(e)}},t.holdUpClick=d,t.createContainer=function(){let e=document.createElement("div");e.classList.add("kb_web_editor_container"),e.id=l.HOVER_BORDER_SKIP,document.documentElement.appendChild(e);let t=e.attachShadow({mode:"open"}),n=document.createElement("div");return n.classList.add("kb_web_editor_root"),t.appendChild(n),n},t.htmlModeCheck=function(){return document.doctype||alert(c.TEXT.HTML_MODE_TIP),!!document.doctype}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2);t.createButton=function(e,t){let n=o.createDiv();n.classList.add("kb_action_bar_btn"),n.title=t,n.style.backgroundImage=`url(${e})`;let r=n;return r.changeIcon=e=>n.style.backgroundImage=`url(${e})`,r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.innerHtml=0]="innerHtml",e[e.copy=1]="copy"}(t.Type||(t.Type={}));t.Unit=class{constructor(e){this.oldValue=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.add="add",e.update="update",e.delete="delete",e.copy="copy"}(t.ActionType||(t.ActionType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Log=class{}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(1),a=o(n(76));t.createImagePreview=function(e=!1,t){let n=r.createDiv();n.classList.add("kb_web_editor_image_preview"),n.style.backgroundImage=`url(${a.default})`;let o=r.createDiv();n.appendChild(o);let l=r.createButton(i.TEXT.DELETE);return l.style.visibility=e?"visible":"hidden",n.appendChild(l),l.onclick=e=>{o.style.backgroundImage="",t&&t(),e.stopPropagation()},{imagePreview:n,setImage:e=>{"none"==e?o.style.backgroundImage="none":e.indexOf("url(")>-1?o.style.backgroundImage=e:o.style.backgroundImage=`url('${e}')`}}},t.createPickShade=function(){let e=r.createDiv();return e.innerText=i.TEXT.CLICK_REPLACE,e.classList.add("kb_web_editor_pick_shade"),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(3),r=n(77),i=n(80),a=n(81),l=n(6),s=n(7),c=["visited","hover","active","focus"];function d(){let e=[];for(const t of document.styleSheets)t&&t instanceof CSSStyleSheet&&(t.media&&t.media.mediaText&&!matchMedia(t.media.mediaText).matches||e.push(t));return e}function u(e,t){let n=[];try{for(const o of e.rules)if(o instanceof CSSStyleRule)n.push({cssRule:o,url:t});else if(o instanceof CSSMediaRule&&matchMedia(o.media.mediaText).matches)for(const e of o.cssRules)n.push({cssRule:e,mediaRuleList:o.media.mediaText,url:t});else o instanceof CSSImportRule&&n.push(...u(o.styleSheet,o.styleSheet.href))}catch(e){}return n}function p(){let e=[],t=0;for(const n of d()){if(!(n.ownerNode instanceof HTMLElement))continue;let r=l.KoobooComment.getComments(n.ownerNode),i=s.getViewComment(r);if(!i)continue;let a=n.ownerNode.getAttribute(o.KOOBOO_ID),c=n.ownerNode.getAttribute("href");if(!(!a&&!c||c&&c.startsWith("http")&&!c.startsWith(location.origin)))for(const{cssRule:o,mediaRuleList:r,url:l}of u(n,c))o&&o instanceof CSSStyleRule&&e.push({styleSequence:++t,koobooId:a,url:l,cssRule:o,nameorid:i.nameorid,objecttype:i.objecttype,mediaRuleList:r})}return e}function f(e){let t=[];return h(e,t),function(e,t){for(const n of p()){let o=y(e,n.cssRule.selectorText);for(const e of o){let o=m(n.cssRule.style);for(const r of o)t.push({prop:r.prop,styleSequence:n.styleSequence,important:r.important,inline:!1,koobooId:n.koobooId,rawSelector:n.cssRule.selectorText,targetSelector:e.selector,url:n.url,value:r.value,pseudo:e.pseudo,cssStyleRule:n.cssRule,nameorid:n.nameorid,objecttype:n.objecttype,mediaRuleList:n.mediaRuleList})}}}(e,t),t}function h(e,t){let n=m(e.style);for(const e of n)t.push({prop:e.prop,styleSequence:Number.MAX_VALUE/2,important:e.important,inline:!0,koobooId:"",rawSelector:"",targetSelector:"",nameorid:void 0,objecttype:void 0,url:"",value:e.value,pseudo:"",cssStyleRule:null,mediaRuleList:null})}function m(e){let t=[];for(const n of r.colorProps){let o=e.getPropertyValue(n.prop);o&&t.push({prop:n,value:o,important:!!e.getPropertyPriority(n.prop)})}return t}function g(e){return e=e.trim().toLowerCase(),!!/^(#|rgb)((?!(#|rgb)).)*$/g.test(e)||!!a.colorEnum.hasOwnProperty(e)}function b(e){for(const t of c){let n=e.match(`:+${t}s*$`);if(n)return{pseudo:n[0],selector:e.replace(n[0],"")}}}function y(e,t){let n=[];var o=t.split(",");for(const t of o){let o=b(t);o&&e.matches(o.selector)?n.push({selector:t,pseudo:o.pseudo}):e.matches(t)&&n.push({selector:t,pseudo:""})}return n}function M(e,t,n){let o=r.colorProps.find(e=>e.prop==t);e.some(e=>e.prop==o.parent&&!e.pseudo)||e.push({pseudo:"",prop:o.parent,cssColors:[{inline:!0,prop:o,cssStyleRule:null,important:!1,koobooId:"",pseudo:"",rawSelector:"",styleSequence:0,targetSelector:"",url:"",value:n,nameorid:void 0,objecttype:void 0,mediaRuleList:null}]})}t.getStyles=d,t.getRules=u,t.getCssRules=p,t.getMatchedColorGroups=function(e){let t=[],n=f(e);for(const e of n){let n=t.find(t=>t.prop==e.prop.parent&&t.pseudo==e.pseudo);n?n.cssColors.push(e):t.push({prop:e.prop.parent,cssColors:[e],pseudo:e.pseudo})}for(const e of t)e.cssColors=i.sortStylePriority(e.cssColors).reverse();for(const e of[...t]){if(g(e.cssColors[0].prop.getColor(e.cssColors[0].value)))continue;let n=t.findIndex(t=>t==e);n<0||(t=t.filter((e,t)=>t!=n))}let o=getComputedStyle(e);return M(t,"color",o.color),M(t,"background-color",o.backgroundColor),t},t.getMatchedColors=f,t.addInlineMatchedColors=h,t.getCssColors=m,t.isOneColor=g,t.splitPseudo=b,t.matchSelector=y,t.addDefaultColor=M},,function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(18),i=o(n(0)),a=n(3);t.SelectedDomEventArgs=class{constructor(e){this.element=e}get koobooId(){return this.element.getAttribute(a.KOOBOO_ID)}};t.SelectedDomEvent=class extends r.BaseEvent{emit(e){i.default.lastSelectedDomEventArgs=e,super.emit(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2),r="2px solid rgb(32, 122, 183)";t.createTabs=function(e){let t=o.createDiv(),n=o.createDiv();n.style.marginBottom="15px";let i=o.createDiv();return e.forEach(t=>{let a=function(e){let t=o.createDiv();return t.style.height="32px",t.style.textAlign="center",t.innerText=e,t.style.display="inline-block",t.style.fontSize="15px",t.style.cursor="pointer",t}(t.title);a.style.width=100/e.length+"%",a.style.borderBottom=t.selected?r:"'",t.panel.style.display=t.selected?"block":"none",a.onclick=()=>{!function(e,t){for(let n=0;n<e.children.length;n++){let o=e.children.item(n);o.style.borderBottom=o==t?r:""}}(n,a),function(e,t){for(let n=0;n<e.children.length;n++){let o=e.children.item(n);o.style.display=o==t?"block":"none"}}(i,t.panel),e.forEach(e=>e.selected=e==t)},n.appendChild(a),i.appendChild(t.panel)}),t.appendChild(n),t.appendChild(i),t}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(14),i=o(n(0));t.setImagePreview=function(e,t){e.style.width="150px",e.style.height="150px",e.style.display="inline-block",e.style.margin="15px",e.onmouseover=()=>{i.default.lastMouseEventArg=new MouseEvent(""),t.scrollIntoView(),r.emitHoverEvent(t),r.emitSelectedEvent()}}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,l)}s((o=o.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(11),a=n(1),l=n(28),s=n(83),c=n(84),d=n(2),u=r(n(0)),p=n(3);t.createLinkPicker=function(e){return o(this,void 0,void 0,function*(){let t=d.createDiv();const{pageLinkPanel:n,getContent:r}=yield c.createPageLinkPanel(e),{outLinkPanel:f,getContent:h,setContent:m}=s.createOutLinkPanel(),g=[{title:a.TEXT.PAGE_LINK,panel:n,selected:!!r(),getContent:r},{title:a.TEXT.OUT_LINK,selected:!r(),panel:f,getContent:h}];m(e),t.appendChild(l.createTabs(g));let{modal:b,setOkHandler:y,close:M}=i.createModal(a.TEXT.EDIT_LINK,t,"400px","500px");return b.style.zIndex=p.STANDARD_Z_INDEX+100+"",u.default.container.appendChild(b),new Promise((t,n)=>{y(()=>o(this,void 0,void 0,function*(){let o="",r=g.find(e=>e.selected);r&&(o=r.getContent()),o&&o!=e?t(o):n(),M()}))})})}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,l)}s((o=o.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(97)),a=n(40);t.setInlineEditor=function(e){return o(this,void 0,void 0,function*(){!function(e){o(this,void 0,void 0,function*(){let t=e.target;i.default.init(e),t instanceof HTMLElement&&t.focus()})}(a.createSettings(e))})}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var r=(a=o,l=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),"/*# ".concat(s," */")),i=o.sources.map(function(e){return"/*# sourceURL=".concat(o.sourceRoot).concat(e," */")});return[n].concat(i).concat([r]).join("\n")}var a,l,s;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(n,"}"):n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];null!=i&&(o[i]=!0)}for(var a=0;a<e.length;a++){var l=e[a];null!=l[0]&&o[l[0]]||(n&&!l[2]?l[2]=n:n&&(l[2]="(".concat(l[2],") and (").concat(n,")")),t.push(l))}},t}},function(e,t,n){var o,r,i={},a=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=o.apply(this,arguments)),r}),l=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var o=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,n);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}t[e]=o}return t[e]}}(),s=null,c=0,d=[],u=n(47);function p(e,t){for(var n=0;n<e.length;n++){var o=e[n],r=i[o.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](o.parts[a]);for(;a<o.parts.length;a++)r.parts.push(y(o.parts[a],t))}else{var l=[];for(a=0;a<o.parts.length;a++)l.push(y(o.parts[a],t));i[o.id]={id:o.id,refs:1,parts:l}}}}function f(e,t){for(var n=[],o={},r=0;r<e.length;r++){var i=e[r],a=t.base?i[0]+t.base:i[0],l={css:i[1],media:i[2],sourceMap:i[3]};o[a]?o[a].parts.push(l):n.push(o[a]={id:a,parts:[l]})}return n}function h(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=d[d.length-1];if("top"===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),d.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=l(e.insertAt.before,n);n.insertBefore(t,r)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=d.indexOf(e);t>=0&&d.splice(t,1)}function g(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var o=function(){0;return n.nc}();o&&(e.attrs.nonce=o)}return b(t,e.attrs),h(e,t),t}function b(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function y(e,t){var n,o,r,i;if(t.transform&&e.css){if(!(i="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=i}if(t.singleton){var a=c++;n=s||(s=g(t)),o=v.bind(null,n,a,!1),r=v.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",b(t,e.attrs),h(e,t),t}(t),o=function(e,t,n){var o=n.css,r=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||i)&&(o=u(o));r&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([o],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(a),l&&URL.revokeObjectURL(l)}.bind(null,n,t),r=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=g(t),o=function(e,t){var n=t.css,o=t.media;o&&e.setAttribute("media",o);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),r=function(){m(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return p(n,t),function(e){for(var o=[],r=0;r<n.length;r++){var a=n[r];(l=i[a.id]).refs--,o.push(l)}e&&p(f(e,t),t);for(r=0;r<o.length;r++){var l;if(0===(l=o[r]).refs){for(var s=0;s<l.parts.length;s++)l.parts[s]();delete i[l.id]}}}};var M,_=(M=[],function(e,t){return M[e]=t,M.filter(Boolean).join("\n")});function v(e,t,n,o){var r=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=_(t,r);else{var i=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(18);t.OperationEventArgs=class{constructor(e,t){this.operationCount=0,this.backupOperationCount=0,this.operationCount=e,this.backupOperationCount=t}get canSave(){return this.operationCount>0}};t.OperationEvent=class extends o.BaseEvent{}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(18),i=o(n(0));t.HoverDomEventArgs=class{constructor(e,t){this.element=e,this.closeElement=t}};t.HoverDomEvent=class extends r.BaseEvent{emit(e){i.default.lastHoverDomEventArgs=e,super.emit(e)}}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iIzhhOGE4YSIgZD0iTTc2OCA0NjkuMzMzMzMzVjM0MS4zMzMzMzNsMTcwLjY2NjY2NyAxNzAuNjY2NjY3LTE3MC42NjY2NjcgMTcwLjY2NjY2N3YtMTI4aC0yMTMuMzMzMzMzdjIxMy4zMzMzMzNoMTI4bC0xNzAuNjY2NjY3IDE3MC42NjY2NjctMTcwLjY2NjY2Ny0xNzAuNjY2NjY3aDEyOHYtMjEzLjMzMzMzM0gyNTZ2MTI4bC0xNzAuNjY2NjY3LTE3MC42NjY2NjcgMTcwLjY2NjY2Ny0xNzAuNjY2NjY3djEyOGgyMTMuMzMzMzMzVjI1NkgzNDEuMzMzMzMzbDE3MC42NjY2NjctMTcwLjY2NjY2NyAxNzAuNjY2NjY3IDE3MC42NjY2NjdoLTEyOHYyMTMuMzMzMzMzeiIgLz48L3N2Zz4="},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2);t.createNotice=function(){let e=o.createDiv();e.classList.add("kb_web_editor_action_bar_notice");let t=e;return t.setCount=e=>{t.innerHTML=e+"",t.style.visibility=e>0?"visible":"hidden"},t}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(11),i=n(1),a=n(10),l=n(2),s=n(24),c=o(n(0)),d=n(25),u=n(4);t.createImagePicker=function(e){let t=l.createDiv(),n=d.getCssRules(),o=u.getImportant(e,"width",n),p=u.getImportant(e,"height",n),{imagePreview:f,setImage:h}=s.createImagePreview();f.appendChild(s.createPickShade()),f.style.margin="8px auto 16px auto";let m=JSON.parse(JSON.stringify(getComputedStyle(e)));m.width="0px"==m.width?"auto":m.width,m.height="0px"==m.height?"auto":m.height,h(e.src),f.onclick=()=>{a.pickImg(t=>{h(t),e.src=t,e.style.setProperty("width",m.width,o),e.style.setProperty("height",m.height,p)})},t.appendChild(f);let g=l.createLabelInput(i.TEXT.ALT);g.setContent(e.alt),t.appendChild(g.input),g.setInputHandler(t=>{t.target instanceof HTMLInputElement&&(e.alt=t.target.value)});let b=l.createLabelInput(i.TEXT.TITLE);b.setContent(e.title),t.appendChild(b.input),b.setInputHandler(t=>{t.target instanceof HTMLInputElement&&(e.title=t.target.value)});let y=l.createLabelInput(i.TEXT.WIDTH);y.input.style.width="50%",y.setInputHandler(t=>{t.target instanceof HTMLInputElement&&(e.style.setProperty("width",t.target.value,o),m.width=t.target.value)}),y.setContent(m.width),t.appendChild(y.input);let M=l.createLabelInput(i.TEXT.HEIGHT);M.input.style.width="50%",M.setInputHandler(t=>{t.target instanceof HTMLInputElement&&(e.style.setProperty("height",t.target.value,p),m.height=t.target.value)}),M.setContent(m.height),t.appendChild(M.input);const{modal:_,setOkHandler:v,setCancelHandler:T,close:w}=r.createModal(i.TEXT.EDIT_IMAGE,t,"450px");return c.default.container.appendChild(_),new Promise((e,t)=>{v(()=>{e(),w()}),T(()=>{t(),w()})})}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=n(14),a=n(2),l=o(n(0));t.createLinkItem=function(e,t){let n=a.createDiv();n.classList.add("kb_web_editor_global_link_editor_item"),n.onmouseover=()=>{l.default.lastMouseEventArg=new MouseEvent(""),e.scrollIntoView(),i.emitHoverEvent(e),i.emitSelectedEvent()};let o=a.createDiv();o.innerText=e.getAttribute("href");let s=a.createButton(r.TEXT.EDIT);return s.onclick=t,n.appendChild(o),n.appendChild(s),{item:n,setLabel:e=>o.innerText=e}}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,l)}s((o=o.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(0)),a=n(98),l=n(30),s=n(10);function c(e){let t={target:e,inline:!0,hidden_input:!1,skin_url:`${location.origin}\\_Admin\\Styles\\kooboo-web-editor\\tinymce\\ui\\oxide`,menubar:!1,element_format:"html",allow_script_urls:!0,style_formats_merge:!1,style_formats_autohide:!1,allow_conditional_comments:!0,allow_html_in_named_anchor:!0,allow_unsafe_link_target:!0,convert_fonts_to_spans:!1,remove_trailing_brs:!0,browser_spellcheck:!0,forced_root_block:"",visual_anchor_class:"no-anchor",valid_elements:"*[*]",valid_children:"*[*]",plugins:["link","image"],valid_styles:"width,height,color,font-size,font-family,background,background-color,background-image,font-weight,font-style,text-decoration,float,margin,margin-top,margin-right,margin-bottom,margin-left,display,text-align",file_picker_callback(e,t,n){return o(this,void 0,void 0,function*(){if("image"==n.filetype)s.pickImg(t=>{e(t,{})});else try{let n=yield l.createLinkPicker(t);e(n,{})}catch(e){}})}};return e._position=e.style.position,a.setLang(t),t}function d(e,t){t.innerHTML=e.innerHTML,a.clearTinymceElements(t)}t.createSettings=function(e){const{selector:t,onSave:n,onCancel:o}=e,r=c(t);return r.toolbar=a.getToolbar(t),r.plugins=["save","link","image"],r.init_instance_callback=a.initInstanceCallback,r.setup=e=>{e.on("Blur",a.onBlur),e.once("SetContent",a.onSetContent),e.on("Change",()=>i.default.tinymceInputEvent.emit()),e.on("KeyUp",()=>i.default.tinymceInputEvent.emit()),e.on("KeyDown",a.onKeyDown),e.on("BeforeSetContent",a.onBeforeSetContent)},r.save_enablewhendirty=!1,r.save_onsavecallback=e=>a.savePluginCallback(e,n),r.save_oncancelcallback=e=>a.savePluginCallback(e,o),r},t.createEditDataSettings=function(e,t){const n=c(e);return n.toolbar="undo redo | bold italic underline | forecolor backcolor | fontselect fontsizeselect | image | link unlink",n.plugins=["link","image"],n.setup=n=>{n.once("SetContent",a.onSetContent),n.on("KeyDown",a.onKeyDown),n.on("BeforeSetContent",a.onBeforeSetContent),n.on("Change",()=>d(e,t)),n.on("Undo",()=>d(e,t)),n.on("Redo",()=>d(e,t))},n}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=o(n(110)),a=n(1),l=n(2),s=o(n(114)),c=o(n(0));t.createColorPicker=function(e,t,n){t=i.default.to.hex(i.default.get(t).value);let o=l.createDiv();o.classList.add("kb_web_editor_color_picker");let d=l.createDiv();d.innerText=e,o.appendChild(d);let u=l.createDiv();return o.appendChild(u),setTimeout(()=>{const e=new s.default({el:u,theme:"nano",default:t,autoReposition:!1,components:{preview:!0,opacity:!0,hue:!0,interaction:{cancel:!0,save:!0}},strings:{save:a.TEXT.OK,cancel:a.TEXT.CANCEL}});e.on("init",e=>{let t=e._root.app,n=e._root.button;t.style.zIndex=r.STANDARD_Z_INDEX+5+"",c.default.container.appendChild(t),n.style.border="1px solid #ccc"}),e.on("save",e=>{n(e.toRGBA().toString(0))})}),o}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iI2ZmZmZmZiIgZD0iTTU4Ny43MzI4NDUgNTExLjcwNTI4OGwwLjU2Mzg0MiAwLjU2Mzg0Mi03NS42MDkwMjUgNzUuNTA3NzE4LTAuNTEyNjc2LTAuNTEyNjc2TDE3MS44MzE1MyA5MjcuNjAzNTMzYy0yMC45MDkyMTYgMjAuOTEyMjg1LTU0Ljc3NDUxMSAyMC45NDcwNzgtNzUuNjM4NzAxIDAuMDgyODg4LTIwLjg2NjIzNy0yMC44NjYyMzctMjAuODI5Mzk4LTU0LjczMjU1NSAwLjA3OTgxOC03NS42NDE3NzFsMzQwLjMzOTM2Mi0zNDAuMzM5MzYyTDk2Ljg2MzA5NSAxNzEuOTUzMzA0Yy0yMC45MDkyMTYtMjAuOTA5MjE2LTIwLjk0NzA3OC01NC43NzQ1MTEtMC4wNzk4MTgtNzUuNjM4NzAxIDIwLjg2NDE5LTIwLjg2NjIzNyA1NC43Mjk0ODUtMjAuODI5Mzk4IDc1LjYzODcwMSAwLjA3OTgxOEw1MTIuMTczOTYyIDQzNi4xNDY0MDUgODUxLjU3NTk3NSA5Ni43NDIzNDVjMjAuOTEyMjg1LTIwLjkwOTIxNiA1NC43NzQ1MTEtMjAuOTQ3MDc4IDc1LjY0MTc3MS0wLjA3OTgxOCAyMC44NjQxOSAyMC44NjQxOSAyMC44MjkzOTggNTQuNzI5NDg1LTAuMDc5ODE4IDc1LjYzODcwMUw1ODcuNzMyODQ1IDUxMS43MDUyODh6TTY1OC45NTQ5NTcgNjAwLjY2OTQ4MmMxMi4yMjc0ODYgMS4xMTk0OTcgMjIuOTU3ODc1IDYuNDI0MzE2IDMxLjMwNjAwNyAxNC4xNzk5NTRsMC4zMTAwNjItMC4zMDY5OTIgMjM3LjE1NTMwNSAyMzcuMTU2MzI4YzIwLjkwOTIxNiAyMC45MTIyODUgMjAuOTQ0MDA4IDU0Ljc3NDUxMSAwLjA3OTgxOCA3NS42NDE3NzEtMjAuODY2MjM3IDIwLjg2NDE5LTU0LjcyOTQ4NSAyMC44MjkzOTgtNzUuNjQxNzcxLTAuMDc5ODE4TDYxNC45NTk5NTMgNjkwLjA1MDE2MmwwLjAzNDc5Mi0wLjAzNDc5MmMtOS45MTA3MjEtMTAuNzI4MzQyLTE1LjU1MzIzMS0yNS4zMTk2NjUtMTQuMTE1NDg2LTQxLjAxMjA2NkM2MDMuNTY4NTA5IDYxOS42MjAwOSA2MjkuNTY5Njk2IDU5Ny45NzkyMSA2NTguOTU0OTU3IDYwMC42Njk0ODJ6IiAvPjwvc3ZnPg=="},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updatePositon=(e,t)=>{const{top:n,left:o,height:r,width:i,bottom:a,right:l}=e;null!=n&&(t.style.top=n+"px"),null!=o&&(t.style.left=o+"px"),null!=a&&(t.style.bottom=a+"px"),null!=l&&(t.style.right=l+"px"),null!=i&&(t.style.width=i+"px"),null!=r&&(t.style.height=r+"px")}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(45),n(48);const r=n(50),i=n(92),a=n(137),l=n(140),s=n(14),c=n(19),d=n(10),u=n(143),p=o(n(0)),f=n(4);f.shareStyle(d.parentBody),f.shareStyle(p.default.container),c.initElements(),p.default.container.appendChild(a.createHoverBorder()),p.default.container.appendChild(a.createSelectedBorder()),p.default.container.appendChild(i.createFloatMenu()),p.default.container.appendChild(l.createEditorShade()),p.default.container.appendChild(r.createActionBar()),p.default.container.appendChild(u.createElementNav()),document.body&&s.emitHoverEvent(document.body)},function(e,t,n){var o=n(46);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(33)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(32)(!1)).push([e.i,'/* kb_web_editor */\r\n.kb_web_editor_div {\r\n  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;\r\n  font-size: 14px;\r\n  color: #5f5f5f;\r\n  border: none;\r\n  outline: none;\r\n  display: block;\r\n  position: static;\r\n  background-color: rgba(255, 255, 255, 0);\r\n  font-weight: 400;\r\n  line-height: 1.2;\r\n}\r\n\r\n.kb_web_editor_input {\r\n  border-radius: 3px;\r\n  line-height: 24px;\r\n  padding: 5px 4.75px;\r\n  color: #5f5f5f;\r\n  border: 1px solid #ccc;\r\n  font-size: 16px;\r\n  box-sizing: border-box;\r\n  height: 36px;\r\n  box-shadow: none;\r\n  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;\r\n}\r\n\r\n.kb_web_editor_label_input {\r\n  display: inline-block;\r\n  width: 100%;\r\n  height: 36px;\r\n  position: relative;\r\n  margin: 3px 0;\r\n}\r\n\r\n.kb_web_editor_label_input > .kb_web_editor_div:nth-child(1) {\r\n  display: inline-block;\r\n  position: absolute;\r\n  left: 0;\r\n  line-height: 36px;\r\n  text-align: right;\r\n  padding-right: 5px;\r\n  width: 80px;\r\n}\r\n\r\n.kb_web_editor_label_input > .kb_web_editor_div:nth-child(2) {\r\n  display: inline-block;\r\n  position: absolute;\r\n  left: 85px;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n}\r\n\r\n.kb_web_editor_label_input > .kb_web_editor_div:nth-child(2) > input {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.kb_web_editor_btn {\r\n  font-weight: 700;\r\n  border-radius: 3px;\r\n  font-size: 14px;\r\n  line-height: 24px;\r\n  margin: 4px;\r\n  padding: 4px 16px;\r\n  outline: none;\r\n  background-color: #f0f0f0;\r\n  border: none;\r\n  display: inline-flex;\r\n  cursor: pointer;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.kb_web_editor_radio_input {\r\n  width: 100%;\r\n  line-height: 24px;\r\n  padding: 5px 4.75px;\r\n  font-size: 16px;\r\n  word-wrap: break-word;\r\n  display: flex;\r\n  margin: 0;\r\n  cursor: pointer;\r\n  border-bottom: 1px rgb(238, 238, 238) solid;\r\n}\r\n\r\n.kb_web_editor_radio_input:hover {\r\n  background-color: #e3e3e3;\r\n}\r\n\r\n.kb_web_editor_radio_input > .kb_web_editor_div {\r\n  line-height: 36px;\r\n  font-size: 16px;\r\n  display: inline-block;\r\n}\r\n\r\n.kb_web_editor_radio_input > input {\r\n  margin: 0 5px;\r\n  pointer-events: none;\r\n  position: static;\r\n  opacity: 1;\r\n}\r\n\r\n.kb_web_editor_btn:hover {\r\n  background-color: #e3e3e3;\r\n}\r\n\r\n.kb_web_editor_btn_primary {\r\n  background-color: #207ab7;\r\n  color: #fff;\r\n}\r\n\r\n.kb_web_editor_btn_primary:hover {\r\n  background-color: #1c6ca1;\r\n}\r\n\r\n.kb_action_bar_btn {\r\n  height: 60px;\r\n  width: 60px;\r\n  border-radius: 50%;\r\n  background-color: #fff;\r\n  opacity: 0.9;\r\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);\r\n  position: relative;\r\n  margin-bottom: 10px;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  background-size: 30px 30px;\r\n}\r\n\r\n.kb_action_bar_btn:hover {\r\n  background-color: #eee;\r\n}\r\n\r\n.kb_web_editor_menu {\r\n  position: absolute;\r\n  width: 150px;\r\n  min-height: 50px;\r\n  border-radius: 3px;\r\n  font-size: 12px;\r\n  opacity: 0.9;\r\n  overflow: hidden;\r\n  box-shadow: 0 0 3px #ddd;\r\n  background-color: #fff;\r\n  display: none;\r\n}\r\n\r\n.kb_web_editor_menu_title {\r\n  padding: 5px 10px;\r\n  color: #fff;\r\n  background-color: rgb(2, 154, 214);\r\n  line-height: 18px;\r\n}\r\n\r\n.kb_web_editor_menu_title > .kb_web_editor_div {\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  background-size: contain;\r\n  height: 18px;\r\n  width: 18px;\r\n  float: right;\r\n  margin-left: 8px;\r\n}\r\n\r\n.kb_web_editor_menu_item {\r\n  padding: 5px 10px;\r\n  border-bottom: 1px solid #eee;\r\n  cursor: default;\r\n  font-size: 12px;\r\n}\r\n\r\n.kb_web_editor_menu_item:hover {\r\n  background-color: #eee;\r\n}\r\n\r\n.kb_web_editor_iframe {\r\n  width: 100%;\r\n  height: 100%;\r\n  border: none;\r\n}\r\n\r\n.kb_web_editor_image_preview {\r\n  outline: 5px solid #eee;\r\n  margin: 5px;\r\n  height: 300px;\r\n  width: 400px;\r\n  position: relative;\r\n}\r\n\r\n.kb_web_editor_image_preview > :nth-child(1) {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  background-size: contain;\r\n  cursor: pointer;\r\n}\r\n\r\n.kb_web_editor_image_preview > .kb_web_editor_btn {\r\n  position: absolute;\r\n  bottom: 0;\r\n  right: 0;\r\n  opacity: 0.8;\r\n  background-color: #eee;\r\n  border-radius: 24px;\r\n}\r\n\r\n.kb_web_editor_image_preview > .kb_web_editor_btn :hover {\r\n  background-color: #fff;\r\n}\r\n\r\n.kb_web_editor_pick_shade {\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background-color: rgba(0, 0, 0, 0.384);\r\n  opacity: 0;\r\n  transition: .3s;\r\n  font-size: 30px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  color: white;\r\n}\r\n.kb_web_editor_pick_shade:hover {\r\n  opacity: 0.8;\r\n  cursor: pointer;\r\n}\r\n\r\n.kb_web_editor_modal {\r\n  background-color: rgba(255, 255, 255, 0.3);\r\n  position: fixed;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  overflow-y: auto;\r\n}\r\n\r\n.kb_web_editor_modal_window {\r\n  background-color: #fff;\r\n  border: 1px solid #eee;\r\n  border-radius: 3px;\r\n  box-shadow: 0 0 10px 1px rgba(34, 47, 62, 0.15);\r\n  width: 60%;\r\n  position: relative;\r\n  margin: 40px auto;\r\n}\r\n\r\n.kb_web_editor_modal_body {\r\n  padding: 3px 16px;\r\n  max-height: 80%;\r\n  overflow: auto;\r\n}\r\n\r\n.kb_web_editor_modal_footer {\r\n  border-top: 1px solid #eee;\r\n  text-align: right;\r\n  padding: 15px 25px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.kb_web_editor_modal_header {\r\n  font-size: 20px;\r\n  font-weight: 400;\r\n  line-height: 1.3;\r\n  font-style: normal;\r\n  padding: 25px 25px 15px 25px;\r\n  cursor: move;\r\n  position: relative;\r\n}\r\n.kb_web_editor_modal_header > .kb_web_editor_div {\r\n  position: absolute;\r\n  background-repeat: no-repeat;\r\n  right: 15px;\r\n  top: 15px;\r\n  height: 20px;\r\n  width: 20px;\r\n  border-radius: 10px;\r\n  cursor: pointer;\r\n}\r\n\r\n.kb_web_editor_global_link_editor_item {\r\n  border-bottom: 1px solid #eee;\r\n  position: relative;\r\n}\r\n\r\n.kb_web_editor_global_link_editor_item > .kb_web_editor_div {\r\n  word-break: break-all;\r\n  font-size: 16px;\r\n  line-height: 40px;\r\n  min-height: 40px;\r\n  padding-right: 80px;\r\n}\r\n\r\n.kb_web_editor_global_link_editor_item > .kb_web_editor_btn {\r\n  border-radius: 24px;\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n}\r\n\r\n.kb_web_editor_element_nav_bar {\r\n  position: fixed;\r\n  display: inline;\r\n  top: 10px;\r\n  right: 25px;\r\n  background-color: #5f5f5f;\r\n  color: #fff;\r\n  opacity: 0.7;\r\n  padding: 5px;\r\n  border-radius: 5px;\r\n  display: none;\r\n  cursor: move;\r\n}\r\n\r\n.kb_web_editor_element_nav_bar > .kb_web_editor_div {\r\n  color: #fff;\r\n  display: inline-block;\r\n  padding: 0 5px;\r\n  cursor: pointer;\r\n  border-radius: 5px;\r\n}\r\n\r\n.kb_web_editor_action_bar_notice {\r\n  background-color: red;\r\n  width: 20px;\r\n  height: 20px;\r\n  border-radius: 10px;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  color: #fff;\r\n  font-size: 15px;\r\n  text-align: center;\r\n  line-height: 20px;\r\n  opacity: 0.8;\r\n  visibility: hidden;\r\n}\r\n\r\n.kb_web_editor_shade_close_btn {\r\n  position: fixed;\r\n  top: 25px;\r\n  right: 25px;\r\n  height: 30px;\r\n  width: 30px;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  background-size: contain;\r\n  display: none;\r\n}\r\n\r\n.kb_web_editor_checkobx_input {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.kb_web_editor_color_picker {\r\n  display: inline-flex;\r\n  align-items: center;\r\n}\r\n.kb_web_editor_color_picker > * {\r\n  padding-right: 5px;\r\n}\r\n\r\n.kb_web_editor_coloreditor_item {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  padding: 10px 20px;\r\n}\r\n\r\n.kb_web_editor_coloreditor_item_check {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 25%;\r\n}\r\n\r\n.kb_web_editor_coloreditor_item_check > * {\r\n  margin: 0px;\r\n}\r\n\r\n.kb_web_editor_edit_data_item {\r\n  border-top: 1px solid #eee;\r\n  min-height: 50px;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 30px;\r\n  position: relative;\r\n}\r\n\r\n.kb_web_editor_edit_data_item > .kb_web_editor_div {\r\n  width: 100%;\r\n  padding-right: 30px;\r\n  overflow-x: auto;\r\n  overflow-y: hidden;\r\n}\r\n\r\n.kb_web_editor_edit_data_item > .kb_web_editor_btn {\r\n  width: 15px;\r\n}\r\n\r\n.kb_web_editor_container {\r\n  all: unset !important;\r\n}\r\n\r\n.kb_web_editor_root {\r\n  word-break: break-all;\r\n  font-family: "Times New Roman", Times, serif;\r\n  font-style: normal;\r\n  font-variant: normal;\r\n  line-height: 16px;\r\n}\r\n\r\n.pcr-palette:before ,.pcr-current-color:before{\r\n  opacity: 0.3;\r\n}',""])},function(e,t,n){"use strict";e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,o=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var r,i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(r=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}},function(e,t,n){var o=n(49);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(33)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(32)(!1)).push([e.i,'/*! Pickr 1.2.7 MIT | https://github.com/Simonwep/pickr */.pickr{position:relative;overflow:visible;transform:translateY(0)}.pickr *{box-sizing:border-box}.pickr .pcr-button{position:relative;height:2em;width:2em;padding:.5em;cursor:pointer;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;border-radius:.15em;background:url(\'data:image/svg+xml;utf8, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" stroke="%2342445A" stroke-width="5px" stroke-linecap="round"><path d="M45,45L5,5"></path><path d="M45,5L5,45"></path></svg>\') no-repeat 50%;background-size:0;transition:all .3s}.pickr .pcr-button:before{background:url(\'data:image/svg+xml;utf8, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2"><path fill="white" d="M1,0H2V1H1V0ZM0,1H1V2H0V1Z"/><path fill="gray" d="M0,0H1V1H0V0ZM1,1H2V2H1V1Z"/></svg>\');background-size:.5em;z-index:-1;z-index:auto}.pickr .pcr-button:after,.pickr .pcr-button:before{position:absolute;content:"";top:0;left:0;width:100%;height:100%;border-radius:.15em}.pickr .pcr-button:after{transition:background .3s;background:currentColor}.pickr .pcr-button.clear{background-size:70%}.pickr .pcr-button.clear:before{opacity:0}.pickr .pcr-button.clear:focus{box-shadow:0 0 0 1px #f1f3f4,0 0 0 3px currentColor}.pickr .pcr-button.disabled{cursor:not-allowed}.pcr-app button,.pcr-app input,.pickr button,.pickr input{outline:none;border:none;-webkit-appearance:none}.pcr-app button:focus,.pcr-app input:focus,.pickr button:focus,.pickr input:focus{box-shadow:0 0 0 1px #f1f3f4,0 0 0 3px currentColor}.pcr-app[data-theme=nano]{position:fixed;display:flex;flex-direction:column;z-index:10000;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;box-shadow:0 .15em 1.5em 0 rgba(0,0,0,.1),0 0 1em 0 rgba(0,0,0,.03);width:14.25em;max-width:95vw;border-radius:.1em;background:#fff;opacity:0;visibility:hidden;transition:opacity .3s,visibility 0s .3s;left:0;top:0}.pcr-app[data-theme=nano].visible{transition:opacity .3s;visibility:visible;opacity:1}.pcr-app[data-theme=nano] .pcr-swatches{display:grid;align-items:center;grid-template-columns:repeat(auto-fit,1.75em);margin-top:.6em;padding:0 .6em}.pcr-app[data-theme=nano] .pcr-swatches.pcr-last{margin:0}.pcr-app[data-theme=nano] .pcr-swatches>button{font-size:1em;position:relative;width:calc(1.75em - 5px);height:calc(1.75em - 5px);border-radius:.15em;cursor:pointer;margin:2.5px;transition:all .15s;overflow:hidden;background:transparent;z-index:1}.pcr-app[data-theme=nano] .pcr-swatches>button:before{position:absolute;content:"";top:0;left:0;width:100%;height:100%;background:url(\'data:image/svg+xml;utf8, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2"><path fill="white" d="M1,0H2V1H1V0ZM0,1H1V2H0V1Z"/><path fill="gray" d="M0,0H1V1H0V0ZM1,1H2V2H1V1Z"/></svg>\');background-size:6px;border-radius:.15em;z-index:-1}.pcr-app[data-theme=nano] .pcr-swatches>button:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:currentColor;border:1px solid rgba(0,0,0,.05);border-radius:.15em;box-sizing:border-box}.pcr-app[data-theme=nano] .pcr-swatches>button:hover{filter:brightness(1.05)}.pcr-app[data-theme=nano] .pcr-interaction{display:flex;flex-wrap:wrap;align-items:center;margin:0 -.2em;padding:0 .6em .6em}.pcr-app[data-theme=nano] .pcr-interaction>*{margin:0 .2em}.pcr-app[data-theme=nano] .pcr-interaction input{letter-spacing:.07em;font-size:.75em;text-align:center;cursor:pointer;color:#75797e;background:#f1f3f4;border-radius:.15em;transition:all .15s;padding:.45em .5em;margin-top:.6em}.pcr-app[data-theme=nano] .pcr-interaction input:hover{filter:brightness(.975)}.pcr-app[data-theme=nano] .pcr-interaction input:focus{box-shadow:0 0 0 1px #f1f3f4,0 0 0 3px rgba(66,133,244,.75)}.pcr-app[data-theme=nano] .pcr-interaction .pcr-result{color:#75797e;text-align:left;flex:1 1 8em;min-width:8em;transition:all .2s;border-radius:.15em;background:#f1f3f4;cursor:text}.pcr-app[data-theme=nano] .pcr-interaction .pcr-result::selection{background:#4285f4;color:#fff}.pcr-app[data-theme=nano] .pcr-interaction .pcr-type.active{color:#fff;background:#4285f4}.pcr-app[data-theme=nano] .pcr-interaction .pcr-clear,.pcr-app[data-theme=nano] .pcr-interaction .pcr-save{width:auto;color:#fff}.pcr-app[data-theme=nano] .pcr-interaction .pcr-clear:hover,.pcr-app[data-theme=nano] .pcr-interaction .pcr-save:hover{filter:brightness(.925)}.pcr-app[data-theme=nano] .pcr-interaction .pcr-save{background:#4285f4}.pcr-app[data-theme=nano] .pcr-interaction .pcr-clear{background:#f44250}.pcr-app[data-theme=nano] .pcr-interaction .pcr-clear:focus{box-shadow:0 0 0 1px #f1f3f4,0 0 0 3px rgba(244,66,80,.75)}.pcr-app[data-theme=nano] .pcr-selection{display:grid;grid-gap:.6em;grid-template-columns:1fr 4fr;grid-template-rows:5fr auto auto;align-items:center;height:10.5em;width:100%;align-self:flex-start}.pcr-app[data-theme=nano] .pcr-selection .pcr-picker{position:absolute;height:18px;width:18px;border:2px solid #fff;border-radius:100%;user-select:none}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-preview{grid-area:2/1/4/1;height:100%;width:100%;display:flex;flex-direction:row;justify-content:center;margin-left:.6em}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-preview .pcr-last-color{display:none}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-preview .pcr-current-color{position:relative;background:currentColor;width:2em;height:2em;border-radius:50em;overflow:hidden}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-preview .pcr-current-color:before{position:absolute;content:"";top:0;left:0;width:100%;height:100%;background:url(\'data:image/svg+xml;utf8, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2"><path fill="white" d="M1,0H2V1H1V0ZM0,1H1V2H0V1Z"/><path fill="gray" d="M0,0H1V1H0V0ZM1,1H2V2H1V1Z"/></svg>\');background-size:.5em;border-radius:.15em;z-index:-1}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-chooser,.pcr-app[data-theme=nano] .pcr-selection .pcr-color-opacity,.pcr-app[data-theme=nano] .pcr-selection .pcr-color-palette{position:relative;user-select:none;display:flex;flex-direction:column;cursor:grab;cursor:-moz-grab;cursor:-webkit-grab}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-chooser:active,.pcr-app[data-theme=nano] .pcr-selection .pcr-color-opacity:active,.pcr-app[data-theme=nano] .pcr-selection .pcr-color-palette:active{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-palette{grid-area:1/1/2/3;width:100%;height:100%;z-index:1}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-palette .pcr-palette{border-radius:.15em;width:100%;height:100%}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-palette .pcr-palette:before{position:absolute;content:"";top:0;left:0;width:100%;height:100%;background:url(\'data:image/svg+xml;utf8, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2"><path fill="white" d="M1,0H2V1H1V0ZM0,1H1V2H0V1Z"/><path fill="gray" d="M0,0H1V1H0V0ZM1,1H2V2H1V1Z"/></svg>\');background-size:.5em;border-radius:.15em;z-index:-1}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-chooser{grid-area:2/2/2/2}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-opacity{grid-area:3/2/3/2}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-chooser,.pcr-app[data-theme=nano] .pcr-selection .pcr-color-opacity{height:.5em;margin:0 .6em}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-chooser .pcr-picker,.pcr-app[data-theme=nano] .pcr-selection .pcr-color-opacity .pcr-picker{top:50%;transform:translateY(-50%)}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-chooser .pcr-slider,.pcr-app[data-theme=nano] .pcr-selection .pcr-color-opacity .pcr-slider{flex-grow:1;border-radius:50em}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-chooser .pcr-slider{background:linear-gradient(90deg,red,#ff0,#0f0,#0ff,#00f,#f0f,red)}.pcr-app[data-theme=nano] .pcr-selection .pcr-color-opacity .pcr-slider{background:linear-gradient(90deg,transparent,#000),url(\'data:image/svg+xml;utf8, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2"><path fill="white" d="M1,0H2V1H1V0ZM0,1H1V2H0V1Z"/><path fill="gray" d="M0,0H1V1H0V0ZM1,1H2V2H1V1Z"/></svg>\');background-size:100%,.25em}',""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(51),r=n(61),i=n(62),a=n(65),l=n(68),s=n(72),c=n(87);t.createActionBar=function(){let e=o.createContainer();return e.appendChild(r.createMoveButton(e)),e.appendChild(s.createImageButton()),e.appendChild(c.createLinkButton()),e.appendChild(i.createPreviousButton()),e.appendChild(a.createNextButton()),e.appendChild(l.createSaveButton()),e}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(3),a=o(n(0));t.createContainer=function(){let e=r.createDiv();return e.style.position="fixed",e.style.width="60px",e.style.top="60px",e.style.right="60px",e.style.zIndex=i.STANDARD_Z_INDEX+"",a.default.editableEvent.addEventListener(t=>{e.style.display=t?"none":"block"}),e}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(34),i=o(n(0));t.operationManager=class{constructor(){this.previousRecords=[],this.nextRecords=[],this.idCounter=0}previous(){let e=this.previousRecords.pop();e&&(e.undo(),this.nextRecords.push(e),this.emit())}next(){let e=this.nextRecords.pop();e&&(e.redo(),this.previousRecords.push(e),this.emit())}add(e){return e.id=++this.idCounter,this.previousRecords.push(e),this.nextRecords.splice(0,this.nextRecords.length),this.emit(),e.id}remove(e){let t=this.previousRecords.find(t=>t.id==e);if(!t)return;t.undo();let n=this.previousRecords.indexOf(t);this.previousRecords.splice(n,1),this.emit()}emit(){let e=new r.OperationEventArgs(this.previousRecords.length,this.nextRecords.length);i.default.operationEvent.emit(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(18);t.EditableEvent=class extends o.BaseEvent{}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(18);t.TinymceInputEvent=class extends o.BaseEvent{}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(18);t.CloseEditingEvent=class extends o.BaseEvent{}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(3),r=n(2);t.createContainer=function(e){let t=r.createDiv();t.classList.add("kb_web_editor_modal"),t.style.zIndex=o.STANDARD_Z_INDEX+5+"";let n=r.createDiv();return n.classList.add("kb_web_editor_modal_window"),null!=e&&(n.style.width=e),t.appendChild(n),{shade:t,win:n}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=o(n(58));t.createHeader=function(e,t){var n=r.createDiv();n.classList.add("kb_web_editor_modal_header"),n.appendChild(document.createTextNode(e));let o,a=r.createDiv();return a.style.backgroundImage=`url(${i.default})`,n.appendChild(a),n.draggable=!0,n.ondragstart=e=>{let n=t.getBoundingClientRect();o={x:e.x-n.left,y:e.y-n.top}},n.ondrag=e=>{0!=e.x&&0!=e.y&&(t.style.marginLeft=e.x-o.x+"px",t.style.marginTop=e.y-o.y+"px")},{header:n,close:a}}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwcHgiIGhlaWdodD0iMjAuMDBweCIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGZpbGw9IiNjY2MiIGQ9Ik01ODcuNzMyODQ1IDUxMS43MDUyODhsMC41NjM4NDIgMC41NjM4NDItNzUuNjA5MDI1IDc1LjUwNzcxOC0wLjUxMjY3Ni0wLjUxMjY3NkwxNzEuODMxNTMgOTI3LjYwMzUzM2MtMjAuOTA5MjE2IDIwLjkxMjI4NS01NC43NzQ1MTEgMjAuOTQ3MDc4LTc1LjYzODcwMSAwLjA4Mjg4OC0yMC44NjYyMzctMjAuODY2MjM3LTIwLjgyOTM5OC01NC43MzI1NTUgMC4wNzk4MTgtNzUuNjQxNzcxbDM0MC4zMzkzNjItMzQwLjMzOTM2Mkw5Ni44NjMwOTUgMTcxLjk1MzMwNGMtMjAuOTA5MjE2LTIwLjkwOTIxNi0yMC45NDcwNzgtNTQuNzc0NTExLTAuMDc5ODE4LTc1LjYzODcwMSAyMC44NjQxOS0yMC44NjYyMzcgNTQuNzI5NDg1LTIwLjgyOTM5OCA3NS42Mzg3MDEgMC4wNzk4MThMNTEyLjE3Mzk2MiA0MzYuMTQ2NDA1IDg1MS41NzU5NzUgOTYuNzQyMzQ1YzIwLjkxMjI4NS0yMC45MDkyMTYgNTQuNzc0NTExLTIwLjk0NzA3OCA3NS42NDE3NzEtMC4wNzk4MTggMjAuODY0MTkgMjAuODY0MTkgMjAuODI5Mzk4IDU0LjcyOTQ4NS0wLjA3OTgxOCA3NS42Mzg3MDFMNTg3LjczMjg0NSA1MTEuNzA1Mjg4ek02NTguOTU0OTU3IDYwMC42Njk0ODJjMTIuMjI3NDg2IDEuMTE5NDk3IDIyLjk1Nzg3NSA2LjQyNDMxNiAzMS4zMDYwMDcgMTQuMTc5OTU0bDAuMzEwMDYyLTAuMzA2OTkyIDIzNy4xNTUzMDUgMjM3LjE1NjMyOGMyMC45MDkyMTYgMjAuOTEyMjg1IDIwLjk0NDAwOCA1NC43NzQ1MTEgMC4wNzk4MTggNzUuNjQxNzcxLTIwLjg2NjIzNyAyMC44NjQxOS01NC43Mjk0ODUgMjAuODI5Mzk4LTc1LjY0MTc3MS0wLjA3OTgxOEw2MTQuOTU5OTUzIDY5MC4wNTAxNjJsMC4wMzQ3OTItMC4wMzQ3OTJjLTkuOTEwNzIxLTEwLjcyODM0Mi0xNS41NTMyMzEtMjUuMzE5NjY1LTE0LjExNTQ4Ni00MS4wMTIwNjZDNjAzLjU2ODUwOSA2MTkuNjIwMDkgNjI5LjU2OTY5NiA1OTcuOTc5MjEgNjU4Ljk1NDk1NyA2MDAuNjY5NDgyeiIgLz48L3N2Zz4="},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),r=n(2);t.createFooter=function(){let e=r.createDiv();e.classList.add("kb_web_editor_modal_footer");let t=r.createPrimaryButton(o.TEXT.OK),n=r.createButton(o.TEXT.CANCEL);return e.appendChild(t),e.appendChild(n),{footer:e,ok:t,cancel:n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2);t.createBody=function(e){let t=o.createDiv();return t.classList.add("kb_web_editor_modal_body"),null!=e&&(t.style.maxHeight=e),[t,e=>{e instanceof HTMLElement?t.appendChild(e):t.innerHTML=e}]}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(20),i=o(n(36)),a=n(1);t.createMoveButton=function(e){var t=r.createButton(i.default,a.TEXT.MOVE);return t.draggable=!0,t.style.cursor="move",t.ondrag=t=>{0!=t.x&&0!=t.y&&(e.style.top=t.y-25+"px",e.style.left=t.x-25+"px")},t}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(20),i=o(n(63)),a=o(n(64)),l=n(37),s=o(n(0)),c=n(1);t.createPreviousButton=function(){var e=r.createButton(i.default,c.TEXT.PREVIOUS);e.onclick=()=>s.default.operationManager.previous();var t=l.createNotice();return e.appendChild(t),s.default.operationEvent.addEventListener(n=>{t.setCount(n.operationCount),e.changeIcon(n.operationCount>0?a.default:i.default)}),e}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iIzhhOGE4YSIgZD0iTTk5NS42NDggNDU5LjI5NkM2ODQuNDQ4IDI4MS41NjggNDA2LjA4IDMxOC42NTYgMTcxLjIzMiA1NjcuOTA0TDMyIDQxNnYzODRoMzUybC0xNjAuNzM2LTE3NS4zMjhjMjExLjE2OC0yMjcuMDcyIDQ1Mi4xOTItMjU5Ljc3NiA3MzQuMzA0LTk4LjY4OGEzOC40IDM4LjQgMCAwIDAgMzguMDgtNjYuNjg4eiIgLz48L3N2Zz4="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iIzFmYjVmNiIgZD0iTTk5NS42NDggNDU5LjI5NkM2ODQuNDQ4IDI4MS41NjggNDA2LjA4IDMxOC42NTYgMTcxLjIzMiA1NjcuOTA0TDMyIDQxNnYzODRoMzUybC0xNjAuNzM2LTE3NS4zMjhjMjExLjE2OC0yMjcuMDcyIDQ1Mi4xOTItMjU5Ljc3NiA3MzQuMzA0LTk4LjY4OGEzOC40IDM4LjQgMCAwIDAgMzguMDgtNjYuNjg4eiIgLz48L3N2Zz4="},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(20),i=o(n(66)),a=o(n(67)),l=n(37),s=o(n(0)),c=n(1);t.createNextButton=function(){var e=r.createButton(i.default,c.TEXT.NEXT);e.onclick=()=>s.default.operationManager.next();var t=l.createNotice();return e.appendChild(t),s.default.operationEvent.addEventListener(n=>{t.setCount(n.backupOperationCount),e.changeIcon(n.backupOperationCount>0?a.default:i.default)}),e}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iIzhhOGE4YSIgZD0iTTg2MC45OTIgNTU4LjkxMkM2MjcuOTA0IDMxNy41MzYgMzUyLjM4NCAyODMuNjQ4IDQ0LjggNDU5LjI5NmEzOC40IDM4LjQgMCAxIDAgMzguMDggNjYuNjg4YzI3OC40MzItMTU5LjAwOCA1MTYuODk2LTEyOS40MDggNzI2LjA4IDg5LjY5Nkw2NDAgODAwaDM1MlY0MTZsLTEzMS4wMDggMTQyLjkxMnoiIC8+PC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iIzFmYjVmNiIgZD0iTTg2MC45OTIgNTU4LjkxMkM2MjcuOTA0IDMxNy41MzYgMzUyLjM4NCAyODMuNjQ4IDQ0LjggNDU5LjI5NmEzOC40IDM4LjQgMCAxIDAgMzguMDggNjYuNjg4YzI3OC40MzItMTU5LjAwOCA1MTYuODk2LTEyOS40MDggNzI2LjA4IDg5LjY5Nkw2NDAgODAwaDM1MlY0MTZsLTEzMS4wMDggMTQyLjkxMnoiIC8+PC9zdmc+"},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,l)}s((o=o.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(69)),a=r(n(70)),l=n(20),s=r(n(0)),c=r(n(71)),d=n(4),u=n(1);t.createSaveButton=function(){var e=l.createButton(i.default,u.TEXT.SAVE);return s.default.operationEvent.addEventListener(t=>{e.changeIcon(t.operationCount>0?a.default:i.default)}),e.onclick=()=>o(this,void 0,void 0,function*(){let e=[];for(const t of s.default.operationManager.previousRecords)e.push(...t.logs);if(0!=e.length)try{yield c.default(e),d.reload()}catch(e){alert("save error!")}}),e}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iIzhhOGE4YSIgZD0iTTkyNS4yNDggMzU2LjkyOGwtMjU4LjE3Ni0yNTguMTc2YTY0IDY0IDAgMCAwLTQ1LjI0OC0xOC43NTJIMTQ0YTY0IDY0IDAgMCAwLTY0IDY0djczNmE2NCA2NCAwIDAgMCA2NCA2NGg3MzZhNjQgNjQgMCAwIDAgNjQtNjRWNDAyLjE3NmE2NCA2NCAwIDAgMC0xOC43NTItNDUuMjQ4ek0yODggMTQ0aDE5MlYyNTZIMjg4VjE0NHogbTQ0OCA3MzZIMjg4VjczNmg0NDh2MTQ0eiBtMTQ0IDBIODAwVjcwNGEzMiAzMiAwIDAgMC0zMi0zMkgyNTZhMzIgMzIgMCAwIDAtMzIgMzJ2MTc2SDE0NHYtNzM2SDIyNFYyODhhMzIgMzIgMCAwIDAgMzIgMzJoMjU2YTMyIDMyIDAgMCAwIDMyLTMyVjE0NGg3Ny44MjRsMjU4LjE3NiAyNTguMTc2Vjg4MHoiIC8+PC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iIzFmYjVmNiIgZD0iTTkyNS4yNDggMzU2LjkyOGwtMjU4LjE3Ni0yNTguMTc2YTY0IDY0IDAgMCAwLTQ1LjI0OC0xOC43NTJIMTQ0YTY0IDY0IDAgMCAwLTY0IDY0djczNmE2NCA2NCAwIDAgMCA2NCA2NGg3MzZhNjQgNjQgMCAwIDAgNjQtNjRWNDAyLjE3NmE2NCA2NCAwIDAgMC0xOC43NTItNDUuMjQ4ek0yODggMTQ0aDE5MlYyNTZIMjg4VjE0NHogbTQ0OCA3MzZIMjg4VjczNmg0NDh2MTQ0eiBtMTQ0IDBIODAwVjcwNGEzMiAzMiAwIDAgMC0zMi0zMkgyNTZhMzIgMzIgMCAwIDAtMzIgMzJ2MTc2SDE0NHYtNzM2SDIyNFYyODhhMzIgMzIgMCAwIDAgMzIgMzJoMjU2YTMyIDMyIDAgMCAwIDMyLTMyVjE0NGg3Ny44MjRsMjU4LjE3NiAyNTguMTc2Vjg4MHoiIC8+PC9zdmc+"},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,l)}s((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const r=n(5),i=n(10);t.default=e=>o(this,void 0,void 0,function*(){let t=r.getPageId();yield i.Update(JSON.stringify({pageId:t,updates:e}))})},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(20),i=o(n(73)),a=n(1),l=n(74);t.createImageButton=function(){var e=r.createButton(i.default,a.TEXT.EDIT_IMAGES);return e.onclick=l.createGlobalImageEditor,e}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iIzFmYjVmNiIgZD0iTTkyOCA4OTZIOTZhMzIgMzIgMCAwIDEtMzItMzJWMTYwYTMyIDMyIDAgMCAxIDMyLTMyaDgzMmEzMiAzMiAwIDAgMSAzMiAzMnYxMTYuODY0YTMyIDMyIDAgMSAxLTY0IDBWMTkySDEyOHY2NDBoNzY4VjQ2OC41NDRsLTIwNi4zMzYgMjQ0LjczNmEzMS45NjggMzEuOTY4IDAgMCAxLTQ0Ljg5NiA0bC0xOTYuMDY0LTE2Mi43NTItMTk0LjY1NiAxODAuMjI0YTMxLjkzNiAzMS45MzYgMCAxIDEtNDMuNDU2LTQ2Ljk0NGwyMTUuMjMyLTE5OS4yOTZhMzIuMDMyIDMyLjAzMiAwIDAgMSA0Mi4xNzYtMS4xNTJsMTkzLjIxNiAxNjAuMzg0IDI0Mi4zMzYtMjg3LjQ1NmEzMi4xMjggMzIuMTI4IDAgMCAxIDM1LjQyNC05LjQ0YzEyLjYwOCA0LjYwOCAyMS4wMjQgMTYuNjQgMjEuMDI0IDMwLjA4Vjg2NGEzMiAzMiAwIDAgMS0zMiAzMnpNMzA0IDQ4MEMyNDIuMjQgNDgwIDE5MiA0MjkuNzYgMTkyIDM2OFMyNDIuMjQgMjU2IDMwNCAyNTYgNDE2IDMwNi4yNCA0MTYgMzY4IDM2NS43NiA0ODAgMzA0IDQ4MHogbTAtMTYwYy0yNi40NjQgMC00OCAyMS41MzYtNDggNDhTMjc3LjUzNiA0MTYgMzA0IDQxNnM0OC0yMS41MzYgNDgtNDgtMjEuNTM2LTQ4LTQ4LTQ4eiIgLz48L3N2Zz4="},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(11),i=n(1),a=n(28),l=n(75),s=n(85),c=n(86),d=o(n(0));t.createGlobalImageEditor=function(){const e=[{title:i.TEXT.DOM_IMAGES,selected:!0,panel:c.createDomImagePanel()},{title:i.TEXT.CONTENT_IMAGES,panel:l.createContentImagePanel()},{title:i.TEXT.STYLE_IMAGES,panel:s.createStyleImagePanel()}];let t=a.createTabs(e);const{modal:n,hideCancel:o}=r.createModal(i.TEXT.EDIT_IMAGES,t,"600px","500px");o(),d.default.container.appendChild(n)}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),i=n(5),a=n(29),l=n(10),s=n(15),c=n(16),d=o(n(0)),u=n(9),p=n(6),f=n(7),h=n(2),m=n(24);t.createContentImagePanel=function(){let e=h.createDiv();for(const t of r.getAllElement(document.body))if(t instanceof HTMLImageElement){let n=p.KoobooComment.getComments(t),o=f.getAttributeComment(n,"src");if(!o||!o.fieldname)continue;let{imagePreview:r,setImage:h}=m.createImagePreview(!1,()=>t.src="");a.setImagePreview(r,t),h(t.src),r.onclick=()=>{let e=t.src;l.pickImg(n=>{t.src=n,h(n);let r=i.setGuid(t),a=t.src,l=new s.AttributeUnit(e,"src"),p=c.ContentLog.createUpdate(o.nameorid,o.fieldname,a),f=new u.operationRecord([l],[p],r);d.default.operationManager.add(f)})},e.appendChild(r)}return e}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAvSURBVChTY3zy5AkDKpCWloayYIAJSuMFg1ER4////6FMGHj69CmUBQND1HcMDADo1wjAUQl9dwAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(78),r=n(79);t.colorProps=[{prop:"color",isChild:!1,parent:"color",replaceColor:(e,t)=>t,getColor:e=>e},{prop:"background-color",isChild:!0,parent:"background",replaceColor:(e,t)=>t,getColor:e=>e},{prop:"box-shadow",isChild:!1,parent:"box-shadow",replaceColor:(e,t)=>{let n=new o.BoxShadow(e);return n.color=t,n.toString()},getColor:e=>new o.BoxShadow(e).color},{prop:"text-shadow",isChild:!1,parent:"text-shadow",replaceColor:(e,t)=>{let n=new r.TextShadow(e);return n.color=t,n.toString()},getColor:e=>new r.TextShadow(e).color},{prop:"border-color",isChild:!0,parent:"border",replaceColor:(e,t)=>t,getColor:e=>e},{prop:"border-left-color",isChild:!0,parent:"border-left",replaceColor:(e,t)=>t,getColor:e=>e},{prop:"border-top-color",isChild:!0,parent:"border-top",replaceColor:(e,t)=>t,getColor:e=>e},{prop:"border-right-color",isChild:!0,parent:"border-right",replaceColor:(e,t)=>t,getColor:e=>e},{prop:"border-bottom-color",isChild:!0,parent:"border-bottom",replaceColor:(e,t)=>t,getColor:e=>e},{prop:"outline-color",isChild:!1,parent:"outline",replaceColor:(e,t)=>t,getColor:e=>e},{prop:"column-rule-color",isChild:!1,parent:"column-rule",replaceColor:(e,t)=>t,getColor:e=>e}]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BoxShadow=class{constructor(e){this.value=e,this.hShadow="0px",this.vShadow="0px",this.blur="0px",this.spread="0px",this.color="#fff0",this.inset=null,(e=e.replace(";","")).indexOf("inset")>-1&&(e=e.replace("inset",""),this.inset="inset");let t,n,o,r,i,a=(e=(e=e.replace(/\s+/g," ")).replace(/,\s+/g,",")).trim().split(" ");a.length<3||a.length>5||(/^([a-zA-Z#]|rgb)/.test(a[0])?(t=0,n=1,o=2,r=3,i=4):(n=0,o=1,r=2,i=3,t=a.length-1),3==a.length&&(this.hShadow=a[n],this.vShadow=a[o],this.color=a[t]),4==a.length&&(this.hShadow=a[n],this.vShadow=a[o],this.blur=a[r],this.color=a[t]),5==a.length&&(this.hShadow=a[n],this.vShadow=a[o],this.blur=a[r],this.spread=a[i],this.color=a[t]))}toString(){return`${this.hShadow} ${this.vShadow} ${this.blur} ${this.spread} ${this.color} ${this.inset||""}`}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TextShadow=class{constructor(e){this.value=e,this.hShadow="0px",this.vShadow="0px",this.blur="0px",this.color="#fff0";let t,n,o,r,i=(e=(e=(e=e.replace(";","")).replace(/\s+/g," ")).replace(/,\s+/g,",")).trim().split(" ");i.length<3||i.length>4||(/^([a-zA-Z#]|rgb)/.test(i[0])?(t=0,n=1,o=2,r=3):(t=i.length-1,n=0,o=1,r=2),3==i.length&&(this.hShadow=i[n],this.vShadow=i[o],this.color=i[t]),4==i.length&&(this.hShadow=i[n],this.vShadow=i[o],this.blur=i[r],this.color=i[t]))}toString(){return`${this.hShadow} ${this.vShadow} ${this.blur} ${this.color}`}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStylePriority=function(e){const t=["first-letter","last-letter","first-line","last-line","first-child","last-child","before","after"];let n=e.important?1:0,o=e.inline?1:0,r=e.styleSequence||0,i=[n,o,0,0,0,e.prop&&e.prop.isChild?1:0,r],a=e.targetSelector;return a=(a=(a=a.replace(/(::?)([\w-]+)/g,function(e,n,o){return t.indexOf(o)>=0&&":"===n?"::"+o:e})).replace(/(\[[^[\]]+])/g,"").replace(/(::[\w-]+)/g,"").replace(/(:[\w-]+)/g,"").replace(/(#[\w-]+)/g,"").replace(/(\.[\w-]+)/g,"").replace(/([\w-]+)/g,"")).replace(/[\2\3\4]/g,function(e){var t=e.charCodeAt(0);return i[t]++,"<"+t+">"}),i},t.compareStylePriority=function(e,t){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]-t[n];return 0},t.sortStylePriority=function(e){return e.sort((e,n)=>{let o=t.getStylePriority(e),r=t.getStylePriority(n);return t.compareStylePriority(o,r)}),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.colorEnum={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(21);t.StyleUnit=class extends o.Unit{constructor(e,t,n){super(e),this.oldValue=e,this.prop=t,this.important=n}undo(e){let t=e;this.newValue=t.style.getPropertyValue(this.prop),t.style.setProperty(this.prop,this.oldValue,this.important)}redo(e){let t=e;this.oldValue=t.style.getPropertyValue(this.prop),t.style.setProperty(this.prop,this.newValue,this.important)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2);t.createOutLinkPanel=function(){let e=o.createInput();return e.style.width="100%",e.placeholder="http://",{outLinkPanel:e,setContent:t=>e.value=t,getContent:()=>e.value}}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,l)}s((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const r=n(10),i=n(2);t.createPageLinkPanel=function(e){return o(this,void 0,void 0,function*(){let t,n=yield r.getPageUrls(),o=i.createDiv(),a=n.map(e=>i.createRadioInput(e));return a.forEach(n=>{n.radio.onclick=()=>{a.filter(e=>e!=n).forEach(e=>e.setChecked(!1)),n.setChecked(!0),t=n.getContent()},n.getContent()==e&&(n.setChecked(!0),t=e),o.appendChild(n.radio)}),a.length>0&&(a[a.length-1].radio.style.borderBottom="none"),{pageLinkPanel:o,getContent:()=>t}})}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),i=n(5),a=n(7),l=n(3),s=n(29),c=n(10),d=n(17),u=n(9),p=o(n(0)),f=n(15),h=n(6),m=n(2),g=n(24),b=n(25);t.createStyleImagePanel=function(){let e=m.createDiv(),t=b.getCssRules();for(const n of r.getAllElement(document.body)){if(!(n instanceof HTMLElement))continue;let o=getComputedStyle(n);if(!o.backgroundImage||"none"==o.backgroundImage)continue;let m=n.getAttribute(l.KOOBOO_ID),b=h.KoobooComment.getComments(n),y=a.getViewComment(b);if(!y||!m)continue;let{imagePreview:M,setImage:_}=g.createImagePreview();s.setImagePreview(M,n),_(o.backgroundImage),M.onclick=()=>{let e=n.getAttribute("style");c.pickImg(o=>{o="none"==o?"none":` url('${o}')`;let a=r.getImportant(n,"background-image",t);n.style.setProperty("background-image",o,a),_(o);let l,s=i.setGuid(n),c=new f.AttributeUnit(e,"style"),h=n.style.backgroundImage.replace(/"/g,"'");l=d.StyleLog.createUpdate(y.nameorid,y.objecttype,h,"background-image",m,!!a);let g=new u.operationRecord([c],[l],s);p.default.operationManager.add(g)})},e.appendChild(M)}return e}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,l)}s((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),i=n(7),a=n(29),l=n(6),s=n(3),c=n(5),d=n(2),u=n(24);t.createDomImagePanel=function(){let e=d.createDiv();for(const t of r.getAllElement(document.body))if(t instanceof HTMLImageElement){let n=l.KoobooComment.getComments(t),r=t.getAttribute(s.KOOBOO_ID);if(i.getAttributeComment(n))continue;let d=i.getViewComment(n);if(!r)continue;let{imagePreview:p,setImage:f}=u.createImagePreview(!1,()=>t.src="");a.setImagePreview(p,t),f(t.src),p.onclick=()=>o(this,void 0,void 0,function*(){let e,{koobooId:n,parent:o}=c.getCleanParent(t);null!=(e=c.isDirty(t)&&o?yield i.updateDomImage(t,o,n,d):yield i.updateAttributeImage(t,r,d))&&f(e)}),e.appendChild(p)}return e}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(20),i=o(n(88)),a=n(1),l=n(89);t.createLinkButton=function(){var e=r.createButton(i.default,a.TEXT.EDIT_LINKS);return e.onclick=l.createGlobalLinkEditor,e}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iIzFmYjVmNiIgZD0iTTkxMC40OTYgMjEzLjUzNkM4MDQuMTYgODIuMjA4IDYxMS40ODggNjEuOTUyIDQ4MC4xMjggMTY4LjMybC0xMDAuNzY4IDgxLjYgNTAuMzM2IDYyLjE3NiAxMDAuNzY4LTgxLjZhMjI1Ljk4NCAyMjUuOTg0IDAgMSAxIDI4NC40NDggMzUxLjI2NGwtMTA3Ljk2OCA4Ny40MjQgNTAuMzM2IDYyLjE3NiAxMDcuOTY4LTg3LjQyNGEzMDUuOTg0IDMwNS45ODQgMCAwIDAgNDUuMjQ4LTQzMC40ek01MTYuMzUyIDgyMy41NTJhMjI1Ljk4NCAyMjUuOTg0IDAgMSAxLTI4NC40NDgtMzUxLjI2NGwxMTAuOTc2LTg5Ljg1Ni01MC4zMzYtNjIuMTc2LTExMC45NzYgODkuODU2QzUwLjI0IDUxNi40NDggMjkuOTg0IDcwOS4xNTIgMTM2LjMyIDg0MC40OGMxMDYuMzM2IDEzMS4zMjggMjk5LjA0IDE1MS41ODQgNDMwLjM2OCA0NS4yNDhsMTA1LjEyLTg1LjEyLTUwLjMzNi02Mi4xNzYtMTA1LjEyIDg1LjEyek02NzYuMTYgMzUzLjI4bDUxLjIzMiA2MS40NC0zNDMuNTUyIDI4Ni4zMDQtNTEuMi02MS40NHoiIC8+PC9zdmc+"},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(11),i=n(1),a=n(28),l=n(90),s=n(91),c=o(n(0));t.createGlobalLinkEditor=function(){const e=[{title:i.TEXT.DOM_LINKS,selected:!0,panel:l.createDomLinkPanel()},{title:i.TEXT.CONTENT_LINKS,panel:s.createContentLinkPanel()}];let t=a.createTabs(e);const{modal:n,hideCancel:o}=r.createModal(i.TEXT.EDIT_LINKS,t,"500px","500px");o(),c.default.container.appendChild(n)}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,l)}s((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),i=n(39),a=n(7),l=n(6),s=n(3),c=n(5),d=n(2);t.createDomLinkPanel=function(){let e=d.createDiv();for(const t of r.getAllElement(document.body))if(t instanceof HTMLElement&&r.isLink(t)){let n=l.KoobooComment.getComments(t),r=t.getAttribute(s.KOOBOO_ID);if(!r)continue;if(a.getMenuComment(n))continue;if(a.getFormComment(n))continue;if(a.getHtmlBlockComment(n))continue;if(a.getAttributeComment(n))continue;let d=a.getUrlComment(n),u=a.getViewComment(n),{item:p,setLabel:f}=i.createLinkItem(t,()=>o(this,void 0,void 0,function*(){let e,{koobooId:n,parent:o}=c.getCleanParent(t);null!=(e=c.isDirty(t)&&o?yield a.updateDomLink(o,n,t,u):d?yield a.updateUrlLink(t,r,d,u):yield a.updateAttributeLink(t,r,u))&&f(e)}));e.appendChild(p)}e.children.length>0&&(e.children.item(e.children.length-1).style.borderBottom="none");return e}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,l)}s((o=o.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),a=n(5),l=n(39),s=n(30),c=n(15),d=n(16),u=n(9),p=r(n(0)),f=n(6),h=n(7),m=n(2);t.createContentLinkPanel=function(){let e=m.createDiv();for(const t of i.getAllElement(document.body))if(t instanceof HTMLElement&&i.isLink(t)){let n=f.KoobooComment.getComments(t),r=h.getAttributeComment(n,"href");if(!r||!r.fieldname||"href"!=r.attributename)continue;let{item:i,setLabel:m}=l.createLinkItem(t,()=>o(this,void 0,void 0,function*(){let e=t.getAttribute("href");try{let n=yield s.createLinkPicker(e);t.setAttribute("href",n);let o=a.setGuid(t),i=t.getAttribute("href"),l=new c.AttributeUnit(e,"href"),f=d.ContentLog.createUpdate(r.nameorid,r.fieldname,i),h=new u.operationRecord([l],[f],o);p.default.operationManager.add(h),m(n)}catch(n){t.setAttribute("href",e)}}));e.appendChild(i)}e.children.length>0&&(e.children.item(e.children.length-1).style.borderBottom="none");return e}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,l)}s((o=o.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(0)),a=n(19),l=n(93);t.createFloatMenu=function(){const{container:e,hidden:t,update:n}=l.createMenu();return e.onmouseenter=()=>i.default.floatMenuClosing=!1,i.default.domChangeEvent.addEventListener(e=>{i.default.lastMouseEventArg.isTrusted&&(i.default.floatMenuClosing=!1,n(i.default.lastMouseEventArg.pageX,i.default.lastMouseEventArg.pageY))}),i.default.hoverDomEvent.addEventListener(()=>o(this,void 0,void 0,function*(){i.default.floatMenuClosing=!0,yield a.delay(200),i.default.floatMenuClosing&&t()})),e}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(94)),i=o(n(95)),a=o(n(96)),l=o(n(100)),s=o(n(101)),c=o(n(102)),d=o(n(103)),u=o(n(104)),p=o(n(105)),f=o(n(106)),h=o(n(117)),m=o(n(119)),g=o(n(121)),b=o(n(122)),y=o(n(123)),M=o(n(124)),_=n(4),v=o(n(125)),T=n(6),w=o(n(0)),I=o(n(126)),E=n(2),C=n(3),D=n(1),N=n(14),L=o(n(42)),k=o(n(128)),A=o(n(129)),O=o(n(133));t.createMenu=function(){let e=new j;return e.addItem(new a.default(e)),e.addItem(new r.default(e)),e.addItem(new i.default(e)),e.addItem(new l.default(e)),e.addItem(new s.default(e)),e.addItem(new c.default(e)),e.addItem(new d.default(e)),e.addItem(new u.default(e)),e.addItem(new h.default(e)),e.addItem(new m.default(e)),e.addItem(new p.default(e)),e.addItem(new f.default(e)),e.addItem(new g.default(e)),e.addItem(new b.default(e)),e.addItem(new y.default(e)),e.addItem(new M.default(e)),e.addItem(new v.default(e)),e.addItem(new I.default(e)),e.addItem(new A.default(e)),e.addItem(new O.default(e)),e};class j{constructor(){this.items=[],this.update=(e,t)=>{let n=_.getMaxHeight(),o=_.getMaxWidth();this.container.style.display="block",this.container.style.overflow="visible";let r=w.default.lastSelectedDomEventArgs,i=T.KoobooComment.getComments(r.element),a=0!=_.getParentElements(r.element).findIndex(e=>e instanceof HTMLBodyElement);this.setExpandBtnVisiable(a);for(const e of this.items)e.update(i);this.updatePosition(e,t,n,o)},this.hidden=()=>{this.container.style.display="none"};const{container:e,setExpandBtnVisiable:t,updatePosition:n}=this.createContainer();for(const t of this.items)e.appendChild(t.el);this.container=e,this.setExpandBtnVisiable=t,this.updatePosition=n}addItem(e){this.container.appendChild(e.el),this.items.push(e)}createContainer(){let e=E.createDiv();e.classList.add("kb_web_editor_menu"),e.style.zIndex=C.STANDARD_Z_INDEX+1+"";let{setExpandBtnVisiable:t,title:n}=this.createTitle();e.append(n);return{container:e,updatePosition:(t,n,o,r)=>{let i=e.getBoundingClientRect(),a=_.getScrollLeft(),l=_.getScrollTop(),s=window.innerWidth+a,c=window.innerHeight+l;t+i.width>s&&(t=t-i.width+3),n+i.height>c&&(n=n-i.height+3,w.default.lastMouseEventArg={isTrusted:!0,pageX:t,pageY:n}),e.style.top=n+"px",e.style.left=t+"px"},setExpandBtnVisiable:t}}createTitle(){const e=E.createDiv();e.classList.add("kb_web_editor_menu_title"),e.appendChild(document.createTextNode(D.TEXT.MENU)),e.appendChild(this.createCloseButton());let t=this.createExpandButton();e.appendChild(t);return{title:e,setExpandBtnVisiable:e=>{t.style.display=e?"block":"none"}}}createCloseButton(){const e=E.createDiv();return e.style.backgroundImage=`url(${L.default})`,e.onclick=()=>this.hidden(),e}createExpandButton(){const e=E.createDiv();return e.style.backgroundImage=`url(${k.default})`,e.title=D.TEXT.EXPAND_SELECTION,e.onclick=()=>{if(w.default.editing)return;let e=w.default.lastHoverDomEventArgs.closeElement;e&&e.parentElement&&(N.emitHoverEvent(e.parentElement),N.emitSelectedEvent())},e}}t.Menu=j},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(0)),i=n(5),a=n(1),l=n(7),s=n(4),c=n(9),d=n(12),u=n(6),p=o(n(8)),f=n(13);t.default=class extends p.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(a.TEXT.COPY);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(e){this.setVisiable(!0);let t=r.default.lastSelectedDomEventArgs;if(l.getRepeatComment(e))return this.setVisiable(!1);if(i.getRelatedRepeatComment(t.element))return this.setVisiable(!1);if(!l.getViewComment(e))return this.setVisiable(!1);let{koobooId:n,parent:o}=i.getCleanParent(t.element);return o&&n?s.isBody(t.element)?this.setVisiable(!1):o&&i.isDynamicContent(o)?this.setVisiable(!1):void 0:this.setVisiable(!1)}click(){let e=r.default.lastSelectedDomEventArgs;this.parentMenu.hidden();let t=u.KoobooComment.getComments(e.element),{koobooId:n,parent:o}=i.getCleanParent(e.element),a=e.element.cloneNode(!0),s=i.setGuid(o),p=o.innerHTML;e.element.parentElement.insertBefore(a,e.element.nextSibling),i.markDirty(o);let h=i.clearKoobooInfo(o.innerHTML),m=new f.InnerHtmlUnit(p),g=l.getEditComment(t),b=d.DomLog.createUpdate(g.nameorid,h,n,g.objecttype),y=new c.operationRecord([m],[b],s);r.default.operationManager.add(y)}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=o(n(0)),a=n(5),l=n(4),s=n(9),c=n(12),d=n(7),u=n(6),p=o(n(8)),f=n(13);t.default=class extends p.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(r.TEXT.DELETE);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(e){this.setVisiable(!0);let t=i.default.lastSelectedDomEventArgs,{parent:n}=a.getCleanParent(t.element);return t.koobooId&&d.getViewComment(e)?d.getRepeatComment(e)?this.setVisiable(!1):a.getRelatedRepeatComment(t.element)?this.setVisiable(!1):a.isDirty(t.element)&&n&&a.isDynamicContent(n)?this.setVisiable(!1):l.isBody(t.element)?this.setVisiable(!1):void 0:this.setVisiable(!1)}click(){let e=i.default.lastSelectedDomEventArgs;this.parentMenu.hidden();let t,{koobooId:n,parent:o}=a.getCleanParent(e.element),r=u.KoobooComment.getComments(e.element),l=d.getViewComment(r),p=(o=o||e.element.parentElement).innerHTML,h=a.setGuid(o);e.element.parentElement.removeChild(e.element),a.markDirty(o),t=a.isDirty(e.element)&&o?c.DomLog.createUpdate(l.nameorid,a.clearKoobooInfo(o.innerHTML),n,l.objecttype):c.DomLog.createDelete(l.nameorid,e.koobooId,l.objecttype);let m=new s.operationRecord([new f.InnerHtmlUnit(p)],[t],h);i.default.operationManager.add(m)}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=o(n(0)),a=n(5),l=n(4),s=n(31),c=n(7),d=n(6),u=n(13),p=n(3),f=n(16),h=n(99),m=n(12),g=n(9),b=o(n(8)),y=n(19);t.default=class extends b.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(r.TEXT.EDIT);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(e){this.setVisiable(!0);let t=i.default.lastSelectedDomEventArgs;if(l.isBody(t.element))return this.setVisiable(!1);if(c.getMenuComment(e))return this.setVisiable(!1);if(!c.getEditComment(e))return this.setVisiable(!1);if(!t.koobooId)return this.setVisiable(!1);if(!c.isEditable(t.element))return this.setVisiable(!1);let{parent:n}=a.getCleanParent(t.element);return a.isDirty(t.element)&&n&&a.isDynamicContent(n)?this.setVisiable(!1):a.isDynamicContent(t.element)?this.setVisiable(!1):void 0}click(){let{element:e,koobooId:t}=i.default.lastSelectedDomEventArgs;if(this.parentMenu.hidden(),!y.htmlModeCheck())return;let n=e.innerHTML;s.setInlineEditor({selector:e,onSave:()=>{if(c.clearContent(n)==c.clearContent(e.innerHTML))return;let{koobooId:o,parent:r}=a.getCleanParent(e),l=d.KoobooComment.getComments(e),s=r&&a.isDirty(e)?r:e;a.markDirty(s),t=o&&a.isDirty(e)?o:t;let b,y=a.setGuid(e),M=[new u.InnerHtmlUnit(n)],_=c.getEditComment(l);b=_.objecttype==p.OBJECT_TYPE.content?f.ContentLog.createUpdate(_.nameorid,_.fieldname,a.clearKoobooInfo(e.innerHTML)):_.objecttype==p.OBJECT_TYPE.Label?h.LabelLog.createUpdate(_.bindingvalue,a.clearKoobooInfo(e.innerHTML)):m.DomLog.createUpdate(_.nameorid,a.clearKoobooInfo(s.innerHTML),t,_.objecttype);let v=new g.operationRecord(M,[b],y);i.default.operationManager.add(v)},onCancel:()=>{e.innerHTML=n}})}}},function(e,t){e.exports=tinymce},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,l)}s((o=o.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),a=n(1),l=r(n(0)),s=n(4),c=n(19),d=r(n(36)),u=n(2);function p(e){return o(this,void 0,void 0,function*(){e.focus(!1);let t=e.getContainer();if(t instanceof HTMLElement){t.style.zIndex=i.STANDARD_Z_INDEX+1+"",t.style.width="auto",yield c.delay(100),t.nextElementSibling instanceof HTMLElement&&(t.nextElementSibling.style.zIndex=i.STANDARD_Z_INDEX+2+"");let o=t.getElementsByClassName("tox-toolbar").item(0);var n=u.createDiv();n.draggable=!0,n.style.cursor="move",n.style.backgroundImage=`url(${d.default})`,n.style.backgroundPosition="center",n.style.backgroundRepeat="no-repeat",n.style.backgroundSize="contain",n.style.height="26px",n.style.width="26px",n.style.margin="6px 0 6px 6px",o.insertBefore(n,o.children.item(0)),t.draggable=!0;const r=()=>{let e=t.getBoundingClientRect();e.left<0&&(t.style.left="0px"),e.top<0&&(t.style.top="0px")};r(),e.on("MouseDown",r),e.on("MouseUp",r),e.on("KeyUp",r),t.ondrag=e=>{t instanceof HTMLElement&&(t.style.position="fixed",0!=e.x&&0!=e.y&&(t.style.top=e.y-15+"px",t.style.left=e.x-15+"px"))}}})}function f(e){let t=[];for(const n of s.getAllElement(e))n.classList.contains("mce-item-table")&&n.classList.remove("mce-item-table"),n.hasAttribute("data-mce-src")&&n.removeAttribute("data-mce-src"),n.hasAttribute("data-mce-bogus")&&t.push(n);t.forEach(e=>e.parentElement&&e.parentElement.removeChild(e))}t.impoveEditorUI=p,t.setLang=function(e){"zh"==a.lang&&(e.language="zh_CN",e.language_url=`${location.origin}\\_Admin\\Scripts\\kooboo-web-editor\\${e.language}.js`)},t.onBlur=function(){return!1},t.onSetContent=function(e){var t=e.target.targetElm;t.style.position=t._position;for(const e of s.getAllElement(t,!0))-1!=e.innerHTML.indexOf(i.EMPTY_COMMENT)||s.isTextArea(e)||(e.innerHTML+=i.EMPTY_COMMENT)},t.onKeyDown=function(e){var t=e.target;"Backspace"==e.code&&(-1!=t.innerHTML.indexOf(i.EMPTY_COMMENT)||s.isTextArea(t)||(t.innerHTML+=i.EMPTY_COMMENT));if("Backspace"==e.code&&t.innerHTML==i.EMPTY_COMMENT)return!1},t.onBeforeSetContent=function(e){var t=e.target.targetElm;"li"==t.tagName.toLowerCase()&&(0==t.children.length?e.content=t.textContent:0===e.content&&(e.content=t.innerHTML)),e.format="raw"},t.getToolbar=function(e){let t="save cancel | undo redo | bold italic underline | forecolor backcolor | fontselect fontsizeselect | image ";return"a"!=e.tagName.toLowerCase()&&(t+="| link unlink"),t},t.initInstanceCallback=function(e){l.default.editing=!0,p(e),l.default.closeEditingEvent.addEventListener(()=>{e.execCommand("mcecancel"),l.default.closeEditingEvent.handlers=[]})},t.savePluginCallback=function(e,t){e.save=()=>"",e.remove();let n=e.getElement();n instanceof HTMLElement&&(n.id.startsWith("mce_")&&n.removeAttribute("id"),""==n.getAttribute("style")&&n.removeAttribute("style")),f(document.body),l.default.editing=!1,t()},t.clearTinymceElements=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(3),r=n(22),i=n(23);class a extends i.Log{constructor(){super(...arguments),this.objectType=o.OBJECT_TYPE.Label,this.editorType=o.EDITOR_TYPE.label}static createDelete(e){let t=new a;return t.action=r.ActionType.delete,t.nameOrId=e,t}static createUpdate(e,t){let n=new a;return n.action=r.ActionType.update,n.nameOrId=e,n.value=t,n}}t.LabelLog=a},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=o(n(0)),a=n(4),l=n(7),s=n(5),c=n(6),d=o(n(8));t.default=class extends d.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(r.TEXT.EDIT_IMAGE);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(e){this.setVisiable(!0);let t=i.default.lastSelectedDomEventArgs;return a.isImg(t.element)?l.getAttributeComment(e)?this.setVisiable(!1):l.getViewComment(e)?s.isDynamicContent(t.element)?this.setVisiable(!1):void 0:this.setVisiable(!1):this.setVisiable(!1)}click(){let e=i.default.lastSelectedDomEventArgs;this.parentMenu.hidden();let t=c.KoobooComment.getComments(e.element),n=e.element,{koobooId:o,parent:r}=s.getCleanParent(e.element);s.isDirty(e.element)&&r?l.updateDomImage(n,r,o,l.getViewComment(t)):l.updateAttributeImage(n,e.koobooId,l.getEditComment(t))}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=o(n(0)),a=n(5),l=n(4),s=n(7),c=n(6),d=o(n(8));t.default=class extends d.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(r.TEXT.EDIT_LINK);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(e){this.setVisiable(!0);let t=i.default.lastSelectedDomEventArgs;return s.getAttributeComment(e)?this.setVisiable(!1):s.getRepeatComment(e)?this.setVisiable(!1):s.getUrlComment(e)?this.setVisiable(!0):l.isLink(t.element)&&s.getViewComment(e)?a.isDynamicContent(t.element)?this.setVisiable(!1):void 0:this.setVisiable(!1)}click(){let e=i.default.lastSelectedDomEventArgs;this.parentMenu.hidden();let t=c.KoobooComment.getComments(e.element),n=s.getUrlComment(t),o=s.getViewComment(t),{koobooId:r,parent:l}=a.getCleanParent(e.element);a.isDirty(e.element)&&l?s.updateDomLink(l,r,e.element,o):n?s.updateUrlLink(e.element,e.koobooId,n,o):s.updateAttributeLink(e.element,e.koobooId,o)}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=n(4),a=o(n(0)),l=n(5),s=o(n(8));function c(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=parent.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null}t.default=class extends s.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(r.TEXT.ENTER_LINK);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(){this.setVisiable(!0);let e=a.default.lastHoverDomEventArgs;if(!i.canJump(e.element))return this.setVisiable(!1)}click(){let e=a.default.lastHoverDomEventArgs.element.getAttribute("href");this.parentMenu.hidden();let t=l.getPageId(),n=`?siteId=${c("SiteId")}&accessToken=${c("accessToken")}&pageId=${t}&pageUrl=${e}`;parent.location.href=parent.location.origin+parent.location.pathname+n}}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,l)}s((o=o.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),a=r(n(0)),l=n(7),s=n(10),c=n(6),d=r(n(8)),u=n(4);t.default=class extends d.default{constructor(e){super(e);const{el:t,setVisiable:n,setReadonly:o}=this.createItem(i.TEXT.EDIT_HTML_BLOCK);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n,this.setReadonly=o}update(e){if(this.setVisiable(!0),!l.getHtmlBlockComment(e))return this.setVisiable(!1);this.setReadonly(l.hasOperation(a.default.operationManager))}click(){return o(this,void 0,void 0,function*(){let e=a.default.lastSelectedDomEventArgs;this.parentMenu.hidden();let t=c.KoobooComment.getComments(e.element),n=l.getHtmlBlockComment(t).nameorid;yield s.editHtmlBlock(n),u.reload()})}}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,l)}s((o=o.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),a=r(n(0)),l=n(7),s=n(4),c=n(10),d=n(6),u=n(5),p=r(n(8));t.default=class extends p.default{constructor(e){super(e);const{el:t,setVisiable:n,setReadonly:o}=this.createItem(i.TEXT.EDIT_REPEAT);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n,this.setReadonly=o}update(e){this.setVisiable(!0);let t=a.default.lastSelectedDomEventArgs;if(!l.getRepeatComment(e)&&!u.getRelatedRepeatComment(t.element))return this.setVisiable(!1);this.setReadonly(l.hasOperation(a.default.operationManager))}click(){return o(this,void 0,void 0,function*(){let e=a.default.lastSelectedDomEventArgs;this.parentMenu.hidden();let t=d.KoobooComment.getComments(e.element),n=l.getRepeatComment(t);n||(n=u.getRelatedRepeatComment(e.element)),yield c.editRepeat(n.nameorid,n.folderid),s.reload()})}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=o(n(0)),a=n(7),l=n(5),s=n(3),c=n(10),d=n(6),u=n(2),p=o(n(8));t.default=class extends p.default{constructor(e){super(e);const{el:t,setVisiable:n,setReadonly:o}=this.createItem(r.TEXT.EDIT_MENU);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(e){if(this.setVisiable(!0),!a.getMenuComment(e))return this.setVisiable(!1)}click(){let e=i.default.lastSelectedDomEventArgs;this.parentMenu.hidden();let t=d.KoobooComment.getComments(e.element),n=a.getMenuComment(t);var{startNode:o,endNode:r}=l.getWrapDom(e.element,s.OBJECT_TYPE.menu);o&&r&&c.editMenu(n.nameorid,e=>{let t=u.createDiv();for(;;){if(o.nextSibling==r){o.parentElement.insertBefore(t,r);break}o.parentElement.removeChild(o.nextSibling)}t.outerHTML=e})}}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,l)}s((o=o.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),a=r(n(0)),l=n(107),s=n(5),c=n(15),d=n(9),u=n(7),p=n(6),f=n(12),h=n(4),m=r(n(8));t.default=class extends m.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(i.TEXT.EDIT_STYLE);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(e){this.setVisiable(!0);let t=a.default.lastSelectedDomEventArgs;return h.isImg(t.element)?this.setVisiable(!1):u.getMenuComment(e)?this.setVisiable(!1):u.getHtmlBlockComment(e)?this.setVisiable(!1):u.getViewComment(e)&&t.koobooId?void 0:this.setVisiable(!1)}click(){return o(this,void 0,void 0,function*(){let e=a.default.lastSelectedDomEventArgs;this.parentMenu.hidden();let t=p.KoobooComment.getComments(e.element),{koobooId:n,parent:o}=s.getCleanParent(e.element);const r=e.element.getAttribute("style");let i=u.getViewComment(t);try{let t=yield l.createStyleEditor(e.element,i.nameorid,i.objecttype,e.koobooId),u=s.setGuid(e.element),p=new c.AttributeUnit(r,"style");if(0==t.length)return;s.isDirty(e.element)&&(t=[f.DomLog.createUpdate(i.nameorid,s.clearKoobooInfo(o.innerHTML),n,i.objecttype)]);let h=new d.operationRecord([p],t,u);a.default.operationManager.add(h)}catch(t){e.element.setAttribute("style",r)}})}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(11),i=n(1),a=n(2),l=o(n(0)),s=n(108),c=n(109),d=n(115),u=n(116),p=n(25);function f(e){let t=a.createDiv();return t.innerText=e,t.style.padding="3px 5px",t.style.margin="5px 0",t.style.borderBottom="1px solid #eee",t}t.createStyleEditor=function(e,t,n,o){const h=a.createDiv();let m=p.getCssRules();const g=f(i.TEXT.BACKGROUND_IMAGE);g.style.margin="0 0 15px 0",h.appendChild(g);const b=s.createImg(e,t,n,o,m);h.appendChild(b.el),h.appendChild(f(i.TEXT.COLOR));const y=c.createColor(e,t,n,o,m);h.appendChild(y.el),h.appendChild(f(i.TEXT.FONT));const M=d.createFont(e,t,n,o,m);h.appendChild(M.el),h.appendChild(f(i.TEXT.SIZE));const _=u.createSize(e,t,n,o,m);h.appendChild(_.el);const{modal:v,setOkHandler:T,setCancelHandler:w,close:I}=r.createModal(i.TEXT.EDIT_STYLE,h,"450px");return l.default.container.appendChild(v),new Promise((e,t)=>{T(()=>{let t=[...b.getLogs(),...y.getLogs(),...M.getLogs(),..._.getLogs()].filter(e=>e);e(t),I()}),w(()=>{t(),I()})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(24),r=n(10),i=n(17),a=n(4);t.createImg=function(e,t,n,l,s){let c;const d=getComputedStyle(e);let u=a.getImportant(e,"background-image",s);const p=o=>{o="none"==o?"none":` url('${o}')`,e.style.setProperty("background-image",o,u),c=i.StyleLog.createUpdate(t,n,o,"background-image",l,!!u),h(o)},{imagePreview:f,setImage:h}=o.createImagePreview(!0,()=>p("none"));return f.appendChild(o.createPickShade()),f.style.marginLeft="auto",f.style.marginRight="auto",f.style.marginBottom="15px",d.backgroundImage&&h(d.backgroundImage),f.onclick=()=>r.pickImg(p),{el:f,getLogs:()=>[c]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2),r=n(1),i=n(41),a=n(17),l=n(4);t.createColor=function(e,t,n,s,c){const d=o.createDiv(),u=getComputedStyle(e);let p,f,h=l.getImportant(e,"background-color",c),m=l.getImportant(e,"color",c),g=i.createColorPicker(r.TEXT.BACKGROUND_COLOR,u.backgroundColor,o=>{e.style.setProperty("background-color",o,h),p=a.StyleLog.createUpdate(t,n,o,"background-color",s,!!h)});d.appendChild(g);let b=i.createColorPicker(r.TEXT.COLOR,u.color,o=>{e.style.setProperty("color",o,m),f=a.StyleLog.createUpdate(t,n,o,"color",s,!!m)});return d.appendChild(b),{el:d,getLogs:()=>[p,f]}}},function(e,t,n){"use strict";var o=n(111),r=n(112),i={};for(var a in o)o.hasOwnProperty(a)&&(i[o[a]]=a);var l=e.exports={to:{},get:{}};function s(e,t,n){return Math.min(Math.max(t,e),n)}function c(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}l.get=function(e){var t,n;switch(e.substring(0,3).toLowerCase()){case"hsl":t=l.get.hsl(e),n="hsl";break;case"hwb":t=l.get.hwb(e),n="hwb";break;default:t=l.get.rgb(e),n="rgb"}return t?{model:n,value:t}:null},l.get.rgb=function(e){if(!e)return null;var t,n,r,i=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=t[2],t=t[1],n=0;n<3;n++){var a=2*n;i[n]=parseInt(t.slice(a,a+2),16)}r&&(i[3]=Math.round(parseInt(r,16)/255*100)/100)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(r=(t=t[1])[3],n=0;n<3;n++)i[n]=parseInt(t[n]+t[n],16);r&&(i[3]=Math.round(parseInt(r+r,16)/255*100)/100)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(n=0;n<3;n++)i[n]=parseInt(t[n+1],0);t[4]&&(i[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(t=e.match(/(\D+)/))?"transparent"===t[1]?[0,0,0,0]:(i=o[t[1]])?(i[3]=1,i):null:null;for(n=0;n<3;n++)i[n]=Math.round(2.55*parseFloat(t[n+1]));t[4]&&(i[3]=parseFloat(t[4]))}for(n=0;n<3;n++)i[n]=s(i[n],0,255);return i[3]=s(i[3],0,1),i},l.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])+360)%360,s(parseFloat(t[2]),0,100),s(parseFloat(t[3]),0,100),s(isNaN(n)?1:n,0,1)]}return null},l.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,s(parseFloat(t[2]),0,100),s(parseFloat(t[3]),0,100),s(isNaN(n)?1:n,0,1)]}return null},l.to.hex=function(){var e=r(arguments);return"#"+c(e[0])+c(e[1])+c(e[2])+(e[3]<1?c(Math.round(255*e[3])):"")},l.to.rgb=function(){var e=r(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},l.to.rgb.percent=function(){var e=r(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),o=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+n+"%, "+o+"%)":"rgba("+t+"%, "+n+"%, "+o+"%, "+e[3]+")"},l.to.hsl=function(){var e=r(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},l.to.hwb=function(){var e=r(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},l.to.keyword=function(e){return i[e.slice(0,3)]}},function(e,t,n){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(e,t,n){"use strict";var o=n(113),r=Array.prototype.concat,i=Array.prototype.slice,a=e.exports=function(e){for(var t=[],n=0,a=e.length;n<a;n++){var l=e[n];o(l)?t=r.call(t,i.call(l)):t.push(l)}return t};a.wrap=function(e){return function(){return e(a(arguments))}}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}},function(e,t,n){"use strict";window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n.r(t);var o={};function r(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(n,!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(o),n.d(o,"on",function(){return l}),n.d(o,"off",function(){return s}),n.d(o,"createElementFromString",function(){return d}),n.d(o,"removeAttribute",function(){return u}),n.d(o,"createFromTemplate",function(){return p}),n.d(o,"eventPath",function(){return f}),n.d(o,"adjustableInputNumbers",function(){return h});const l=c.bind(null,"addEventListener"),s=c.bind(null,"removeEventListener");function c(e,t,n,o,r={}){t instanceof HTMLCollection||t instanceof NodeList?t=Array.from(t):Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]);for(const a of t)for(const t of n)a[e](t,o,i({capture:!1},r));return Array.prototype.slice.call(arguments,1)}function d(e){const t=document.createElement("div");return t.innerHTML=e.trim(),t.firstElementChild}function u(e,t){const n=e.getAttribute(t);return e.removeAttribute(t),n}function p(e){return function e(t,n={}){const o=u(t,":obj"),r=u(t,":ref"),i=o?n[o]={}:n;r&&(n[r]=t);for(const n of Array.from(t.children)){const t=u(n,":arr"),o=e(n,t?{}:i);t&&(i[t]||(i[t]=[])).push(Object.keys(o).length?o:n)}return n}(d(e))}function f(e){let t=e.path||e.composedPath&&e.composedPath();if(t)return t;let n=e.target.parentElement;for(t=[e.target,n];n=n.parentElement;)t.push(n);return t.push(document,window),t}function h(e,t=(e=>e)){function n(n){const o=[.001,.01,.1][Number(n.shiftKey||2*n.ctrlKey)]*(n.deltaY<0?1:-1);let r=0,i=e.selectionStart;e.value=e.value.replace(/[\d.]+/g,(e,n)=>n<=i&&n+e.length>=i?(i=n,t(Number(e),o,r)):(r++,e)),e.focus(),e.setSelectionRange(i,i),n.preventDefault(),e.dispatchEvent(new Event("input"))}l(e,"focus",()=>l(window,"wheel",n,{passive:!1})),l(e,"blur",()=>s(window,"wheel",n))}const{min:m,max:g,floor:b,round:y}=Math;function M(e,t,n){t/=100,n/=100;let o=b(e=e/360*6),r=e-o,i=n*(1-t),a=n*(1-r*t),l=n*(1-(1-r)*t),s=o%6;return[255*[n,a,i,i,l,n][s],255*[l,n,n,a,i,i][s],255*[i,i,l,n,n,a][s]]}function _(e,t,n){let o=(2-(t/=100))*(n/=100)/2;return 0!==o&&(t=1===o?0:o<.5?t*n/(2*o):t*n/(2-2*o)),[e,100*t,100*o]}function v(e,t,n){let o,r,i;const a=m(e/=255,t/=255,n/=255),l=g(e,t,n),s=l-a;if(0===s)o=r=0;else{r=s/l;let i=((l-e)/6+s/2)/s,a=((l-t)/6+s/2)/s,c=((l-n)/6+s/2)/s;e===l?o=c-a:t===l?o=1/3+i-c:n===l&&(o=2/3+a-i),o<0?o+=1:o>1&&(o-=1)}return[360*o,100*r,100*(i=l)]}function T(e,t,n,o){return t/=100,n/=100,[...v(255*(1-m(1,(e/=100)*(1-(o/=100))+o)),255*(1-m(1,t*(1-o)+o)),255*(1-m(1,n*(1-o)+o)))]}function w(e,t,n){return t/=100,[e,2*(t*=(n/=100)<.5?n:1-n)/(n+t)*100,100*(n+t)]}function I(e){return v(...e.match(/.{2}/g).map(e=>parseInt(e,16)))}function E(e=0,t=0,n=0,o=1){const r=(e,t)=>(n=-1)=>t(~n?e.map(e=>Number(e.toFixed(n))):e),i={h:e,s:t,v:n,a:o,toHSVA(){const e=[i.h,i.s,i.v,i.a];return e.toString=r(e,e=>"hsva(".concat(e[0],", ").concat(e[1],"%, ").concat(e[2],"%, ").concat(i.a,")")),e},toHSLA(){const e=[..._(i.h,i.s,i.v),i.a];return e.toString=r(e,e=>"hsla(".concat(e[0],", ").concat(e[1],"%, ").concat(e[2],"%, ").concat(i.a,")")),e},toRGBA(){const e=[...M(i.h,i.s,i.v),i.a];return e.toString=r(e,e=>"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(i.a,")")),e},toCMYK(){const e=function(e,t,n){const o=M(e,t,n),r=o[0]/255,i=o[1]/255,a=o[2]/255;let l,s,c,d;return[100*(s=1===(l=m(1-r,1-i,1-a))?0:(1-r-l)/(1-l)),100*(c=1===l?0:(1-i-l)/(1-l)),100*(d=1===l?0:(1-a-l)/(1-l)),100*l]}(i.h,i.s,i.v);return e.toString=r(e,e=>"cmyk(".concat(e[0],"%, ").concat(e[1],"%, ").concat(e[2],"%, ").concat(e[3],"%)")),e},toHEXA(){const e=function(e,t,n){return M(e,t,n).map(e=>y(e).toString(16).padStart(2,"0"))}(i.h,i.s,i.v),t=i.a>=1?"":Number((255*i.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return t&&e.push(t),e.toString=()=>"#".concat(e.join("").toUpperCase()),e},clone:()=>E(i.h,i.s,i.v,i.a)};return i}const C=e=>Math.max(Math.min(e,1),0);function D(e){const t={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},e),_tapstart(e){l(document,["mouseup","touchend","touchcancel"],t._tapstop),l(document,["mousemove","touchmove"],t._tapmove),e.preventDefault(),t._tapmove(e)},_tapmove(e){const{options:{lock:o},cache:r}=t,{element:i,wrapper:a}=n,l=a.getBoundingClientRect();let s=0,c=0;if(e){const t=e&&e.touches&&e.touches[0];s=e?(t||e).clientX:0,c=e?(t||e).clientY:0,s<l.left?s=l.left:s>l.left+l.width&&(s=l.left+l.width),c<l.top?c=l.top:c>l.top+l.height&&(c=l.top+l.height),s-=l.left,c-=l.top}else r&&(s=r.x*l.width,c=r.y*l.height);"h"!==o&&(i.style.left="calc(".concat(s/l.width*100,"% - ").concat(i.offsetWidth/2,"px)")),"v"!==o&&(i.style.top="calc(".concat(c/l.height*100,"% - ").concat(i.offsetHeight/2,"px)")),t.cache={x:s/l.width,y:c/l.height};const d=C(s/a.offsetWidth),u=C(c/a.offsetHeight);switch(o){case"v":return n.onchange(d);case"h":return n.onchange(u);default:return n.onchange(d,u)}},_tapstop(){t.options.onstop(),s(document,["mouseup","touchend","touchcancel"],t._tapstop),s(document,["mousemove","touchmove"],t._tapmove)},trigger(){t._tapmove()},update(e=0,n=0){const{left:o,top:r,width:i,height:a}=t.options.wrapper.getBoundingClientRect();"h"===t.options.lock&&(n=e),t._tapmove({clientX:o+i*e,clientY:r+a*n})},destroy(){const{options:e,_tapstart:n}=t;s([e.wrapper,e.element],"mousedown",n),s([e.wrapper,e.element],"touchstart",n,{passive:!1})}},{options:n,_tapstart:o}=t;return l([n.wrapper,n.element],"mousedown",o),l([n.wrapper,n.element],"touchstart",o,{passive:!1}),t}function N(e={}){e=Object.assign({onchange:()=>0,className:"",elements:[]},e);const t=l(e.elements,"click",t=>{e.elements.forEach(n=>n.classList[t.target===n?"add":"remove"](e.className)),e.onchange(t)});return{destroy:()=>s(...t)}}function L({el:e,reference:t,padding:n=8}){const o={start:"sme",middle:"mse",end:"ems"},r={top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},i=((e={})=>(t,n=e[t])=>{if(n)return n;const[o,r="middle"]=t.split("-"),i="top"===o||"bottom"===o;return e[t]={position:o,variant:r,isVertical:i}})();return{update(a){const{position:l,variant:s,isVertical:c}=i(a),d=t.getBoundingClientRect(),u=e.getBoundingClientRect(),p=e=>e?{t:d.top-u.height-n,b:d.bottom+n}:{r:d.right+n,l:d.left-u.width-n},f=e=>e?{s:d.left+d.width-u.width,m:-u.width/2+(d.left+d.width/2),e:d.left}:{s:d.bottom-u.height,m:d.bottom-d.height/2-u.height/2,e:d.bottom-d.height},h={};function m(t,n,o){const r="top"===o,i=r?u.height:u.width,a=window[r?"innerHeight":"innerWidth"];for(const r of t){const t=n[r],l=h[o]="".concat(t,"px");if(t>0&&t+i<a)return e.style[o]=l,!0}return!1}for(const e of[c,!c]){const t=m(r[l],p(e),e?"top":"left"),n=m(o[s],f(e),e?"left":"top");if(t&&n)return}e.style.left=h.left,e.style.top=h.top}}}var k=({components:e,strings:t,useAsButton:n,inline:o,appClass:r,theme:i,lockOpacity:a})=>{const l=e=>e?"":'style="display:none" hidden',s=p('\n      <div :ref="root" class="pickr">\n\n        '.concat(n?"":'<button type="button" :ref="button" class="pcr-button"></button>','\n\n        <div :ref="app" class="pcr-app ').concat(r||"",'" data-theme="').concat(i,'" ').concat(o?'style="position: unset"':"",'>\n          <div class="pcr-selection" ').concat(l(e.palette),'>\n            <div :obj="preview" class="pcr-color-preview" ').concat(l(e.preview),'>\n              <button type="button" :ref="lastColor" class="pcr-last-color"></button>\n              <div :ref="currentColor" class="pcr-current-color"></div>\n            </div>\n\n            <div :obj="palette" class="pcr-color-palette">\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="palette" class="pcr-palette"></div>\n            </div>\n\n            <div :obj="hue" class="pcr-color-chooser" ').concat(l(e.hue),'>\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="slider" class="pcr-hue pcr-slider"></div>\n            </div>\n\n            <div :obj="opacity" class="pcr-color-opacity" ').concat(l(e.opacity),'>\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="slider" class="pcr-opacity pcr-slider"></div>\n            </div>\n          </div>\n\n          <div class="pcr-swatches ').concat(e.palette?"":" pcr-last",'" :ref="swatches"></div> \n\n          <div :obj="interaction" class="pcr-interaction" ').concat(l(Object.keys(e.interaction).length),'>\n            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ').concat(l(e.interaction.input),'>\n\n            <input :arr="options" class="pcr-type" data-type="HEXA" value="').concat(a?"HEX":"HEXA",'" type="button" ').concat(l(e.interaction.hex),'>\n            <input :arr="options" class="pcr-type" data-type="RGBA" value="').concat(a?"RGB":"RGBA",'" type="button" ').concat(l(e.interaction.rgba),'>\n            <input :arr="options" class="pcr-type" data-type="HSLA" value="').concat(a?"HSL":"HSLA",'" type="button" ').concat(l(e.interaction.hsla),'>\n            <input :arr="options" class="pcr-type" data-type="HSVA" value="').concat(a?"HSV":"HSVA",'" type="button" ').concat(l(e.interaction.hsva),'>\n            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ').concat(l(e.interaction.cmyk),'>\n\n            <input :ref="save" class="pcr-save" value="').concat(t.save||"Save",'" type="button" ').concat(l(e.interaction.save),'>\n            <input :ref="cancel" class="pcr-clear" value="').concat(t.cancel||"Cancel",'" type="button" ').concat(l(e.interaction.cancel),'>\n            <input :ref="clear" class="pcr-clear" value="').concat(t.clear||"Clear",'" type="button" ').concat(l(e.interaction.clear),">\n          </div>\n        </div>\n      </div>\n    ")),c=s.interaction;return c.options.find(e=>!e.hidden&&!e.classList.add("active")),c.type=()=>c.options.find(e=>e.classList.contains("active")),s};function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class O{constructor(e){A(this,"_initializingActive",!0),A(this,"_recalc",!0),A(this,"_color",E()),A(this,"_lastColor",E()),A(this,"_swatchColors",[]),A(this,"_eventListener",{init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]}),this.options=e=Object.assign({appClass:null,theme:"classic",useAsButton:!1,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,components:{interaction:{}},strings:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"},e);const{swatches:t,inline:n,components:o,theme:r,sliders:i,lockOpacity:a}=e;["nano","monolith"].includes(r)&&!i&&(e.sliders="h"),o.interaction||(o.interaction={});const{preview:l,opacity:s,hue:c,palette:d}=o;o.opacity=!a&&s,o.palette=d||l||s||c,n&&(e.showAlways=!0),this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),t&&t.length&&t.forEach(e=>this.addSwatch(e)),this._nanopop=L({reference:this._root.button,el:this._root.app});const{app:u}=this._root,p=this;requestAnimationFrame(function t(){if(!u.offsetWidth&&u.parentElement!==document.body)return requestAnimationFrame(t);p.setColor(e.default),p._rePositioningPicker(),e.defaultRepresentation&&(p._representation=e.defaultRepresentation,p.setColorRepresentation(p._representation)),e.showAlways&&p.show(),p._initializingActive=!1,p._emit("init")})}_preBuild(){const e=this.options;"string"==typeof e.el&&(e.el=e.el.split(/>>/g).reduce((e,t,n,o)=>(e=e.querySelector(t),n<o.length-1?e.shadowRoot:e),document)),this._root=k(e),e.useAsButton&&(this._root.button=e.el),document.body.appendChild(this._root.root)}_finalBuild(){const e=this.options,t=this._root;if(document.body.removeChild(t.root),e.inline){const n=e.el.parentElement;e.el.nextSibling?n.insertBefore(t.app,e.el.nextSibling):n.appendChild(t.app)}else document.body.appendChild(t.app);e.useAsButton?e.inline&&e.el.remove():e.el.parentNode.replaceChild(t.root,e.el),e.disabled&&this.disable(),e.comparison||(t.button.style.transition="none",e.useAsButton||(t.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){const e=this,t=this.options.components,n=(e.options.sliders||"v").repeat(2),[o,r]=n.match(/^[vh]+$/g)?n:[],i={palette:D({element:e._root.palette.picker,wrapper:e._root.palette.palette,onstop:()=>e._emit("changestop",e),onchange(n,o){if(!t.palette)return;const{_color:r,_root:i,options:a}=e;e._recalc&&(r.s=100*n,r.v=100-100*o,r.v<0&&(r.v=0),e._updateOutput());let l=r.toRGBA().toString(0);this.element.style.background=l,this.wrapper.style.background="\n                        linear-gradient(to top, rgba(0, 0, 0, ".concat(r.a,"), transparent),\n                        linear-gradient(to left, hsla(").concat(r.h,", 100%, 50%, ").concat(r.a,"), rgba(255, 255, 255, ").concat(r.a,"))\n                    "),a.comparison||(i.button.style.color=l,a.useAsButton||(i.preview.lastColor.style.color=l)),i.preview.currentColor.style.color=l,e.options.comparison||i.button.classList.remove("clear")}}),hue:D({lock:"v"===r?"h":"v",element:e._root.hue.picker,wrapper:e._root.hue.slider,onstop:()=>e._emit("changestop",e),onchange(n){t.hue&&t.palette&&(e._recalc&&(e._color.h=360*n),this.element.style.backgroundColor="hsl(".concat(e._color.h,", 100%, 50%)"),i.palette.trigger())}}),opacity:D({lock:"v"===o?"h":"v",element:e._root.opacity.picker,wrapper:e._root.opacity.slider,onstop:()=>e._emit("changestop",e),onchange(n){t.opacity&&t.palette&&(e._recalc&&(e._color.a=Math.round(100*n)/100),this.element.style.background="rgba(0, 0, 0, ".concat(e._color.a,")"),i.palette.trigger())}}),selectable:N({elements:e._root.interaction.options,className:"active",onchange(t){e._representation=t.target.getAttribute("data-type").toUpperCase(),e._recalc&&e._updateOutput()}})};this._components=i}_bindEvents(){const{_root:e,options:t}=this,n=[l(e.interaction.clear,"click",()=>this._clearColor()),l([e.interaction.cancel,e.preview.lastColor],"click",()=>{this._emit("cancel",this),this.setHSVA(...this._lastColor.toHSVA(),!0)}),l(e.interaction.save,"click",()=>{!this.applyColor()&&!t.showAlways&&this.hide()}),l(e.interaction.result,["keyup","input"],e=>{this.setColor(e.target.value,!0)&&!this._initializingActive&&this._emit("change",this._color),e.stopImmediatePropagation()}),l(e.interaction.result,["focus","blur"],e=>{this._recalc="blur"===e.type,this._recalc&&this._updateOutput()}),l([e.palette.palette,e.palette.picker,e.hue.slider,e.hue.picker,e.opacity.slider,e.opacity.picker],["mousedown","touchstart"],()=>this._recalc=!0)];if(!t.showAlways){const o=t.closeWithKey;n.push(l(e.button,"click",()=>this.isOpen()?this.hide():this.show()),l(document,"keyup",e=>this.isOpen()&&(e.key===o||e.code===o)&&this.hide()),l(document,["touchstart","mousedown"],t=>{this.isOpen()&&!f(t).some(t=>t===e.app||t===e.button)&&this.hide()},{capture:!0}))}if(t.adjustableNumbers){const t={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};h(e.interaction.result,(e,n,o)=>{const r=t[this.getColorRepresentation().toLowerCase()];if(r){const t=r[o],i=e+(t>=100?1e3*n:n);return i<=0?0:Number((i<t?i:t).toPrecision(3))}return e})}if(t.autoReposition&&!t.inline){let e=null;const o=this;n.push(l(window,["scroll","resize"],()=>{o.isOpen()&&(t.closeOnScroll&&o.hide(),null===e?(e=setTimeout(()=>e=null,100),requestAnimationFrame(function t(){o._rePositioningPicker(),null!==e&&requestAnimationFrame(t)})):(clearTimeout(e),e=setTimeout(()=>e=null,100)))},{capture:!0}))}this._eventBindings=n}_rePositioningPicker(){const{options:e}=this;if(!e.inline){const{app:t}=this._root;matchMedia("(max-width: 576px)").matches?Object.assign(t.style,{margin:"auto",height:"".concat(t.getBoundingClientRect().height,"px"),top:0,bottom:0,left:0,right:0}):(Object.assign(t.style,{margin:null,right:null,top:null,bottom:null,left:null,height:null}),this._nanopop.update(e.position))}}_updateOutput(){const{_root:e,_color:t,options:n}=this;if(e.interaction.type()){const o="to".concat(e.interaction.type().getAttribute("data-type"));e.interaction.result.value="function"==typeof t[o]?t[o]().toString(n.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",t)}_clearColor(e=!1){const{_root:t,options:n}=this;n.useAsButton||(t.button.style.color="rgba(0, 0, 0, 0.15)"),t.button.classList.add("clear"),n.showAlways||this.hide(),this._initializingActive||e||(this._emit("save",null),this._emit("clear",this))}_parseLocalColor(e){const{values:t,type:n,a:o}=function(e){e=e.match(/^[a-zA-Z]+$/)?function(e){if("black"===e.toLowerCase())return"#000000";const t=document.createElement("canvas").getContext("2d");return t.fillStyle=e,"#000000"===t.fillStyle?null:t.fillStyle}(e):e;const t={cmyk:/^cmyk[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)/i,rgba:/^((rgba)|rgb)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hsla:/^((hsla)|hsl)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hsva:/^((hsva)|hsv)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},n=e=>e.map(e=>/^(|\d+)\.\d+|\d+$/.test(e)?Number(e):void 0);let o;e:for(const r in t){if(!(o=t[r].exec(e)))continue;const i=!!o[2];switch(r){case"cmyk":{let[,e,t,i,a]=n(o);if(e>100||t>100||i>100||a>100)break e;return{values:T(e,t,i,a),type:r}}case"rgba":{let[,,,e,t,a,l]=n(o);if(e>255||t>255||a>255||l<0||l>1||i===!l)break e;return{values:[...v(e,t,a),l],a:l,type:r}}case"hexa":{let[,e]=o;4!==e.length&&3!==e.length||(e=e.split("").map(e=>e+e).join(""));const t=e.substring(0,6);let n=e.substring(6);return n=n?parseInt(n,16)/255:void 0,{values:[...I(t),n],a:n,type:r}}case"hsla":{let[,,,e,t,a,l]=n(o);if(e>360||t>100||a>100||l<0||l>1||i===!l)break e;return{values:[...w(e,t,a),l],a:l,type:r}}case"hsva":{let[,,,e,t,a,l]=n(o);if(e>360||t>100||a>100||l<0||l>1||i===!l)break e;return{values:[e,t,a,l],a:l,type:r}}}}return{values:null,type:null}}(e),{lockOpacity:r}=this.options,i=void 0!==o&&1!==o;return t&&3===t.length&&(t[3]=void 0),{values:!t||r&&i?null:t,type:n}}_emit(e,...t){this._eventListener[e].forEach(e=>e(...t,this))}on(e,t){return"function"==typeof t&&"string"==typeof e&&e in this._eventListener&&this._eventListener[e].push(t),this}off(e,t){const n=this._eventListener[e];if(n){const e=n.indexOf(t);~e&&n.splice(e,1)}return this}addSwatch(e){const{values:t}=this._parseLocalColor(e);if(t){const{_swatchColors:e,_root:n}=this,o=E(...t),r=d('<button type="button" style="color: '.concat(o.toRGBA().toString(0),'"/>'));return n.swatches.appendChild(r),e.push({element:r,hsvaColorObject:o}),this._eventBindings.push(l(r,"click",()=>{this.setHSVA(...o.toHSVA(),!0),this._emit("swatchselect",o),this._emit("change",o)})),!0}return!1}removeSwatch(e){const t=this._swatchColors[e];if(t){const{element:n}=t;return this._root.swatches.removeChild(n),this._swatchColors.splice(e,1),!0}return!1}applyColor(e=!1){const{preview:t,button:n}=this._root,o=this._color.toRGBA().toString();t.lastColor.style.color=o,this.options.useAsButton||(n.style.color=o),n.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||e||this._emit("save",this._color)}destroy(){this._eventBindings.forEach(e=>s(...e)),Object.keys(this._components).forEach(e=>this._components[e].destroy())}destroyAndRemove(){this.destroy();const{root:e,app:t}=this._root;e.parentElement&&e.parentElement.removeChild(e),t.parentElement.removeChild(t),Object.keys(this).forEach(e=>this[e]=null)}hide(){return this.options.inline||(this._root.app.classList.remove("visible"),this._emit("hide",this)),this}show(){return this.options.disabled||(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this)),this}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(e=360,t=0,n=0,o=1,r=!1){const i=this._recalc;if(this._recalc=!1,e<0||e>360||t<0||t>100||n<0||n>100||o<0||o>1)return!1;this._color=E(e,t,n,o);const{hue:a,opacity:l,palette:s}=this._components;return a.update(e/360),l.update(o),s.update(t/100,1-n/100),r||this.applyColor(),i&&this._updateOutput(),this._recalc=i,!0}setColor(e,t=!1){if(null===e)return this._clearColor(t),!0;const{values:n,type:o}=this._parseLocalColor(e);if(n){const e=o.toUpperCase(),{options:r}=this._root.interaction,i=r.find(t=>t.getAttribute("data-type")===e);if(i&&!i.hidden)for(const e of r)e.classList[e===i?"add":"remove"]("active");return this.setColorRepresentation(e),this.setHSVA(...n,t)}return!1}setColorRepresentation(e){return e=e.toUpperCase(),!!this._root.interaction.options.find(t=>t.getAttribute("data-type").startsWith(e)&&!t.click())}getColorRepresentation(){return this._representation}getColor(){return this._color}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}}O.utils=o,O.libs={HSVaColor:E,Moveable:D,Nanopop:L,Selectable:N},O.create=e=>new O(e),O.version="1.2.7",t.default=O}]).default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2),r=n(1),i=n(17),a=n(4);t.createFont=function(e,t,n,l,s){const c=o.createDiv();let d,u,p,f=getComputedStyle(e),h=a.getImportant(e,"font-size",s),m=a.getImportant(e,"font-weight",s),g=a.getImportant(e,"font-family",s),b=o.createLabelInput(r.TEXT.FONT_SIZE,90);b.input.style.width="50%",b.setContent(f.fontSize),b.setInputHandler(o=>{e.style.setProperty("font-size",o.target.value,h),d=i.StyleLog.createUpdate(t,n,e.style.fontSize,"font-size",l,!!h)}),c.appendChild(b.input);let y=o.createLabelInput(r.TEXT.FONT_WEIGHT,90);y.input.style.width="50%",y.setContent(f.fontWeight),y.setInputHandler(o=>{e.style.setProperty("font-weight",o.target.value,m),u=i.StyleLog.createUpdate(t,n,e.style.fontWeight,"font-weight",l,!!m)}),c.appendChild(y.input);let M=o.createLabelInput(r.TEXT.FONT_FAMILY,90);return M.setContent(f.fontFamily),M.setInputHandler(o=>{e.style.setProperty("font-family",o.target.value,g),p=i.StyleLog.createUpdate(t,n,e.style.fontFamily,"font-family",l,!!g)}),c.appendChild(M.input),{el:c,getLogs:()=>[d,u,p]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2),r=n(1),i=n(17),a=n(4);t.createSize=function(e,t,n,l,s){const c=o.createDiv();let d,u,p=getComputedStyle(e),f=a.getImportant(e,"width",s),h=a.getImportant(e,"height",s),m=o.createLabelInput(r.TEXT.WIDTH,90);m.input.style.width="50%",m.setContent(p.width),m.setInputHandler(o=>{e.style.setProperty("width",o.target.value,f),d=i.StyleLog.createUpdate(t,n,e.style.width,"width",l,!!f)}),c.appendChild(m.input);let g=o.createLabelInput(r.TEXT.HEIGHT,90);return g.input.style.width="50%",g.setContent(p.height),g.setInputHandler(o=>{e.style.setProperty("height",o.target.value,h),u=i.StyleLog.createUpdate(t,n,e.style.height,"height",l,!!h)}),c.appendChild(g.input),{el:c,getLogs:()=>[d,u]}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=o(n(0)),a=n(4),l=n(7),s=n(5),c=n(3),d=n(10),u=n(118),p=n(9),f=n(16),h=n(6),m=o(n(8));t.default=class extends m.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(r.TEXT.COPY_REPEAT);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(e){this.setVisiable(!0);let t=i.default.lastSelectedDomEventArgs;return a.isBody(t.element)?this.setVisiable(!1):l.getRepeatComment(e)?void 0:this.setVisiable(!1)}click(){let e=i.default.lastSelectedDomEventArgs;this.parentMenu.hidden();let t=h.KoobooComment.getComments(e.element),{nodes:n}=s.getWrapDom(e.element,c.OBJECT_TYPE.contentrepeater);if(!n||0==n.length)return;let o=n[n.length-1],r=o.parentNode,a=d.newGuid()+"_name",m=l.getRepeatComment(t).nameorid;for(const e of n.reverse()){let t=e.cloneNode(!0);l.changeNameOrId(t,a,m),r.insertBefore(t,o.nextSibling)}let g=l.getRepeatComment(t),b=[new u.CopyRepeatUnit(s.getGuidComment(a))],y=[f.ContentLog.createCopy(a,g.nameorid)],M=new p.operationRecord(b,y,a);i.default.operationManager.add(M)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(21),r=n(5),i=n(3),a=n(2);t.CopyRepeatUnit=class extends o.Unit{undo(e){let t=a.createDiv(),{nodes:n,startNode:o}=r.getWrapDom(e,i.OBJECT_TYPE.contentrepeater);o.parentNode.insertBefore(t,o),n.forEach(e=>t.appendChild(e)),this.newValue=t.innerHTML,t.outerHTML=this.oldValue}redo(e){let t=a.createDiv();e.parentNode.replaceChild(t,e),t.outerHTML=this.newValue}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=o(n(0)),a=n(4),l=n(7),s=n(5),c=n(3),d=n(6),u=n(9),p=n(120),f=n(16),h=n(2),m=o(n(8));t.default=class extends m.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(r.TEXT.DELETE_REPEAR);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(e){this.setVisiable(!0);let t=i.default.lastSelectedDomEventArgs;return a.isBody(t.element)?this.setVisiable(!1):l.getRepeatComment(e)?void 0:this.setVisiable(!1)}click(){let e=i.default.lastSelectedDomEventArgs;this.parentMenu.hidden();let{nodes:t,startNode:n}=s.getWrapDom(e.element,c.OBJECT_TYPE.contentrepeater);if(!t||0==t.length||!n)return;let o=new d.KoobooComment(n).nameorid,r=s.getGuidComment(o),a=h.createDiv();n.parentNode.insertBefore(a,n),t.forEach(e=>a.appendChild(e));let l=a.innerHTML;a.outerHTML=r;let m=[new p.DeleteRepeatUnit(l)],g=[f.ContentLog.createDelete(o)],b=new u.operationRecord(m,g,o);i.default.operationManager.add(b)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(21),r=n(5),i=n(3),a=n(2);t.DeleteRepeatUnit=class extends o.Unit{undo(e){this.newValue=`\x3c!--${e.nodeValue}--\x3e`;let t=a.createDiv();e.parentNode.replaceChild(t,e),t.outerHTML=this.oldValue}redo(e){let t=a.createDiv(),{nodes:n,startNode:o}=r.getWrapDom(e,i.OBJECT_TYPE.contentrepeater);o.parentNode.insertBefore(t,o),n.forEach(e=>t.appendChild(e)),this.oldValue=t.innerHTML,t.outerHTML=this.newValue}}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,l)}s((o=o.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),a=r(n(0)),l=n(4),s=n(7),c=n(5),d=n(38),u=n(13),p=n(9),f=n(12),h=n(3),m=n(6),g=n(2),b=r(n(8));t.default=class extends b.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(i.TEXT.REPLACE_TO_IMG);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(e){this.setVisiable(!0);let t=a.default.lastSelectedDomEventArgs;if(s.getRepeatComment(e))return this.setVisiable(!1);if(c.getRelatedRepeatComment(t.element))return this.setVisiable(!1);if(!s.getViewComment(e))return this.setVisiable(!1);if(l.isInTable(t.element))return this.setVisiable(!1);let{koobooId:n,parent:o}=c.getCleanParent(t.element);return o||n?l.isImg(t.element)?this.setVisiable(!1):o&&c.isDynamicContent(o)?this.setVisiable(!1):void 0:this.setVisiable(!1)}click(){return o(this,void 0,void 0,function*(){let e=a.default.lastSelectedDomEventArgs;this.parentMenu.hidden();let t=m.KoobooComment.getComments(e.element),{koobooId:n,parent:o}=c.getCleanParent(e.element);c.setGuid(o);let r=o.innerHTML;try{let i=getComputedStyle(e.element),l=i.width,m=e.element.style.getPropertyPriority("width"),b=i.height,y=e.element.style.getPropertyPriority("height"),M=i.display,_=g.createImg();_.setAttribute(h.KOOBOO_ID,e.koobooId),e.element.parentElement.replaceChild(_,e.element),_.style.setProperty("width",l,m),_.style.setProperty("height",b,y),_.style.display=M,yield d.createImagePicker(_),c.markDirty(o);let v=c.setGuid(o),T=c.clearKoobooInfo(o.innerHTML),w=s.getViewComment(t),I=new u.InnerHtmlUnit(r),E=f.DomLog.createUpdate(w.nameorid,T,n,w.objecttype),C=new p.operationRecord([I],[E],v);a.default.operationManager.add(C)}catch(e){o.innerHTML=r}})}}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,l)}s((o=o.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),a=r(n(0)),l=n(4),s=n(7),c=n(5),d=n(31),u=n(3),p=n(14),f=n(6),h=n(2),m=n(13),g=n(12),b=n(9),y=r(n(8)),M=n(19);t.default=class extends y.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(i.TEXT.REPLACE_TO_TEXT);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(e){this.setVisiable(!0);let t=a.default.lastSelectedDomEventArgs;if(s.getRepeatComment(e))return this.setVisiable(!1);if(c.getRelatedRepeatComment(t.element))return this.setVisiable(!1);if(l.isInTable(t.element))return this.setVisiable(!1);if(!s.getViewComment(e))return this.setVisiable(!1);let{koobooId:n,parent:o}=c.getCleanParent(t.element);return o&&n&&l.isImg(t.element)?c.isDynamicContent(o)?this.setVisiable(!1):void 0:this.setVisiable(!1)}click(){return o(this,void 0,void 0,function*(){if(!M.htmlModeCheck())return void this.parentMenu.hidden();let e=a.default.lastSelectedDomEventArgs,{parent:t,koobooId:n}=c.getCleanParent(e.element),o=t.innerHTML,r=h.createP(),i=getComputedStyle(e.element),l=i.width,y=e.element.style.getPropertyPriority("width"),_=i.height,v=e.element.style.getPropertyPriority("height");e.element.parentElement.replaceChild(r,e.element),r.setAttribute(u.KOOBOO_ID,e.koobooId),r.setAttribute(u.KOOBOO_DIRTY,""),r.style.setProperty("width",l,y),r.style.setProperty("height",_,v),r.style.display="block",p.emitHoverEvent(r),p.emitSelectedEvent(),yield d.setInlineEditor({selector:r,onSave:()=>{if(s.clearContent(o)==s.clearContent(r.innerHTML))return;let e=c.setGuid(t),i=f.KoobooComment.getComments(t),l=s.getEditComment(i),d=new m.InnerHtmlUnit(o),u=g.DomLog.createUpdate(l.nameorid,c.clearKoobooInfo(t.innerHTML),n,l.objecttype),p=new b.operationRecord([d],[u],e);a.default.operationManager.add(p)},onCancel:()=>{t.innerHTML=o}}),this.parentMenu.hidden()})}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=o(n(0)),a=n(4),l=n(7),s=n(5),c=n(9),d=n(10),u=n(15),p=n(16),f=n(6),h=o(n(8));t.default=class extends h.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(r.TEXT.EDIT_IMAGE);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(e){this.setVisiable(!0);let t=i.default.lastSelectedDomEventArgs;if(!a.isImg(t.element))return this.setVisiable(!1);let n=l.getAttributeComment(e,"src");return n&&n.fieldname?void 0:this.setVisiable(!1)}click(){let e=i.default.lastSelectedDomEventArgs;this.parentMenu.hidden();let t=f.KoobooComment.getComments(e.element),n=l.getAttributeComment(t,"src"),o=e.element,r=o.getAttribute("src");d.pickImg(e=>{o.src=e;let t=s.setGuid(o),a=o.getAttribute("src"),l=new u.AttributeUnit(r,"src"),d=p.ContentLog.createUpdate(n.nameorid,n.fieldname,a),f=new c.operationRecord([l],[d],t);i.default.operationManager.add(f)})}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=o(n(0)),a=n(4),l=n(7),s=n(6),c=o(n(8));t.default=class extends c.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(r.TEXT.EDIT_LINK);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(e){this.setVisiable(!0);let t=i.default.lastSelectedDomEventArgs;if(!a.isLink(t.element))return this.setVisiable(!1);let n=l.getAttributeComment(e,"href");return n&&n.fieldname?void 0:this.setVisiable(!1)}click(){let e=i.default.lastSelectedDomEventArgs;this.parentMenu.hidden();let t=s.KoobooComment.getComments(e.element),n=l.getAttributeComment(t,"href");l.updateAttributeLink(e.element,e.koobooId,n)}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=o(n(0)),a=o(n(8));t.default=class extends a.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(r.TEXT.CLICK);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(e){this.setVisiable(!0)}click(){let e=i.default.lastHoverDomEventArgs.element;this.parentMenu.hidden(),e._a?e._a.click():e.click()}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=o(n(0)),a=n(5),l=n(31),s=n(6),c=n(13),d=n(3),u=n(2),p=n(127),f=n(9),h=n(7),m=o(n(8));t.default=class extends m.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(r.TEXT.EDIT);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(e){if(this.setVisiable(!0),!h.getHtmlBlockComment(e))return this.setVisiable(!1)}click(){let{element:e}=i.default.lastSelectedDomEventArgs;this.parentMenu.hidden();let t=e.innerHTML;l.setInlineEditor({selector:e,onSave:()=>{if(h.clearContent(t)==h.clearContent(e.innerHTML))return;let n=s.KoobooComment.getComments(e);a.markDirty(e);let o=a.setGuid(e),r=new c.InnerHtmlUnit(t),l=h.getHtmlBlockComment(n),{nodes:m}=a.getWrapDom(e,d.OBJECT_TYPE.htmlblock),g=u.createDiv();m.forEach(e=>g.appendChild(e.cloneNode(!0)));let b=p.HtmlblockLog.createUpdate(l.nameorid,a.clearKoobooInfo(g.innerHTML)),y=new f.operationRecord([r],[b],o);i.default.operationManager.add(y)},onCancel:()=>{e.innerHTML=t}})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(3),r=n(22),i=n(23);class a extends i.Log{constructor(){super(...arguments),this.objectType=o.OBJECT_TYPE.htmlblock,this.editorType=o.EDITOR_TYPE.htmlblock}static createDelete(e){let t=new a;return t.action=r.ActionType.delete,t.nameOrId=e,t}static createUpdate(e,t){let n=new a;return n.action=r.ActionType.update,n.nameOrId=e,n.value=t,n}}t.HtmlblockLog=a},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iI2ZmZmZmZiIgZD0iTTk1MS44OTg4NjkgMTgyLjI3OTQ4N2MwIDAuNzk4MTc5LTAuMTk1NDUxIDEuNTQ0MTY5LTAuMjM3NDA3IDIuMzMzMTM4bDAgMzA0LjkwMDIyMmMwIDI0LjcxNjkzOC0xOS43NTc5OTYgNDQuNzUxMjI3LTQ0LjEzMTEwMyA0NC43NTEyMjctMjQuMzczMTA3IDAtNDQuMTMxMTAzLTIwLjAzNTMxMi00NC4xMzExMDMtNDQuNzQ5MThMODYzLjM5OTI1NSAyODguOTYxMjA0IDQ1NS43MjYzNDYgNjk3LjEyOTM5NGMtMTcuNDI2OTA1IDE3LjQ0OTQxNy00NS42ODE0MTIgMTcuNDQ5NDE3LTYzLjEwNjI3IDAtMTcuNDI2OTA1LTE3LjQ0NjM0Ny0xNy40MjY5MDUtNDUuNzM2NjcxIDAtNjMuMTgzMDE4bDQwNy4xMDkwNjgtNDA3LjYwNTM3Mkw2MDAuNDIxODQyIDIyNi4zNDEwMDVjLTI0Ljc1Mzc3NyAwLTQ0LjgxOTc4OC0xOS43MjUyNS00NC44MTk3ODgtNDQuMDYxNTE4IDAtMjQuMzMyMTc1IDIwLjA2ODA1OC00NC4wNTg0NDggNDQuODE5Nzg4LTQ0LjA1ODQ0OGwzMDEuMTY4MjI0IDBjMTAuNTAyMTkyLTEuMjEzNjQxIDIxLjI5OTA5NSAxLjE3ODg0OSAzMC4zNTk0NDggNy40MjQwODZDOTQzLjk3MTMxNSAxNTMuNTQ4MTE4IDk1MS44OTg4NjkgMTY2Ljk5NjQwOCA5NTEuODk4ODY5IDE4Mi4yNzk0ODd6TTQyMy45MzgzNjIgMjI2LjM4NTAwN2wwIDAuMDAyMDQ3LTIxOS44OTgyNjkgMGMtMjQuMjkwMjE5IDAtNDMuOTc5NjU0IDIwLjM3ODEyLTQzLjk3OTY1NCA0NC42NjgzMzlsMCA0ODMuMDg3NTA3YzAgMjQuMjkwMjE5IDE5LjY4OTQzNSA0My45Nzc2MDcgNDMuOTc5NjU0IDQzLjk3NzYwN2w2MTUuNzEzMTA3IDBjMjQuMjkwMjE5IDAgNDMuOTc5NjU0LTE5LjY4NzM4OCA0My45Nzk2NTQtNDMuOTc3NjA3bDAtODcuOTYxMzU0IDAuMDA0MDkzIDBjMC0yNC4yODgxNzMgMTkuNjg3Mzg4LTQzLjk3NzYwNyA0My45Nzc2MDctNDMuOTc3NjA3czQzLjk4MTcgMTkuNjg5NDM1IDQzLjk4MTcgNDMuOTc3NjA3YzAgMC4wMTEyNTYtMC4wMDQwOTMgMC4wMjE0ODktMC4wMDQwOTMgMC4wMzA2OTlsMCAxMDkuOTE4NDM1YzAgNjAuNzI3MDgzLTQ5LjIyNDA5OCAxMDkuOTUzMjI4LTEwOS45NDkxMzQgMTA5Ljk1MzIyOGwtNjU5LjY5NDgwNyAwYy02MC43MjI5OSAwLTEwOS45NDcwODgtNDkuMjI2MTQ1LTEwOS45NDcwODgtMTA5Ljk1MzIyOEw3Mi4xMDExMzEgMjQ4LjM3ODkyN2MwLTYwLjcyNTAzNiA0OS4yMjQwOTgtMTA5Ljk1MTE4MSAxMDkuOTQ3MDg4LTEwOS45NTExODFsMjQxLjg3NDc5MyAwYzAuMDA0MDkzIDAgMC4wMTEyNTYtMC4wMDIwNDcgMC4wMTUzNS0wLjAwMjA0NyAyNC4yOTAyMTkgMCA0My45Nzk2NTQgMTkuNjg5NDM1IDQzLjk3OTY1NCA0My45Nzk2NTRTNDQ4LjIyODU4MSAyMjYuMzg1MDA3IDQyMy45MzgzNjIgMjI2LjM4NTAwN3oiIC8+PC9zdmc+"},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,l)}s((o=o.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),a=r(n(0)),l=r(n(8)),s=n(6),c=n(7),d=n(130),u=n(5);t.default=class extends l.default{constructor(e){super(e);const{el:t,setVisiable:n,setReadonly:o}=this.createItem(i.TEXT.EDIT_COLOR);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n,this.setReadonly=o}update(e){this.setVisiable(!0);let t=a.default.lastSelectedDomEventArgs;return this.setReadonly(u.isDirty(t.element)),c.getViewComment(e)&&t.koobooId?void 0:this.setVisiable(!1)}click(){return o(this,void 0,void 0,function*(){let e=a.default.lastSelectedDomEventArgs,t=s.KoobooComment.getComments(e.element);d.createColorEditor(e.element,c.getViewComment(t),e.koobooId),this.parentMenu.hidden()})}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(11),i=n(1),a=n(25),l=n(2),s=n(15),c=n(131),d=n(9),u=o(n(0)),p=n(5),f=n(132);t.createColorEditor=function(e,t,n){var o=e.getAttribute("style"),h=a.getMatchedColorGroups(e);let m=l.createDiv(),g=[];for(const o of h){let{item:r,getLogs:i}=f.createColorEditItem(o,e,t,n);g.push(i),m.appendChild(r)}const b=()=>[new s.AttributeUnit(o||"","style"),new c.CssUnit("",h)];let{modal:y,close:M,setCancelHandler:_,setOkHandler:v}=r.createModal(i.TEXT.EDIT_COLOR,m,"600px");_(()=>{b().map(t=>t.undo(e)),M()}),v(()=>{let t=p.setGuid(e),n=[];for(const e of g)n.push(...e());if(0!=n.length){let e=new d.operationRecord(b(),n,t);u.default.operationManager.add(e)}M()}),u.default.container.appendChild(y)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(21);t.CssUnit=class extends o.Unit{constructor(e,t){super(e),this.oldValue=e,this.groups=t}undo(e){for(const e of this.groups)for(const t of e.cssColors)t.inline||t.cssStyleRule.style.setProperty(t.prop.prop,t.value,t.important?"important":"")}redo(e){for(const e of this.groups)for(const t of e.cssColors)!t.inline&&t.newValue&&void 0!==t.newImportant&&t.cssStyleRule.style.setProperty(t.prop.prop,t.newValue,t.newImportant?"important":"")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2),r=n(17),i=n(41),a=n(1);function l(e,t){let n=e.cssStyleRule.style.getPropertyPriority(e.prop.prop),o=e.prop.replaceColor(e.value,t);return e.cssStyleRule.style.setProperty(e.prop.prop,o,n),e.newValue=o,e.newImportant=n,o}t.createColorEditItem=function(e,t,n,s){let c=o.createDiv();c.style.display="flex",c.style.alignItems="center",c.style.height="38px";let d,u,p=document.createElement("span");p.style.width="160px";let f=e.cssColors[0],h=!f.inline,m=e.cssColors.find(e=>e.inline),g=e.cssColors.find(e=>!e.inline),b=m||f;p.innerText=f.prop.getColor(f.value);let y=i.createColorPicker(e.prop+e.pseudo,f.prop.getColor(f.value),e=>{if(p.innerText=e,h){if(!g)return;let t=l(g,e);u=r.StyleLog.createCssUpdate(t,g.prop.prop,g.rawSelector,g.url?"":g.koobooId,g.url,!!g.newImportant,g.nameorid,g.objecttype,g.mediaRuleList)}else{let{important:o,value:i}=function(e,t,n){let o=n.style.getPropertyValue(e.prop.prop),r=n.style.getPropertyPriority(e.prop.prop);return o=e.prop.replaceColor(o,t),n.style.setProperty(e.prop.prop,o,r),{value:o,important:r}}(b,e,t);d=r.StyleLog.createUpdate(n.nameorid,n.objecttype,i,b.prop.prop,s,!!o)}});y.style.width="200px",y.style.justifyContent="flex-end",c.appendChild(y),c.appendChild(p);let{checkbox:M}=o.createCheckboxInput(a.TEXT.GLOBAL_UPDATE,!f.inline,e=>{if(g)if(e){let e=t.style.getPropertyValue(b.prop.prop);e=b.prop.getColor(e),e=l(g,e),t.style.removeProperty(b.prop.prop),d=r.StyleLog.createUpdate(n.nameorid,n.objecttype,"",b.prop.prop,s),u=r.StyleLog.createCssUpdate(e,g.prop.prop,g.rawSelector,g.url?"":g.koobooId,g.url,!!g.newImportant,g.nameorid,g.objecttype,g.mediaRuleList),h=!0}else{let e=g.cssStyleRule.style.getPropertyPriority(g.prop.prop),o=g.cssStyleRule.style.getPropertyValue(g.prop.prop);o=g.prop.getColor(o),o=b.prop.replaceColor(b.value,o),t.style.setProperty(b.prop.prop,o,e),g.cssStyleRule.style.setProperty(g.prop.prop,g.value,g.important?"important":""),g.newValue=void 0,g.newImportant=void 0,u=void 0,d=r.StyleLog.createUpdate(n.nameorid,n.objecttype,o,b.prop.prop,s,!!e),h=!1}});return h&&!e.pseudo||(M.style.display="none"),c.appendChild(M),{item:c,getLogs:()=>{let e=[];return d&&e.push(d),u&&e.push(u),e}}}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,l)}s((o=o.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),a=r(n(0)),l=r(n(8)),s=n(134),c=n(136),d=n(13),u=n(5),p=n(12),f=n(6),h=n(7),m=n(9);t.default=class extends l.default{constructor(e){super(e);const{el:t,setVisiable:n}=this.createItem(i.TEXT.EDIT_DATA);this.el=t,this.el.addEventListener("click",this.click.bind(this)),this.setVisiable=n}update(){this.setVisiable(!0);let{element:e}=a.default.lastSelectedDomEventArgs,t=c.getEditableData(e);if(!t)return this.setVisiable(!1);let n=f.KoobooComment.getComments(t.cleanParent);return h.getEditComment(n)?void 0:this.setVisiable(!1)}click(){return o(this,void 0,void 0,function*(){this.parentMenu.hidden();let{element:e}=a.default.lastSelectedDomEventArgs,{cleanParent:t,koobooId:n,list:o}=c.getEditableData(e),r=f.KoobooComment.getComments(t),i=h.getEditComment(r),l=t.innerHTML;try{yield s.createDataEdtor(o);let e=u.clearKoobooInfo(t.innerHTML);if(e==u.clearKoobooInfo(l))return;let r=u.setGuid(t);u.markDirty(t);let c=[new d.InnerHtmlUnit(l)],f=[p.DomLog.createUpdate(i.nameorid,e,n,i.objecttype)],h=new m.operationRecord(c,f,r);a.default.operationManager.add(h)}catch(e){t.innerHTML=l}})}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(11),i=n(1),a=o(n(0)),l=n(2),s=n(135),c=n(4),d=n(40);t.createDataEdtor=function(e){const t=l.createIframe();t.style.height="600px";let n=function(e){const{modal:t,setCancelHandler:n,setOkHandler:o,close:l}=r.createModal(i.TEXT.EDIT_DATA,e);let s=new Promise((e,t)=>{n(()=>{l(),t()}),o(()=>{l(),e()})});return a.default.container.appendChild(t),s}(t),o=t.contentDocument,u=t.contentWindow;return function(e){e.open("text/htmlreplace"),e.write("<!DOCTYPE html><html><head></head><body></body></html>"),e.close(),c.shareStyle(e.body)}(o),o.head.appendChild(function(e,t){let n=e.document.body,o=document.createElement("script");return o.src="\\_Admin\\Scripts\\kooboo-web-editor\\richEditor.min.js",o.onload=()=>{for(const o of t){const t=e=>{n.removeChild(e.item),e.el.parentElement.removeChild(e.el)},r=o=>{let i=o.el.cloneNode(!0);o.el.parentElement.insertBefore(i,o.el.nextElementSibling);let{item:a,content:l}=s.createItem(i,t,r);n.insertBefore(a,o.item.nextElementSibling),e.tinymce.init(d.createEditDataSettings(l,i))};let{item:i,content:a}=s.createItem(o,t,r);n.appendChild(i),e.tinymce.init(d.createEditDataSettings(a,o))}},o}(u,e)),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2);t.createItem=function(e,t,n){let r=o.createDiv();r.classList.add("kb_web_editor_edit_data_item");let i=o.createDiv(),a=o.createButton("-");a.onclick=()=>t({item:r,el:e});let l=o.createButton("+");return l.onclick=()=>n({item:r,el:e}),i.innerHTML=e.innerHTML,r.appendChild(i),r.appendChild(a),r.appendChild(l),{item:r,content:i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(4),r=n(5),i=n(7),a=n(3);t.getEditableData=function(e){let t=o.getParentElements(e,!0);t.length>5&&(t=t.splice(0,5));for(const e of t){let{parent:t,koobooId:n}=r.getCleanParent(e),o=e.parentElement;if(!t||!n||!o||!i.isEditable(e)||r.isDynamicContent(o))return;let l=[];for(const t of e.parentElement.children){let n=t;n.id!=a.HOVER_BORDER_SKIP&&e.tagName==n.tagName&&l.push(n)}if(l.length>1)return{list:l,cleanParent:t,koobooId:n}}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(0)),i=n(138),a=n(3);t.createHoverBorder=function(){const e=i.createRect(a.HOVER_BORDER_WIDTH,a.HOVER_BORDER_COLOR);return r.default.hoverDomEvent.addEventListener(t=>{t.closeElement&&!r.default.editing?e.updatePosition(t.closeElement):e.hidden()}),r.default.editableEvent.addEventListener(t=>{t&&e.hidden()}),e.el},t.createSelectedBorder=function(){const e=i.createRect(a.SELECTED_BORDER_WIDTH,a.SELECTED_BORDER_COLOR);return r.default.domChangeEvent.addEventListener(t=>{t.element&&!r.default.editing?e.updatePosition(t.element):e.hidden()}),r.default.editableEvent.addEventListener(t=>{t&&e.hidden()}),e.el}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(139),r=n(2);t.createRect=(e,t)=>{const n=[o.createLine(e,t),o.createLine(e,t),o.createLine(e,t),o.createLine(e,t)],i=r.createDiv();n.forEach(e=>i.appendChild(e.el));return{el:i,updatePosition:t=>{i.style.display="block";let[o,r,a,l]=n,s=t.getBoundingClientRect(),c=document.documentElement.getBoundingClientRect();o.update({top:s.top-c.top,left:s.left-c.left+e,width:t.offsetWidth-2*e}),r.update({top:s.top-c.top,left:s.left-c.left-e+t.offsetWidth,height:t.offsetHeight}),a.update({top:s.top-c.top+t.offsetHeight-e,left:s.left-c.left+e,width:t.offsetWidth-2*e}),l.update({top:s.top-c.top,left:s.left-c.left,height:t.offsetHeight})},hidden:()=>{i.style.display="none"}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(3),r=n(43),i=n(2);t.createLine=(e,t)=>{let n=i.createDiv();n.style.position="absolute",n.style.display="block",n.style.pointerEvents="none",n.style.backgroundColor=t,n.style.width=e+"px",n.style.height=e+"px",n.style.zIndex=o.STANDARD_Z_INDEX-2+"";return{el:n,update:e=>r.updatePositon(e,n)}}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(0)),i=n(141);t.createEditorShade=function(){let{el:e,hidden:t,updatePosition:n}=i.createShade();return r.default.editableEvent.addEventListener(e=>{r.default.lastSelectedDomEventArgs&&(e?n(r.default.lastSelectedDomEventArgs.element):t())}),r.default.tinymceInputEvent.addEventListener(()=>{r.default.lastSelectedDomEventArgs&&n(r.default.lastSelectedDomEventArgs.element)}),document.addEventListener("scroll",()=>{r.default.editing&&n(r.default.lastSelectedDomEventArgs.element)}),e}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(142),i=n(2),a=o(n(42)),l=n(3),s=o(n(0));t.createShade=()=>{const e=[r.createBlock(),r.createBlock(),r.createBlock(),r.createBlock()],t=i.createDiv();e.forEach(e=>t.appendChild(e.el));let n=function(){let e=i.createDiv();return e.classList.add("kb_web_editor_shade_close_btn"),e.style.backgroundImage=`url(${a.default})`,e.style.zIndex=l.STANDARD_Z_INDEX+"",e.onclick=()=>s.default.closeEditingEvent.emit(),e}();t.appendChild(n);return{el:t,updatePosition:o=>{t.style.display="block",n.style.display="block";let[r,i,a,l]=e,s=o.getBoundingClientRect();r.update({top:0,left:s.left,width:s.width,height:s.top<0?0:s.top}),i.update({top:0,right:0,left:s.left+s.width,bottom:0}),a.update({top:s.bottom<0?0:s.bottom,left:s.left,width:s.width,bottom:0}),l.update({top:0,left:0,width:s.left,bottom:0})},hidden:()=>{t.style.display="none",n.style.display="none"}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(3),r=n(43),i=n(2);t.createBlock=()=>{const e=i.createDiv();a(e.style),e.onclick=e=>e.stopPropagation();return{el:e,update:t=>r.updatePositon(t,e)}};const a=e=>{e.position="fixed",e.display="block",e.backgroundColor=o.EDITOR_SHADE_COLOR,e.zIndex=o.STANDARD_Z_INDEX+"",e.cursor="not-allowed"}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(0)),i=n(144),a=n(4);t.createElementNav=function(){const{el:e,update:t}=i.createNavBar();return r.default.domChangeEvent.addEventListener(e=>{let n=a.getParentElements(e.element);t(n)}),r.default.editableEvent.addEventListener(t=>{t&&(e.style.display="none")}),e}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(14),a=o(n(0)),l=n(3);t.createNavBar=function(){const e=r.createDiv();let t;return e.classList.add("kb_web_editor_element_nav_bar"),e.style.zIndex=l.STANDARD_Z_INDEX+"",e.draggable=!0,e.ondragstart=n=>{let o=e.getBoundingClientRect();t={x:o.left+o.width-n.x,y:n.y-o.top}},e.ondrag=n=>{0!=n.x&&0!=n.y&&(e.style.right=document.documentElement.clientWidth-n.x-t.x+"px",e.style.top=n.y-t.y+"px")},{el:e,update:t=>{e.innerHTML="",e.style.display="inline-block";for(const n of t){let o=r.createDiv();"HTML"!=n.tagName&&(o.onclick=e=>{a.default.lastMouseEventArg=e,i.emitSelectedEvent(),e.stopPropagation()},o.onmouseover=e=>{i.emitHoverEvent(n),e.stopPropagation()}),o.innerText=n.tagName,e.appendChild(o),n!=t[t.length-1]&&e.appendChild(document.createTextNode("<"))}}}}}]);