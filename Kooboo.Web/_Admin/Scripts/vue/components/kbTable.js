!function(t){var e={};function a(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=8)}([function(t,e,a){"use strict";function n(t,e,a,n,i,s,r,l){var o,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=a,c._compiled=!0),n&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),r?(o=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=o):i&&(o=l?function(){i.call(this,this.$root.$options.shadowRoot)}:i),o)if(c.functional){c._injectStyles=o;var u=c.render;c.render=function(t,e){return o.call(e),u(t,e)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,o):[o]}return{exports:t,options:c}}a.d(e,"a",function(){return n})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a={computed:{class(){if(!this.meta.class)return null;if(!(this.meta.class instanceof Array))return this.meta.class;for(var t="",e=0;e<this.meta.class.length;e++){const a=this.meta.class[e];t+="object"==typeof a?" "+a[this.value]:" "+a}return t},value(){return this.row[this.name]},text(){return this.meta.text?"object"==typeof this.meta.text?this.formatText(this.meta.text[this.value]):this.formatText(this.meta.text,this.value):"date"==typeof this.value?Date.toDefaultLangString(this.value):this.value},visible(){return!this.meta.visible||this.meta.visible===this.value}},methods:{formatText(template,value){var result=template.replace("{0}",value);return result=result.replace(/\{([^\}]+)\}/g,(m,p)=>eval(`Kooboo.text.${p}`)),result}}}},function(t,e,a){"use strict";e.a={computed:{actionType(){if(this.meta.action&&this.action instanceof Object){var t=["redirect","newWindow","popup","post","event"];if(this.meta.action.type&&t.length>this.meta.action.type)return t[this.meta.action.type]}return this.meta.action},action(){return this.meta.action&&this.meta.action instanceof Object?this.meta.action:this.meta},isAction(){return["post","event","popup"].indexOf(this.actionType)>-1},actionMeta(){return this.meta&&this.meta.action?this.meta.action.meta:null}}}},function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{ref:"button",attrs:{href:t.href,target:t.target}},[t._t("default",[t.icon?a("i",{class:"fa fa-"+t.meta.iconClass}):[t._v(t._s(t.meta.text))]])],2)};n._withStripped=!0;var i=a(2),s={name:"InnerButton",props:{meta:Object,bindUrl:Function,icon:{type:Boolean,default:!1}},mixins:[i.a],mounted(){this.isAction&&this.$refs.button.addEventListener("click",this.onClick)},computed:{href(){return this.isAction?"javascript:;":this.bindUrl(this.action.url)},target(){return"newWindow"===this.actionType?"_blank":null}},methods:{onClick(t){t.preventDefault(),this.$emit("click",t)}}},r=a(0),l=Object(r.a)(s,n,[],!1,null,null,null);l.options.__file="kbTable/src/components/_Button.vue";e.a=l.exports},function(module,__webpack_exports__,__webpack_require__){"use strict";var _menu_index__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);__webpack_exports__.a={name:"TableMenu",props:{meta:Array,modeltype:String,selected:Array,data:Object|Array,list:Array},provide(){return{tablemenu:this}},computed:{operator(){return this.item.visible?this.item.visible.compare?this.item.visible.compare:this.item.visible.operator:null}},methods:{visible(item){if(!item.visible)return!0;var operator=this.getOperator(item);const compare="="===operator?"===":operator;return eval(`${this.selected.length} ${compare} ${item.visible.value}`)},getOperator:t=>t.visible?t.visible.compare?t.visible.compare:t.visible.operator:null},components:{..._menu_index__WEBPACK_IMPORTED_MODULE_0__.a}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _components_Button__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),_actionMixin__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2);__webpack_exports__.a={name:"MenuInnerButton",props:{meta:Object,selected:Array,list:Array,icon:{type:Boolean,default:!1}},computed:{alignRight(){return"right"===this.meta.align||1==this.meta.align}},mixins:[_actionMixin__WEBPACK_IMPORTED_MODULE_1__.a],inject:["tablemenu"],methods:{bindUrl(t){return this.$parameterBinder.bind(t)},onClick(){switch(this.actionType){case"post":if(this.action.confirm){var text=eval("Kooboo.text."+this.action.confirm);confirm(text)&&api.post(this.bindUrl(this.action.url),{ids:this.selected.map(t=>t.id)})}else api.post(this.bindUrl(this.action.url),{ids:this.selected.map(t=>t.id)});break;case"event":this.$root[this.action.url](this.selected);break;case"popup":var parameters=this.$parameterBinder.getKeyValue(this.action.url);this.tablemenu&&this.tablemenu.modeltype&&(parameters.modelType=this.tablemenu.modeltype),this.$root.$refs.popup.show({parameters:parameters,context:this.list,selected:this.selected,meta:this.actionMeta})}}},components:{InnerButton:_components_Button__WEBPACK_IMPORTED_MODULE_0__.a}}},function(t,e){t.exports=Vue},function(t,e,a){"use strict";var n=function(){var t=this.$createElement;return(this._self._c||t)("inner-button",{attrs:{meta:this.meta,selected:this.selected,list:this.list}})};n._withStripped=!0;var i=function(){var t=this.$createElement;return(this._self._c||t)("inner-button",{class:["btn navbar-btn",this.meta.class,{"pull-right":this.alignRight},{"btn-default":this.icon}],attrs:{meta:this.meta,"bind-url":this.bindUrl,icon:this.icon},on:{click:this.onClick}})};i._withStripped=!0;var s=a(5).a,r=a(0),l=Object(r.a)(s,i,[],!1,null,null,null);l.options.__file="kbTable/src/menu/_Button.vue";var o=l.exports,c={name:"MenuButton",props:{meta:Object,selected:Array,data:Object|Array,list:Array},components:{InnerButton:o}},u=Object(r.a)(c,n,[],!1,null,null,null);u.options.__file="kbTable/src/menu/Button.vue";var p=u.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["btn-group navbar-btn",{open:t.expanded}]},[a("button",{class:"btn "+t.meta.class,attrs:{"data-toggle":"dropdown"},on:{click:function(e){e.preventDefault(),t.expanded=!t.expanded}}},[a("span",[t._v(t._s(t.meta.text))]),t._v(" "),a("i",{staticClass:"fa fa-angle-down"})]),t._v(" "),a("ul",{staticClass:"dropdown-menu"},t._l(t.options,function(e,n){return a("li",{key:n},[a("inner-button",{attrs:{meta:t.meta,selected:t.selected,"bind-url":function(a){return t.bindUrl(a,e.value)}},on:{click:function(a){return t.onClick(e.value)}}},[t._v(t._s(e.text))])],1)}),0)])};m._withStripped=!0;var _=a(3),h=a(2),d={name:"MenuDropDown",props:{meta:Object,selected:Array,data:Object|Array,list:Array},data:()=>({expanded:!1}),mixins:[h.a],computed:{options(){const t=this.meta.options;if(t instanceof Array)return t.map(t=>({text:t.text,value:t}));if(t instanceof Object){const a=this.data[t.data];console.log(a);var e=this;return a.map(function(a){var n=e.$parameterBinder.formatText(t.text,a),i=e.$parameterBinder.bind(i,a);return{text:n,value:i}})}return[]}},methods:{bindUrl(t,e){return this.$parameterBinder.bind(t)},onClick(t){switch(this.actionType){case"post":api.post(this.bindUrl(this.action.url,t),{ids:this.selected.map(t=>t.id)});break;case"event":this.$root[this.action.url](this.selected);break;case"popup":this.$root.$refs.popup.show({parameters:this.$parameterBinder.getKeyValue(this.action.url),context:this.list,selected:this.selected,meta:this.actionMeta})}}},components:{InnerButton:_.a}},b=Object(r.a)(d,m,[],!1,null,null,null);b.options.__file="kbTable/src/menu/DropDown.vue";var v=b.exports,f=function(){var t=this.$createElement;return(this._self._c||t)("inner-button",{attrs:{meta:this.meta,selected:this.selected,icon:!0,list:this.list}})};f._withStripped=!0;var x={name:"MenuIcon",props:{meta:Object,selected:Array,data:Object|Array,list:Array},components:{InnerButton:o}},y=Object(r.a)(x,f,[],!1,null,null,null);y.options.__file="kbTable/src/menu/Icon.vue";var w=y.exports;e.a={MenuButton:p,MenuDropdown:v,MenuIcon:w}},function(t,e,a){"use strict";a.r(e);var n=a(6),i=a.n(n),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.meta_d?a("inner-menu",{attrs:{modeltype:t.meta_d.modelType,meta:t.meta_d.menu,data:"object"==typeof t.data_d?t.data_d:null,list:t.list,selected:t.selected}}):t._e(),t._v(" "),t.meta_d?a("inner-table",{attrs:{ctx:t.ctx,meta:t.meta_d,list:t.list,showSelected:t.showSelected}}):t._e()],1)};s._withStripped=!0;var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.meta&&t.meta.length>0?a("div",{staticClass:"navbar navbar-default"},[a("div",{staticClass:"container-fluid"},t._l(t.meta,function(e,n){return a("menu-"+e.type,{directives:[{name:"show",rawName:"v-show",value:t.visible(e),expression:"visible(item)"}],key:n,tag:"component",attrs:{meta:e,data:t.data,selected:t.selected,list:t.list}})}),1)]):t._e()};r._withStripped=!0;var l=a(4).a,o=a(0),c=Object(o.a)(l,r,[],!1,null,null,null);c.options.__file="kbTable/src/Menu.vue";var u=c.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped table-hover"},[a("thead",[a("tr",[t.showSelected?a("th",[t.list.length?a("input",{attrs:{type:"checkbox"},on:{change:t.selectAll}}):t._e()]):t._e(),t._v(" "),t._l(t.meta.columns.map(function(e){return{colName:e.name,header:e.header||t.defaultHeaderMeta}}),function(e){var n=e.colName,i=e.header;return a("th",{key:"header_"+n,class:i.class,style:i.style},[t._v(t._s(i.text))])})],2)]),t._v(" "),a("tbody",t._l(t.list,function(e,n){return a("tr",{key:n},[t.showSelected?a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.__selected,expression:"row.__selected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.__selected)?t._i(e.__selected,null)>-1:e.__selected},on:{change:function(a){var n=e.__selected,i=a.target,s=!!i.checked;if(Array.isArray(n)){var r=t._i(n,null);i.checked?r<0&&t.$set(e,"__selected",n.concat([null])):r>-1&&t.$set(e,"__selected",n.slice(0,r).concat(n.slice(r+1)))}else t.$set(e,"__selected",s)}}})]):t._e(),t._v(" "),t._l(t.meta.columns.map(function(e){return{colName:e.name,cell:e.cell||t.defaultTextMeta}}),function(i){var s=i.colName,r=i.cell;return a("cell-"+r.type,{key:n+"_"+s,tag:"component",attrs:{name:s,meta:r,row:e,list:t.list}})})],2)}),0)])])};p._withStripped=!0;var m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",t._l(t.row[t.name],function(e,n){return a("a",{key:n,staticClass:"label label-sm kb-table-label-refer",style:"background-color:"+t.colorClass(n),on:{click:function(e){return t.onClick(n)}}},[t._v(t._s(t.labelText(n,e)))])}),0)};m._withStripped=!0;var _=a(1),h=a(2),d={name:"CellArray",props:{name:String,meta:Object,row:Object},inject:["table"],methods:{colorClass:t=>Kooboo.getLabelColor(t),labelText(t,e){if(this.meta.text){const a=this.meta.text.replace("{key}",`{component.table.${t}}`);return this.formatText(a,e)}return e},onClick(t){switch(this.actionType){case"popup":var e=this.getParameters(t,this.table.meta.modelType);this.$root.$refs.popup.show({parameters:e,context:this.list,selected:this.selected,meta:this.actionMeta})}},getParameters(t,e){var a={};return this.action.url&&(a=this.$parameterBinder.getKeyValue(this.action.url,this.row)),a=Vue.util.extend(a,this.row),a=Vue.util.extend(a,{by:t,type:e})}},mixins:[_.a,h.a]},b=Object(o.a)(d,m,[],!1,null,null,null);b.options.__file="kbTable/src/cells/Array.vue";var v=b.exports,f=function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("span",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],class:"badge "+this.class,style:this.meta.style},[this._v(this._s(this.text))])])};f._withStripped=!0;var x={name:"CellBadge",props:{name:String,meta:Object,row:Object},mixins:[_.a]},y=Object(o.a)(x,f,[],!1,null,null,null);y.options.__file="kbTable/src/cells/Badge.vue";var w=y.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"table-action"},[a("inner-button",{class:["btn btn-sm",t.meta.class],style:t.meta.style,attrs:{meta:t.meta,row:t.row,name:t.name,list:t.list}},[t._v("\n    "+t._s(t.meta.text)+"\n  ")])],1)};O._withStripped=!0;var k=function(){var t=this.$createElement;return(this._self._c||t)("inner-button",{attrs:{meta:this.meta,"bind-url":this.bindUrl,icon:this.icon},on:{click:this.onClick}},[this._t("default")],2)};k._withStripped=!0;var g=a(3),j={name:"CellInnerButton",props:{name:String,meta:Object,list:Array,row:Object,icon:{type:Boolean,default:!1}},inject:["table"],mixins:[h.a],methods:{bindUrl(t){t=t||this.row[this.name];var e=this.row;return this.table.ctx&&this.table.ctx.parameters&&(e=Vue.util.extend({},this.row),e=Vue.util.extend(e,this.table.ctx.parameters)),t=this.$parameterBinder.bind(t,e)},onClick(){switch(this.actionType){case"event":this.$root[this.action.url](this.row);break;case"post":api.post(this.bindUrl(this.action.url,this.row));break;case"popup":this.$root.$refs.popup.show({parameters:this.$parameterBinder.getKeyValue(this.action.url),context:this.list,row:this.row})}}},components:{InnerButton:g.a}},T=Object(o.a)(j,k,[],!1,null,null,null);T.options.__file="kbTable/src/cells/_Button.vue";var C=T.exports,$={name:"CellButton",props:{name:String,meta:Object,list:Array,row:Object},mixins:[_.a],components:{InnerButton:C}},S=Object(o.a)($,O,[],!1,null,null,null);S.options.__file="kbTable/src/cells/Button.vue";var B=S.exports,A=function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"table-action"},[e("inner-button",{class:["btn btn-default",this.meta.class],style:this.meta.style,attrs:{meta:this.meta,row:this.row,name:this.name,icon:!0,list:this.list}})],1)};A._withStripped=!0;var E={name:"CellIcon",props:{name:String,meta:Object,list:Array,row:Object},mixins:[_.a],components:{InnerButton:C}},M=Object(o.a)(E,A,[],!1,null,null,null);M.options.__file="kbTable/src/cells/Icon.vue";var I=M.exports,D=function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("span",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],class:"label "+this.class,style:this.meta.style},[this._v(this._s(this.text))])])};D._withStripped=!0;var P={name:"CellLabel",props:{name:String,meta:Object,row:Object},mixins:[_.a]},U=Object(o.a)(P,D,[],!1,null,null,null);U.options.__file="kbTable/src/cells/Label.vue";var L=U.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("inner-button",{class:t.meta.class,style:"cursor:pointer; "+t.meta.style,attrs:{meta:t.meta,row:t.row,name:t.name}},[t._v(t._s(t.text))])],1)};N._withStripped=!0;var K={name:"CellLink",props:{name:String,meta:Object,row:Object},mixins:[_.a],components:{InnerButton:C}},R=Object(o.a)(K,N,[],!1,null,null,null);R.options.__file="kbTable/src/cells/Link.vue";var V=R.exports,W=function(){var t=this.$createElement;return(this._self._c||t)("td",[this._v(this._s(this.text))])};W._withStripped=!0;var q={name:"CellText",props:{name:String,meta:Object,row:Object},mixins:[_.a]},F=Object(o.a)(q,W,[],!1,null,null,null);F.options.__file="kbTable/src/cells/Text.vue";var H=F.exports,X=function(){var t=this.$createElement;return(this._self._c||t)("td",[this._v(this._s(this.text))])};X._withStripped=!0;var z={name:"CellDate",props:{name:String,meta:Object,row:Object},computed:{text(){return new Date(this.row[this.name]).toDefaultLangString()}},mixins:[_.a]},G=Object(o.a)(z,X,[],!1,null,null,null);G.options.__file="kbTable/src/cells/Date.vue";var J=G.exports;const Q={text:""},Y={type:"text"};var Z={name:"TableContent",props:{meta:Object,list:Array,ctx:Object,showSelected:{type:Boolean,default:!0}},provide(){return{table:this}},computed:{defaultHeaderMeta:()=>Q,defaultTextMeta:()=>Y},methods:{selectAll(t){const e=t.target.checked;this.list.forEach(t=>{i.a.set(t,"__selected",e)})}},components:{...{CellArray:v,CellBadge:w,CellButton:B,CellIcon:I,CellLabel:L,CellLink:V,CellText:H,CellDate:J}}},tt=Object(o.a)(Z,p,[],!1,null,null,null);tt.options.__file="kbTable/src/Table.vue";var et=tt.exports,at={name:"KoobooTable",props:{metaName:String,meta:Object,data:Object,listName:String,ctx:Object,view:Object},data(){return{meta_d:this.meta,data_d:this.data}},created(){this.metaName&&(this.meta_d=api.tableMeta(this.metaName));var t=this;if(this.meta_d.dataApi){var e=this.ctx&&this.ctx.parameters?this.ctx.parameters:{};api.get(this.$parameterBinder.bind(this.meta_d.dataApi,e)).then(function(e){e.success&&(t.data_d=e.model)})}},computed:{showSelected(){return!this.meta_d.hasOwnProperty("showSelected")||!!this.meta_d.showSelected},selected(){return this.list.filter(t=>t.__selected)},list(){return this.data_d?this.listName?this.data_d[this.listName]:this.data_d:[]}},components:{InnerMenu:u,InnerTable:et}},nt=Object(o.a)(at,s,[],!1,null,null,null);nt.options.__file="kbTable/src/Index.vue";var it=nt.exports;i.a.component("kb-table",it)}]);